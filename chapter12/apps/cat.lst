
cat:     file format elf64-littleriscv
cat
architecture: riscv:rv64, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x0000000070000000

Program Header:
0x70000003 off    0x0000000000003638 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**0
         filesz 0x0000000000000063 memsz 0x0000000000000000 flags r--
    LOAD off    0x0000000000001000 vaddr 0x0000000070000000 paddr 0x0000000000001000 align 2**12
         filesz 0x0000000000002282 memsz 0x0000000000002282 flags r-x
    LOAD off    0x0000000000003284 vaddr 0x0000000070002284 paddr 0x0000000000003282 align 2**12
         filesz 0x00000000000003b4 memsz 0x00000000000003b4 flags rw-

Sections:
Idx Name              Size      VMA               LMA               File off  Algn  Flags
  0 .text             00002282  0000000070000000  0000000000001000  00001000  2**3  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .data             000003b4  0000000070002284  0000000000003282  00003284  2**2  CONTENTS, ALLOC, LOAD, DATA
  2 .riscv.attributes 00000063  0000000000000000  0000000000000000  00003638  2**0  CONTENTS, READONLY
  3 .comment          00000034  0000000000000000  0000000000000000  0000369b  2**0  CONTENTS, READONLY
  4 .debug_line       00002114  0000000000000000  0000000000000000  000036cf  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
  5 .debug_line_str   0000015d  0000000000000000  0000000000000000  000057e3  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
  6 .debug_info       00002146  0000000000000000  0000000000000000  00005940  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
  7 .debug_abbrev     00000dfe  0000000000000000  0000000000000000  00007a86  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
  8 .debug_aranges    00000270  0000000000000000  0000000000000000  00008890  2**4  CONTENTS, READONLY, DEBUGGING, OCTETS
  9 .debug_str        00000544  0000000000000000  0000000000000000  00008b00  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
 10 .debug_frame      00000a20  0000000000000000  0000000000000000  00009048  2**3  CONTENTS, READONLY, DEBUGGING, OCTETS
 11 .debug_rnglists   0000002c  0000000000000000  0000000000000000  00009a68  2**0  CONTENTS, READONLY, DEBUGGING, OCTETS
SYMBOL TABLE:
0000000070000000 l    d  .text	0000000000000000 .text
0000000070002284 l    d  .data	0000000000000000 .data
0000000000000000 l    d  .riscv.attributes	0000000000000000 .riscv.attributes
0000000000000000 l    d  .comment	0000000000000000 .comment
0000000000000000 l    d  .debug_line	0000000000000000 .debug_line
0000000000000000 l    d  .debug_line_str	0000000000000000 .debug_line_str
0000000000000000 l    d  .debug_info	0000000000000000 .debug_info
0000000000000000 l    d  .debug_abbrev	0000000000000000 .debug_abbrev
0000000000000000 l    d  .debug_aranges	0000000000000000 .debug_aranges
0000000000000000 l    d  .debug_str	0000000000000000 .debug_str
0000000000000000 l    d  .debug_frame	0000000000000000 .debug_frame
0000000000000000 l    d  .debug_rnglists	0000000000000000 .debug_rnglists
0000000000000000 l    df *ABS*	0000000000000000 cc0eVU7J.o
0000000000000000 l    df *ABS*	0000000000000000 ccSFiWfH.o
0000000000000000 l    df *ABS*	0000000000000000 crt1.c
0000000000000000 l    df *ABS*	0000000000000000 string.c
0000000000000000 l    df *ABS*	0000000000000000 string2.c
0000000000000000 l    df *ABS*	0000000000000000 stdio.c
00000000700022a0 l     O .data	0000000000000018 dev
000000007000070a l     F .text	00000000000000c2 print_unsigned
0000000000000000 l    df *ABS*	0000000000000000 dir.c
0000000000000000 l    df *ABS*	0000000000000000 blockpixel.c
000000007000117a l     F .text	000000000000003c idx
00000000700011b6 l     F .text	000000000000008a bp_render_pair
0000000000000000 l    df *ABS*	0000000000000000 window1.c
0000000000000000 l    df *ABS*	0000000000000000 window2.c
0000000000000000 l    df *ABS*	0000000000000000 putchar.c
00000000700022b8 l     O .data	0000000000000368 window
0000000070002620 l     O .data	0000000000000004 initialized
0000000070001eae l     F .text	000000000000004a init
0000000000000000 l    df *ABS*	0000000000000000 malloc.c
0000000070002628 l     O .data	0000000000000008 free_list
0000000070002630 l     O .data	0000000000000008 brk
0000000000000000 l    df *ABS*	0000000000000000 cat.c
0000000070001ef8 g     F .text	0000000000000036 putchar
000000007000014e g     F .text	000000000000004e strcpy
0000000070000b7a g     F .text	000000000000005a printf
0000000070000800 g       *ABS*	0000000000000000 __global_pointer$
0000000070002290 g     O .data	0000000000000008 stdout
000000007000174c g     F .text	0000000000000096 window_init
00000000700004bc g     F .text	00000000000000d8 memmove
0000000070000024 g       .text	0000000000000000 user_spawn
0000000070000d9c g     F .text	000000000000006c fgets
0000000070000594 g     F .text	0000000000000034 memcpy
000000007000101a g     F .text	00000000000000d4 dir_delete
0000000070001f2e g     F .text	0000000000000040 readline
000000007000002c g       .text	0000000000000000 user_put
0000000070000000 g       *ABS*	0000000000000000 flat_vaddr
0000000070000e08 g     F .text	000000000000001c feof
0000000070001f6e g     F .text	00000000000000e0 malloc
000000007000194e g     F .text	00000000000001ca window_putchar
000000007000004c g       .text	0000000000000000 user_write
0000000070000e24 g     F .text	0000000000000016 fflush
0000000000001000 g       *ABS*	0000000000000000 flat_file_off
0000000070000f1a g     F .text	0000000000000100 dir_create
0000000070002638 g       .data	0000000000000000 __bss_end
0000000070000054 g       .text	0000000000000000 user_size
0000000070000386 g     F .text	000000000000004a strnlen
0000000070000314 g     F .text	0000000000000072 strrchr
000000007000204e g     F .text	0000000000000056 calloc
0000000070001b18 g     F .text	0000000000000396 window_readline
0000000070000ab0 g     F .text	0000000000000054 fprintf
00000000700012e2 g     F .text	0000000000000258 bp_put
000000007000153a g     F .text	0000000000000212 bp_flush
0000000070000014 g       .text	0000000000000000 user_exit
0000000070001240 g     F .text	00000000000000a2 bp_init
0000000070000456 g     F .text	0000000000000066 memchr
0000000070002288 g     O .data	0000000000000008 stdin
0000000070000000 g       .text	0000000000000000 _start
000000007000026c g     F .text	00000000000000a8 strstr
000000007000218c g     F .text	000000000000008a read
0000000070000000 g       .text	0000000000000000 _image_start
000000007000019c g     F .text	0000000000000090 strncpy
00000000700020a4 g     F .text	00000000000000a2 realloc
00000000700017e2 g     F .text	000000000000008c window_sync
00000000700003d0 g     F .text	0000000000000086 memcmp
0000000070000bd4 g     F .text	00000000000000fe fopen
00000000700022a0 g       .data	0000000000000000 __bss_start
00000000700005c8 g     F .text	0000000000000054 memset
0000000070002216 g     F .text	000000000000005a main
0000000070000034 g       .text	0000000000000000 user_get
0000000070000e3a g     F .text	000000000000001e clearerr
0000000070000e58 g     F .text	000000000000002e fclose
00000000700000a6 g     F .text	00000000000000a8 strcmp
000000007000001c g       .text	0000000000000000 user_yield
0000000070000b04 g     F .text	0000000000000076 sprintf
0000000070002298 g     O .data	0000000000000008 stderr
000000007000006c g     F .text	000000000000003a _crt_init
0000000070000044 g       .text	0000000000000000 user_read
000000007000061c g     F .text	00000000000000a6 fputc
000000007000005c g       .text	0000000000000000 user_delete
000000007000003c g       .text	0000000000000000 user_create
0000000070002638 g       .data	0000000000000000 _image_end
0000000070000e86 g     F .text	0000000000000094 dir_lookup
000000007000186e g     F .text	00000000000000e0 window_scroll
0000000070000064 g       .text	0000000000000000 user_gettime
000000007000022c g     F .text	0000000000000040 strlen
00000000700010ee g     F .text	000000000000008c dir_list
00000000700006c2 g     F .text	0000000000000048 fputs
0000000000003282 g       *ABS*	0000000000000000 text_file_end
0000000070000cd2 g     F .text	00000000000000ca freadline
00000000700007cc g     F .text	00000000000002e4 vfprintf
0000000070002146 g     F .text	0000000000000046 free



Disassembly of section .text:

0000000070000000 <_image_start>:
_start():
/embryos/chapter12/apps/crt0.s:5
.globl _start
_start:
    .option push
    .option norelax
    la      gp, __global_pointer$
    70000000:	00001197          	auipc	gp,0x1
    70000004:	80018193          	addi	gp,gp,-2048 # 70000800 <__global_pointer$>
/embryos/chapter12/apps/crt0.s:8
    .option pop

    mv      a0, sp
    70000008:	850a                	mv	a0,sp
/embryos/chapter12/apps/crt0.s:9
    call    _crt_init
    7000000a:	00000097          	auipc	ra,0x0
    7000000e:	062080e7          	jalr	98(ra) # 7000006c <_crt_init>
	...

0000000070000014 <user_exit>:
user_exit():
/embryos/chapter12/apps/syslib.S:10
    .globl user_exit, user_yield, user_spawn, user_put, user_get
    .globl user_create, user_read, user_write, user_size, user_delete, user_gettime

    # void user_exit(void);
user_exit:
    li      a7, SYS_EXIT
    70000014:	4881                	li	a7,0
/embryos/chapter12/apps/syslib.S:11
    ecall
    70000016:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:12
    ret
    7000001a:	8082                	ret

000000007000001c <user_yield>:
user_yield():
/embryos/chapter12/apps/syslib.S:16

    # void user_yield(void);
user_yield:
    li      a7, SYS_YIELD
    7000001c:	4885                	li	a7,1
/embryos/chapter12/apps/syslib.S:17
    ecall
    7000001e:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:18
    ret
    70000022:	8082                	ret

0000000070000024 <user_spawn>:
user_spawn():
/embryos/chapter12/apps/syslib.S:23

    # void user_spawn(int app, int row, char col, int wd, int ht,
    #                 const void *args, int sz)
user_spawn:
    li      a7, SYS_SPAWN
    70000024:	4889                	li	a7,2
/embryos/chapter12/apps/syslib.S:24
    ecall
    70000026:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:25
    ret
    7000002a:	8082                	ret

000000007000002c <user_put>:
user_put():
/embryos/chapter12/apps/syslib.S:29

    # void user_put(int row, int col, cell_t cell)
user_put:
    li      a7, SYS_PUT
    7000002c:	4891                	li	a7,4
/embryos/chapter12/apps/syslib.S:30
    ecall
    7000002e:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:31
    ret
    70000032:	8082                	ret

0000000070000034 <user_get>:
user_get():
/embryos/chapter12/apps/syslib.S:35

    # int user_get(int block)
user_get:
    li      a7, SYS_GET
    70000034:	488d                	li	a7,3
/embryos/chapter12/apps/syslib.S:36
    ecall
    70000036:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:37
    ret
    7000003a:	8082                	ret

000000007000003c <user_create>:
user_create():
/embryos/chapter12/apps/syslib.S:41

    # int user_create(void)
user_create:
    li      a7, SYS_CREATE
    7000003c:	4895                	li	a7,5
/embryos/chapter12/apps/syslib.S:42
    ecall
    7000003e:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:43
    ret
    70000042:	8082                	ret

0000000070000044 <user_read>:
user_read():
/embryos/chapter12/apps/syslib.S:47

    # int user_read(int file, int off, void* dst, int n)
user_read:
    li      a7, SYS_READ
    70000044:	4899                	li	a7,6
/embryos/chapter12/apps/syslib.S:48
    ecall
    70000046:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:49
    ret
    7000004a:	8082                	ret

000000007000004c <user_write>:
user_write():
/embryos/chapter12/apps/syslib.S:53

    # int user_write(int file, int off, const void* src, int n)
user_write:
    li      a7, SYS_WRITE
    7000004c:	489d                	li	a7,7
/embryos/chapter12/apps/syslib.S:54
    ecall
    7000004e:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:55
    ret
    70000052:	8082                	ret

0000000070000054 <user_size>:
user_size():
/embryos/chapter12/apps/syslib.S:59

    # int user_size(int file)
user_size:
    li      a7, SYS_SIZE
    70000054:	48a1                	li	a7,8
/embryos/chapter12/apps/syslib.S:60
    ecall
    70000056:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:61
    ret
    7000005a:	8082                	ret

000000007000005c <user_delete>:
user_delete():
/embryos/chapter12/apps/syslib.S:65

    # void user_delete(int file)
user_delete:
    li      a7, SYS_DELETE
    7000005c:	48a5                	li	a7,9
/embryos/chapter12/apps/syslib.S:66
    ecall
    7000005e:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:67
    ret
    70000062:	8082                	ret

0000000070000064 <user_gettime>:
user_gettime():
/embryos/chapter12/apps/syslib.S:72


    # uint64_t user_gettime(void)
user_gettime:
    li      a7, SYS_GETTIME
    70000064:	48a9                	li	a7,10
/embryos/chapter12/apps/syslib.S:73
    ecall
    70000066:	00000073          	ecall
/embryos/chapter12/apps/syslib.S:74
    ret
    7000006a:	8082                	ret

000000007000006c <_crt_init>:
_crt_init():
/embryos/chapter12/apps/crt1.c:4
#include <stdint.h>
#include "syslib.h"

void _crt_init(char **argv) {
    7000006c:	1101                	addi	sp,sp,-32
    7000006e:	ec06                	sd	ra,24(sp)
    70000070:	e822                	sd	s0,16(sp)
    70000072:	1000                	addi	s0,sp,32
    70000074:	fea43423          	sd	a0,-24(s0)
/embryos/chapter12/apps/crt1.c:6
    extern int main(int argc, char **argv);
    (void) main((uintptr_t) argv[0], argv + 1);
    70000078:	fe843783          	ld	a5,-24(s0)
    7000007c:	639c                	ld	a5,0(a5)
    7000007e:	0007871b          	sext.w	a4,a5
    70000082:	fe843783          	ld	a5,-24(s0)
    70000086:	07a1                	addi	a5,a5,8
    70000088:	85be                	mv	a1,a5
    7000008a:	853a                	mv	a0,a4
    7000008c:	00002097          	auipc	ra,0x2
    70000090:	18a080e7          	jalr	394(ra) # 70002216 <main>
/embryos/chapter12/apps/crt1.c:7
    user_exit();
    70000094:	00000097          	auipc	ra,0x0
    70000098:	f80080e7          	jalr	-128(ra) # 70000014 <user_exit>
/embryos/chapter12/apps/crt1.c:8
}
    7000009c:	0001                	nop
    7000009e:	60e2                	ld	ra,24(sp)
    700000a0:	6442                	ld	s0,16(sp)
    700000a2:	6105                	addi	sp,sp,32
    700000a4:	8082                	ret

00000000700000a6 <strcmp>:
strcmp():
/embryos/chapter12/apps/../shared/string.c:3
#include "string.h"

int strcmp(const char *p, const char *q) {
    700000a6:	1101                	addi	sp,sp,-32
    700000a8:	ec06                	sd	ra,24(sp)
    700000aa:	e822                	sd	s0,16(sp)
    700000ac:	1000                	addi	s0,sp,32
    700000ae:	fea43423          	sd	a0,-24(s0)
    700000b2:	feb43023          	sd	a1,-32(s0)
/embryos/chapter12/apps/../shared/string.c:4
    while (*p != 0 && *q != 0 && *p == *q) { p++; q++; }
    700000b6:	a819                	j	700000cc <strcmp+0x26>
/embryos/chapter12/apps/../shared/string.c:4 (discriminator 4)
    700000b8:	fe843783          	ld	a5,-24(s0)
    700000bc:	0785                	addi	a5,a5,1
    700000be:	fef43423          	sd	a5,-24(s0)
    700000c2:	fe043783          	ld	a5,-32(s0)
    700000c6:	0785                	addi	a5,a5,1
    700000c8:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/../shared/string.c:4 (discriminator 1)
    700000cc:	fe843783          	ld	a5,-24(s0)
    700000d0:	0007c783          	lbu	a5,0(a5)
    700000d4:	c385                	beqz	a5,700000f4 <strcmp+0x4e>
/embryos/chapter12/apps/../shared/string.c:4 (discriminator 2)
    700000d6:	fe043783          	ld	a5,-32(s0)
    700000da:	0007c783          	lbu	a5,0(a5)
    700000de:	cb99                	beqz	a5,700000f4 <strcmp+0x4e>
/embryos/chapter12/apps/../shared/string.c:4 (discriminator 3)
    700000e0:	fe843783          	ld	a5,-24(s0)
    700000e4:	0007c703          	lbu	a4,0(a5)
    700000e8:	fe043783          	ld	a5,-32(s0)
    700000ec:	0007c783          	lbu	a5,0(a5)
    700000f0:	fcf704e3          	beq	a4,a5,700000b8 <strcmp+0x12>
/embryos/chapter12/apps/../shared/string.c:5
    if (*p == *q) return 0;
    700000f4:	fe843783          	ld	a5,-24(s0)
    700000f8:	0007c703          	lbu	a4,0(a5)
    700000fc:	fe043783          	ld	a5,-32(s0)
    70000100:	0007c783          	lbu	a5,0(a5)
    70000104:	00f71463          	bne	a4,a5,7000010c <strcmp+0x66>
/embryos/chapter12/apps/../shared/string.c:5 (discriminator 1)
    70000108:	4781                	li	a5,0
/embryos/chapter12/apps/../shared/string.c:5
    7000010a:	a82d                	j	70000144 <strcmp+0x9e>
/embryos/chapter12/apps/../shared/string.c:6
    if (*p == 0)  return -1;
    7000010c:	fe843783          	ld	a5,-24(s0)
    70000110:	0007c783          	lbu	a5,0(a5)
    70000114:	e399                	bnez	a5,7000011a <strcmp+0x74>
/embryos/chapter12/apps/../shared/string.c:6 (discriminator 1)
    70000116:	57fd                	li	a5,-1
/embryos/chapter12/apps/../shared/string.c:6
    70000118:	a035                	j	70000144 <strcmp+0x9e>
/embryos/chapter12/apps/../shared/string.c:7
    if (*q == 0)  return 1;
    7000011a:	fe043783          	ld	a5,-32(s0)
    7000011e:	0007c783          	lbu	a5,0(a5)
    70000122:	e399                	bnez	a5,70000128 <strcmp+0x82>
/embryos/chapter12/apps/../shared/string.c:7 (discriminator 1)
    70000124:	4785                	li	a5,1
/embryos/chapter12/apps/../shared/string.c:7
    70000126:	a839                	j	70000144 <strcmp+0x9e>
/embryos/chapter12/apps/../shared/string.c:8
    return *p - *q;
    70000128:	fe843783          	ld	a5,-24(s0)
    7000012c:	0007c783          	lbu	a5,0(a5)
    70000130:	0007871b          	sext.w	a4,a5
    70000134:	fe043783          	ld	a5,-32(s0)
    70000138:	0007c783          	lbu	a5,0(a5)
    7000013c:	2781                	sext.w	a5,a5
    7000013e:	40f707bb          	subw	a5,a4,a5
    70000142:	2781                	sext.w	a5,a5
/embryos/chapter12/apps/../shared/string.c:9
}
    70000144:	853e                	mv	a0,a5
    70000146:	60e2                	ld	ra,24(sp)
    70000148:	6442                	ld	s0,16(sp)
    7000014a:	6105                	addi	sp,sp,32
    7000014c:	8082                	ret

000000007000014e <strcpy>:
strcpy():
/embryos/chapter12/apps/../shared/string.c:11

char *strcpy(char *dst, const char *src) {
    7000014e:	7179                	addi	sp,sp,-48
    70000150:	f406                	sd	ra,40(sp)
    70000152:	f022                	sd	s0,32(sp)
    70000154:	1800                	addi	s0,sp,48
    70000156:	fca43c23          	sd	a0,-40(s0)
    7000015a:	fcb43823          	sd	a1,-48(s0)
/embryos/chapter12/apps/../shared/string.c:12
    char *ret = dst;
    7000015e:	fd843783          	ld	a5,-40(s0)
    70000162:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:13
    while ((*dst++ = *src++) != '\0') ;
    70000166:	0001                	nop
/embryos/chapter12/apps/../shared/string.c:13 (discriminator 1)
    70000168:	fd043703          	ld	a4,-48(s0)
    7000016c:	00170793          	addi	a5,a4,1
    70000170:	fcf43823          	sd	a5,-48(s0)
    70000174:	fd843783          	ld	a5,-40(s0)
    70000178:	00178693          	addi	a3,a5,1
    7000017c:	fcd43c23          	sd	a3,-40(s0)
    70000180:	00074703          	lbu	a4,0(a4)
    70000184:	00e78023          	sb	a4,0(a5)
    70000188:	0007c783          	lbu	a5,0(a5)
    7000018c:	fff1                	bnez	a5,70000168 <strcpy+0x1a>
/embryos/chapter12/apps/../shared/string.c:14
    return ret;
    7000018e:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:15
}
    70000192:	853e                	mv	a0,a5
    70000194:	70a2                	ld	ra,40(sp)
    70000196:	7402                	ld	s0,32(sp)
    70000198:	6145                	addi	sp,sp,48
    7000019a:	8082                	ret

000000007000019c <strncpy>:
strncpy():
/embryos/chapter12/apps/../shared/string.c:17

char *strncpy(char *dst, const char *src, size_t n) {
    7000019c:	7139                	addi	sp,sp,-64
    7000019e:	fc06                	sd	ra,56(sp)
    700001a0:	f822                	sd	s0,48(sp)
    700001a2:	0080                	addi	s0,sp,64
    700001a4:	fca43c23          	sd	a0,-40(s0)
    700001a8:	fcb43823          	sd	a1,-48(s0)
    700001ac:	fcc43423          	sd	a2,-56(s0)
/embryos/chapter12/apps/../shared/string.c:18
    size_t i = 0;
    700001b0:	fe043423          	sd	zero,-24(s0)
/embryos/chapter12/apps/../shared/string.c:19
    for (; i < n && src[i] != '\0'; i++) dst[i] = src[i];
    700001b4:	a025                	j	700001dc <strncpy+0x40>
/embryos/chapter12/apps/../shared/string.c:19 (discriminator 3)
    700001b6:	fd043703          	ld	a4,-48(s0)
    700001ba:	fe843783          	ld	a5,-24(s0)
    700001be:	973e                	add	a4,a4,a5
    700001c0:	fd843683          	ld	a3,-40(s0)
    700001c4:	fe843783          	ld	a5,-24(s0)
    700001c8:	97b6                	add	a5,a5,a3
    700001ca:	00074703          	lbu	a4,0(a4)
    700001ce:	00e78023          	sb	a4,0(a5)
    700001d2:	fe843783          	ld	a5,-24(s0)
    700001d6:	0785                	addi	a5,a5,1
    700001d8:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:19 (discriminator 1)
    700001dc:	fe843703          	ld	a4,-24(s0)
    700001e0:	fc843783          	ld	a5,-56(s0)
    700001e4:	02f77763          	bgeu	a4,a5,70000212 <strncpy+0x76>
/embryos/chapter12/apps/../shared/string.c:19 (discriminator 2)
    700001e8:	fd043703          	ld	a4,-48(s0)
    700001ec:	fe843783          	ld	a5,-24(s0)
    700001f0:	97ba                	add	a5,a5,a4
    700001f2:	0007c783          	lbu	a5,0(a5)
    700001f6:	f3e1                	bnez	a5,700001b6 <strncpy+0x1a>
/embryos/chapter12/apps/../shared/string.c:20
    for (; i < n; i++) dst[i] = '\0';
    700001f8:	a829                	j	70000212 <strncpy+0x76>
/embryos/chapter12/apps/../shared/string.c:20 (discriminator 2)
    700001fa:	fd843703          	ld	a4,-40(s0)
    700001fe:	fe843783          	ld	a5,-24(s0)
    70000202:	97ba                	add	a5,a5,a4
    70000204:	00078023          	sb	zero,0(a5)
    70000208:	fe843783          	ld	a5,-24(s0)
    7000020c:	0785                	addi	a5,a5,1
    7000020e:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:20 (discriminator 1)
    70000212:	fe843703          	ld	a4,-24(s0)
    70000216:	fc843783          	ld	a5,-56(s0)
    7000021a:	fef760e3          	bltu	a4,a5,700001fa <strncpy+0x5e>
/embryos/chapter12/apps/../shared/string.c:21
    return dst;
    7000021e:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/../shared/string.c:22
}
    70000222:	853e                	mv	a0,a5
    70000224:	70e2                	ld	ra,56(sp)
    70000226:	7442                	ld	s0,48(sp)
    70000228:	6121                	addi	sp,sp,64
    7000022a:	8082                	ret

000000007000022c <strlen>:
strlen():
/embryos/chapter12/apps/../shared/string.c:24

size_t strlen(const char *s) {
    7000022c:	7179                	addi	sp,sp,-48
    7000022e:	f406                	sd	ra,40(sp)
    70000230:	f022                	sd	s0,32(sp)
    70000232:	1800                	addi	s0,sp,48
    70000234:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/../shared/string.c:25
    const char *p = s;
    70000238:	fd843783          	ld	a5,-40(s0)
    7000023c:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:26
    while (*p) p++;
    70000240:	a031                	j	7000024c <strlen+0x20>
/embryos/chapter12/apps/../shared/string.c:26 (discriminator 2)
    70000242:	fe843783          	ld	a5,-24(s0)
    70000246:	0785                	addi	a5,a5,1
    70000248:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:26 (discriminator 1)
    7000024c:	fe843783          	ld	a5,-24(s0)
    70000250:	0007c783          	lbu	a5,0(a5)
    70000254:	f7fd                	bnez	a5,70000242 <strlen+0x16>
/embryos/chapter12/apps/../shared/string.c:27
    return (size_t) (p - s);
    70000256:	fe843703          	ld	a4,-24(s0)
    7000025a:	fd843783          	ld	a5,-40(s0)
    7000025e:	40f707b3          	sub	a5,a4,a5
/embryos/chapter12/apps/../shared/string.c:28
}
    70000262:	853e                	mv	a0,a5
    70000264:	70a2                	ld	ra,40(sp)
    70000266:	7402                	ld	s0,32(sp)
    70000268:	6145                	addi	sp,sp,48
    7000026a:	8082                	ret

000000007000026c <strstr>:
strstr():
/embryos/chapter12/apps/../shared/string.c:30

char *strstr(const char *haystack, const char *needle) {
    7000026c:	7139                	addi	sp,sp,-64
    7000026e:	fc06                	sd	ra,56(sp)
    70000270:	f822                	sd	s0,48(sp)
    70000272:	0080                	addi	s0,sp,64
    70000274:	fca43423          	sd	a0,-56(s0)
    70000278:	fcb43023          	sd	a1,-64(s0)
/embryos/chapter12/apps/../shared/string.c:31
    if (*needle == 0) return (char *) haystack;
    7000027c:	fc043783          	ld	a5,-64(s0)
    70000280:	0007c783          	lbu	a5,0(a5)
    70000284:	e781                	bnez	a5,7000028c <strstr+0x20>
/embryos/chapter12/apps/../shared/string.c:31 (discriminator 1)
    70000286:	fc843783          	ld	a5,-56(s0)
/embryos/chapter12/apps/../shared/string.c:31
    7000028a:	a041                	j	7000030a <strstr+0x9e>
/embryos/chapter12/apps/../shared/string.c:32
    for (const char *h = haystack; *h; h++) {
    7000028c:	fc843783          	ld	a5,-56(s0)
    70000290:	fef43423          	sd	a5,-24(s0)
    70000294:	a0ad                	j	700002fe <strstr+0x92>
/embryos/chapter12/apps/../shared/string.c:33
        const char *h2 = h, *n2 = needle;
    70000296:	fe843783          	ld	a5,-24(s0)
    7000029a:	fef43023          	sd	a5,-32(s0)
    7000029e:	fc043783          	ld	a5,-64(s0)
    700002a2:	fcf43c23          	sd	a5,-40(s0)
/embryos/chapter12/apps/../shared/string.c:34
        while (*h2 && *n2 && *h2 == *n2) { h2++; n2++; }
    700002a6:	a819                	j	700002bc <strstr+0x50>
/embryos/chapter12/apps/../shared/string.c:34 (discriminator 4)
    700002a8:	fe043783          	ld	a5,-32(s0)
    700002ac:	0785                	addi	a5,a5,1
    700002ae:	fef43023          	sd	a5,-32(s0)
    700002b2:	fd843783          	ld	a5,-40(s0)
    700002b6:	0785                	addi	a5,a5,1
    700002b8:	fcf43c23          	sd	a5,-40(s0)
/embryos/chapter12/apps/../shared/string.c:34 (discriminator 1)
    700002bc:	fe043783          	ld	a5,-32(s0)
    700002c0:	0007c783          	lbu	a5,0(a5)
    700002c4:	c385                	beqz	a5,700002e4 <strstr+0x78>
/embryos/chapter12/apps/../shared/string.c:34 (discriminator 2)
    700002c6:	fd843783          	ld	a5,-40(s0)
    700002ca:	0007c783          	lbu	a5,0(a5)
    700002ce:	cb99                	beqz	a5,700002e4 <strstr+0x78>
/embryos/chapter12/apps/../shared/string.c:34 (discriminator 3)
    700002d0:	fe043783          	ld	a5,-32(s0)
    700002d4:	0007c703          	lbu	a4,0(a5)
    700002d8:	fd843783          	ld	a5,-40(s0)
    700002dc:	0007c783          	lbu	a5,0(a5)
    700002e0:	fcf704e3          	beq	a4,a5,700002a8 <strstr+0x3c>
/embryos/chapter12/apps/../shared/string.c:35
        if (!*n2) return (char *) h;
    700002e4:	fd843783          	ld	a5,-40(s0)
    700002e8:	0007c783          	lbu	a5,0(a5)
    700002ec:	e781                	bnez	a5,700002f4 <strstr+0x88>
/embryos/chapter12/apps/../shared/string.c:35 (discriminator 1)
    700002ee:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:35
    700002f2:	a821                	j	7000030a <strstr+0x9e>
/embryos/chapter12/apps/../shared/string.c:32 (discriminator 2)
    for (const char *h = haystack; *h; h++) {
    700002f4:	fe843783          	ld	a5,-24(s0)
    700002f8:	0785                	addi	a5,a5,1
    700002fa:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:32 (discriminator 1)
    700002fe:	fe843783          	ld	a5,-24(s0)
    70000302:	0007c783          	lbu	a5,0(a5)
    70000306:	fbc1                	bnez	a5,70000296 <strstr+0x2a>
/embryos/chapter12/apps/../shared/string.c:37
    }
    return 0;
    70000308:	4781                	li	a5,0
/embryos/chapter12/apps/../shared/string.c:38
}
    7000030a:	853e                	mv	a0,a5
    7000030c:	70e2                	ld	ra,56(sp)
    7000030e:	7442                	ld	s0,48(sp)
    70000310:	6121                	addi	sp,sp,64
    70000312:	8082                	ret

0000000070000314 <strrchr>:
strrchr():
/embryos/chapter12/apps/../shared/string.c:40

char *strrchr(const char *s, int c) {
    70000314:	7179                	addi	sp,sp,-48
    70000316:	f406                	sd	ra,40(sp)
    70000318:	f022                	sd	s0,32(sp)
    7000031a:	1800                	addi	s0,sp,48
    7000031c:	fca43c23          	sd	a0,-40(s0)
    70000320:	87ae                	mv	a5,a1
    70000322:	fcf42a23          	sw	a5,-44(s0)
/embryos/chapter12/apps/../shared/string.c:41
    const char *last = 0;
    70000326:	fe043423          	sd	zero,-24(s0)
/embryos/chapter12/apps/../shared/string.c:43
    char ch;
    while ((ch = *s++) != 0)
    7000032a:	a005                	j	7000034a <strrchr+0x36>
/embryos/chapter12/apps/../shared/string.c:44
        if (ch == (char) c) last = s - 1;
    7000032c:	fd442783          	lw	a5,-44(s0)
    70000330:	0ff7f713          	zext.b	a4,a5
    70000334:	fe744783          	lbu	a5,-25(s0)
    70000338:	0ff7f793          	zext.b	a5,a5
    7000033c:	00e79763          	bne	a5,a4,7000034a <strrchr+0x36>
/embryos/chapter12/apps/../shared/string.c:44 (discriminator 1)
    70000340:	fd843783          	ld	a5,-40(s0)
    70000344:	17fd                	addi	a5,a5,-1
    70000346:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:43
    while ((ch = *s++) != 0)
    7000034a:	fd843783          	ld	a5,-40(s0)
    7000034e:	00178713          	addi	a4,a5,1
    70000352:	fce43c23          	sd	a4,-40(s0)
    70000356:	0007c783          	lbu	a5,0(a5)
    7000035a:	fef403a3          	sb	a5,-25(s0)
    7000035e:	fe744783          	lbu	a5,-25(s0)
    70000362:	0ff7f793          	zext.b	a5,a5
    70000366:	f3f9                	bnez	a5,7000032c <strrchr+0x18>
/embryos/chapter12/apps/../shared/string.c:45
    return (char *)((c == 0) ? s - 1 : last);
    70000368:	fd442783          	lw	a5,-44(s0)
    7000036c:	2781                	sext.w	a5,a5
    7000036e:	e789                	bnez	a5,70000378 <strrchr+0x64>
/embryos/chapter12/apps/../shared/string.c:45 (discriminator 1)
    70000370:	fd843783          	ld	a5,-40(s0)
    70000374:	17fd                	addi	a5,a5,-1
/embryos/chapter12/apps/../shared/string.c:45
    70000376:	a019                	j	7000037c <strrchr+0x68>
/embryos/chapter12/apps/../shared/string.c:45 (discriminator 2)
    70000378:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:46
}
    7000037c:	853e                	mv	a0,a5
    7000037e:	70a2                	ld	ra,40(sp)
    70000380:	7402                	ld	s0,32(sp)
    70000382:	6145                	addi	sp,sp,48
    70000384:	8082                	ret

0000000070000386 <strnlen>:
strnlen():
/embryos/chapter12/apps/../shared/string.c:48

size_t strnlen(const char *s, size_t maxlen) {
    70000386:	7179                	addi	sp,sp,-48
    70000388:	f406                	sd	ra,40(sp)
    7000038a:	f022                	sd	s0,32(sp)
    7000038c:	1800                	addi	s0,sp,48
    7000038e:	fca43c23          	sd	a0,-40(s0)
    70000392:	fcb43823          	sd	a1,-48(s0)
/embryos/chapter12/apps/../shared/string.c:49
    size_t len = 0;
    70000396:	fe043423          	sd	zero,-24(s0)
/embryos/chapter12/apps/../shared/string.c:50
    while (len < maxlen && s[len] != '\0') len++;
    7000039a:	a031                	j	700003a6 <strnlen+0x20>
/embryos/chapter12/apps/../shared/string.c:50 (discriminator 3)
    7000039c:	fe843783          	ld	a5,-24(s0)
    700003a0:	0785                	addi	a5,a5,1
    700003a2:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:50 (discriminator 1)
    700003a6:	fe843703          	ld	a4,-24(s0)
    700003aa:	fd043783          	ld	a5,-48(s0)
    700003ae:	00f77a63          	bgeu	a4,a5,700003c2 <strnlen+0x3c>
/embryos/chapter12/apps/../shared/string.c:50 (discriminator 2)
    700003b2:	fd843703          	ld	a4,-40(s0)
    700003b6:	fe843783          	ld	a5,-24(s0)
    700003ba:	97ba                	add	a5,a5,a4
    700003bc:	0007c783          	lbu	a5,0(a5)
    700003c0:	fff1                	bnez	a5,7000039c <strnlen+0x16>
/embryos/chapter12/apps/../shared/string.c:51
    return len;
    700003c2:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/../shared/string.c:52
}
    700003c6:	853e                	mv	a0,a5
    700003c8:	70a2                	ld	ra,40(sp)
    700003ca:	7402                	ld	s0,32(sp)
    700003cc:	6145                	addi	sp,sp,48
    700003ce:	8082                	ret

00000000700003d0 <memcmp>:
memcmp():
/embryos/chapter12/apps/../shared/string2.c:3
#include "string.h"

int memcmp(const void *s1, const void *s2, size_t n) {
    700003d0:	7139                	addi	sp,sp,-64
    700003d2:	fc06                	sd	ra,56(sp)
    700003d4:	f822                	sd	s0,48(sp)
    700003d6:	0080                	addi	s0,sp,64
    700003d8:	fca43c23          	sd	a0,-40(s0)
    700003dc:	fcb43823          	sd	a1,-48(s0)
    700003e0:	fcc43423          	sd	a2,-56(s0)
/embryos/chapter12/apps/../shared/string2.c:4
    const unsigned char *p1 = s1, *p2 = s2;
    700003e4:	fd843783          	ld	a5,-40(s0)
    700003e8:	fef43423          	sd	a5,-24(s0)
    700003ec:	fd043783          	ld	a5,-48(s0)
    700003f0:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/../shared/string2.c:5
    for (; n--; p1++, p2++)
    700003f4:	a0a1                	j	7000043c <memcmp+0x6c>
/embryos/chapter12/apps/../shared/string2.c:6
        if (*p1 != *p2) return *p1 - *p2;
    700003f6:	fe843783          	ld	a5,-24(s0)
    700003fa:	0007c703          	lbu	a4,0(a5)
    700003fe:	fe043783          	ld	a5,-32(s0)
    70000402:	0007c783          	lbu	a5,0(a5)
    70000406:	02f70163          	beq	a4,a5,70000428 <memcmp+0x58>
/embryos/chapter12/apps/../shared/string2.c:6 (discriminator 1)
    7000040a:	fe843783          	ld	a5,-24(s0)
    7000040e:	0007c783          	lbu	a5,0(a5)
    70000412:	0007871b          	sext.w	a4,a5
    70000416:	fe043783          	ld	a5,-32(s0)
    7000041a:	0007c783          	lbu	a5,0(a5)
    7000041e:	2781                	sext.w	a5,a5
    70000420:	40f707bb          	subw	a5,a4,a5
    70000424:	2781                	sext.w	a5,a5
/embryos/chapter12/apps/../shared/string2.c:6
    70000426:	a01d                	j	7000044c <memcmp+0x7c>
/embryos/chapter12/apps/../shared/string2.c:5
    for (; n--; p1++, p2++)
    70000428:	fe843783          	ld	a5,-24(s0)
    7000042c:	0785                	addi	a5,a5,1
    7000042e:	fef43423          	sd	a5,-24(s0)
    70000432:	fe043783          	ld	a5,-32(s0)
    70000436:	0785                	addi	a5,a5,1
    70000438:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/../shared/string2.c:5 (discriminator 1)
    7000043c:	fc843783          	ld	a5,-56(s0)
    70000440:	fff78713          	addi	a4,a5,-1
    70000444:	fce43423          	sd	a4,-56(s0)
    70000448:	f7dd                	bnez	a5,700003f6 <memcmp+0x26>
/embryos/chapter12/apps/../shared/string2.c:7
    return 0;
    7000044a:	4781                	li	a5,0
/embryos/chapter12/apps/../shared/string2.c:8
}
    7000044c:	853e                	mv	a0,a5
    7000044e:	70e2                	ld	ra,56(sp)
    70000450:	7442                	ld	s0,48(sp)
    70000452:	6121                	addi	sp,sp,64
    70000454:	8082                	ret

0000000070000456 <memchr>:
memchr():
/embryos/chapter12/apps/../shared/string2.c:10

void *memchr(const void *s, int c, size_t n) {
    70000456:	7139                	addi	sp,sp,-64
    70000458:	fc06                	sd	ra,56(sp)
    7000045a:	f822                	sd	s0,48(sp)
    7000045c:	0080                	addi	s0,sp,64
    7000045e:	fca43c23          	sd	a0,-40(s0)
    70000462:	87ae                	mv	a5,a1
    70000464:	fcc43423          	sd	a2,-56(s0)
    70000468:	fcf42a23          	sw	a5,-44(s0)
/embryos/chapter12/apps/../shared/string2.c:11
    const unsigned char *p = s;
    7000046c:	fd843783          	ld	a5,-40(s0)
    70000470:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string2.c:12
    unsigned char uc = (unsigned char) c;
    70000474:	fd442783          	lw	a5,-44(s0)
    70000478:	fef403a3          	sb	a5,-25(s0)
/embryos/chapter12/apps/../shared/string2.c:13
    for (; n--; p++)
    7000047c:	a01d                	j	700004a2 <memchr+0x4c>
/embryos/chapter12/apps/../shared/string2.c:14
        if (*p == uc) return (void *) p;
    7000047e:	fe843783          	ld	a5,-24(s0)
    70000482:	0007c703          	lbu	a4,0(a5)
    70000486:	fe744783          	lbu	a5,-25(s0)
    7000048a:	0ff7f793          	zext.b	a5,a5
    7000048e:	00e79563          	bne	a5,a4,70000498 <memchr+0x42>
/embryos/chapter12/apps/../shared/string2.c:14 (discriminator 1)
    70000492:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/../shared/string2.c:14
    70000496:	a831                	j	700004b2 <memchr+0x5c>
/embryos/chapter12/apps/../shared/string2.c:13
    for (; n--; p++)
    70000498:	fe843783          	ld	a5,-24(s0)
    7000049c:	0785                	addi	a5,a5,1
    7000049e:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string2.c:13 (discriminator 1)
    700004a2:	fc843783          	ld	a5,-56(s0)
    700004a6:	fff78713          	addi	a4,a5,-1
    700004aa:	fce43423          	sd	a4,-56(s0)
    700004ae:	fbe1                	bnez	a5,7000047e <memchr+0x28>
/embryos/chapter12/apps/../shared/string2.c:15
    return 0;
    700004b0:	4781                	li	a5,0
/embryos/chapter12/apps/../shared/string2.c:16
}
    700004b2:	853e                	mv	a0,a5
    700004b4:	70e2                	ld	ra,56(sp)
    700004b6:	7442                	ld	s0,48(sp)
    700004b8:	6121                	addi	sp,sp,64
    700004ba:	8082                	ret

00000000700004bc <memmove>:
memmove():
/embryos/chapter12/apps/../shared/string2.c:18

void *memmove(void *dst, const void *src, size_t n) {
    700004bc:	7139                	addi	sp,sp,-64
    700004be:	fc06                	sd	ra,56(sp)
    700004c0:	f822                	sd	s0,48(sp)
    700004c2:	0080                	addi	s0,sp,64
    700004c4:	fca43c23          	sd	a0,-40(s0)
    700004c8:	fcb43823          	sd	a1,-48(s0)
    700004cc:	fcc43423          	sd	a2,-56(s0)
/embryos/chapter12/apps/../shared/string2.c:19
    unsigned char *d = dst;
    700004d0:	fd843783          	ld	a5,-40(s0)
    700004d4:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string2.c:20
    const unsigned char *s = src;
    700004d8:	fd043783          	ld	a5,-48(s0)
    700004dc:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/../shared/string2.c:21
    if (d == s || n == 0) return dst;
    700004e0:	fe843703          	ld	a4,-24(s0)
    700004e4:	fe043783          	ld	a5,-32(s0)
    700004e8:	00f70563          	beq	a4,a5,700004f2 <memmove+0x36>
/embryos/chapter12/apps/../shared/string2.c:21 (discriminator 2)
    700004ec:	fc843783          	ld	a5,-56(s0)
    700004f0:	e781                	bnez	a5,700004f8 <memmove+0x3c>
/embryos/chapter12/apps/../shared/string2.c:21 (discriminator 3)
    700004f2:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/../shared/string2.c:21
    700004f6:	a851                	j	7000058a <memmove+0xce>
/embryos/chapter12/apps/../shared/string2.c:22
    if (d < s)
    700004f8:	fe843703          	ld	a4,-24(s0)
    700004fc:	fe043783          	ld	a5,-32(s0)
    70000500:	02f77b63          	bgeu	a4,a5,70000536 <memmove+0x7a>
/embryos/chapter12/apps/../shared/string2.c:23
        while (n--) *d++ = *s++;
    70000504:	a00d                	j	70000526 <memmove+0x6a>
/embryos/chapter12/apps/../shared/string2.c:23 (discriminator 2)
    70000506:	fe043703          	ld	a4,-32(s0)
    7000050a:	00170793          	addi	a5,a4,1
    7000050e:	fef43023          	sd	a5,-32(s0)
    70000512:	fe843783          	ld	a5,-24(s0)
    70000516:	00178693          	addi	a3,a5,1
    7000051a:	fed43423          	sd	a3,-24(s0)
    7000051e:	00074703          	lbu	a4,0(a4)
    70000522:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/../shared/string2.c:23 (discriminator 1)
    70000526:	fc843783          	ld	a5,-56(s0)
    7000052a:	fff78713          	addi	a4,a5,-1
    7000052e:	fce43423          	sd	a4,-56(s0)
    70000532:	fbf1                	bnez	a5,70000506 <memmove+0x4a>
    70000534:	a889                	j	70000586 <memmove+0xca>
/embryos/chapter12/apps/../shared/string2.c:25
    else {
        d += n; s += n;
    70000536:	fe843703          	ld	a4,-24(s0)
    7000053a:	fc843783          	ld	a5,-56(s0)
    7000053e:	97ba                	add	a5,a5,a4
    70000540:	fef43423          	sd	a5,-24(s0)
    70000544:	fe043703          	ld	a4,-32(s0)
    70000548:	fc843783          	ld	a5,-56(s0)
    7000054c:	97ba                	add	a5,a5,a4
    7000054e:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/../shared/string2.c:26
        while (n--) *--d = *--s;
    70000552:	a01d                	j	70000578 <memmove+0xbc>
/embryos/chapter12/apps/../shared/string2.c:26 (discriminator 2)
    70000554:	fe043783          	ld	a5,-32(s0)
    70000558:	17fd                	addi	a5,a5,-1
    7000055a:	fef43023          	sd	a5,-32(s0)
    7000055e:	fe843783          	ld	a5,-24(s0)
    70000562:	17fd                	addi	a5,a5,-1
    70000564:	fef43423          	sd	a5,-24(s0)
    70000568:	fe043783          	ld	a5,-32(s0)
    7000056c:	0007c703          	lbu	a4,0(a5)
    70000570:	fe843783          	ld	a5,-24(s0)
    70000574:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/../shared/string2.c:26 (discriminator 1)
    70000578:	fc843783          	ld	a5,-56(s0)
    7000057c:	fff78713          	addi	a4,a5,-1
    70000580:	fce43423          	sd	a4,-56(s0)
    70000584:	fbe1                	bnez	a5,70000554 <memmove+0x98>
/embryos/chapter12/apps/../shared/string2.c:28
    }
    return dst;
    70000586:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/../shared/string2.c:29
}
    7000058a:	853e                	mv	a0,a5
    7000058c:	70e2                	ld	ra,56(sp)
    7000058e:	7442                	ld	s0,48(sp)
    70000590:	6121                	addi	sp,sp,64
    70000592:	8082                	ret

0000000070000594 <memcpy>:
memcpy():
/embryos/chapter12/apps/../shared/string2.c:31

void *memcpy(void *dst, const void *src, size_t n) {
    70000594:	7179                	addi	sp,sp,-48
    70000596:	f406                	sd	ra,40(sp)
    70000598:	f022                	sd	s0,32(sp)
    7000059a:	1800                	addi	s0,sp,48
    7000059c:	fea43423          	sd	a0,-24(s0)
    700005a0:	feb43023          	sd	a1,-32(s0)
    700005a4:	fcc43c23          	sd	a2,-40(s0)
/embryos/chapter12/apps/../shared/string2.c:32
    return memmove(dst, src, n);
    700005a8:	fd843603          	ld	a2,-40(s0)
    700005ac:	fe043583          	ld	a1,-32(s0)
    700005b0:	fe843503          	ld	a0,-24(s0)
    700005b4:	00000097          	auipc	ra,0x0
    700005b8:	f08080e7          	jalr	-248(ra) # 700004bc <memmove>
    700005bc:	87aa                	mv	a5,a0
/embryos/chapter12/apps/../shared/string2.c:33
}
    700005be:	853e                	mv	a0,a5
    700005c0:	70a2                	ld	ra,40(sp)
    700005c2:	7402                	ld	s0,32(sp)
    700005c4:	6145                	addi	sp,sp,48
    700005c6:	8082                	ret

00000000700005c8 <memset>:
memset():
/embryos/chapter12/apps/../shared/string2.c:35

void *memset(void *dst, int c, size_t n) {
    700005c8:	7139                	addi	sp,sp,-64
    700005ca:	fc06                	sd	ra,56(sp)
    700005cc:	f822                	sd	s0,48(sp)
    700005ce:	0080                	addi	s0,sp,64
    700005d0:	fca43c23          	sd	a0,-40(s0)
    700005d4:	87ae                	mv	a5,a1
    700005d6:	fcc43423          	sd	a2,-56(s0)
    700005da:	fcf42a23          	sw	a5,-44(s0)
/embryos/chapter12/apps/../shared/string2.c:36
    unsigned char *d = dst;
    700005de:	fd843783          	ld	a5,-40(s0)
    700005e2:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/../shared/string2.c:37
    while (n--) *d++ = c;
    700005e6:	a829                	j	70000600 <memset+0x38>
/embryos/chapter12/apps/../shared/string2.c:37 (discriminator 2)
    700005e8:	fe843783          	ld	a5,-24(s0)
    700005ec:	00178713          	addi	a4,a5,1
    700005f0:	fee43423          	sd	a4,-24(s0)
    700005f4:	fd442703          	lw	a4,-44(s0)
    700005f8:	0ff77713          	zext.b	a4,a4
    700005fc:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/../shared/string2.c:37 (discriminator 1)
    70000600:	fc843783          	ld	a5,-56(s0)
    70000604:	fff78713          	addi	a4,a5,-1
    70000608:	fce43423          	sd	a4,-56(s0)
    7000060c:	fff1                	bnez	a5,700005e8 <memset+0x20>
/embryos/chapter12/apps/../shared/string2.c:38
    return dst;
    7000060e:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/../shared/string2.c:39
}
    70000612:	853e                	mv	a0,a5
    70000614:	70e2                	ld	ra,56(sp)
    70000616:	7442                	ld	s0,48(sp)
    70000618:	6121                	addi	sp,sp,64
    7000061a:	8082                	ret

000000007000061c <fputc>:
fputc():
/embryos/chapter12/apps/stdio.c:11
#include "malloc.h"

static FILE dev = { .type = STDIO_DEV };
FILE *stdin = &dev, *stdout = &dev, *stderr = &dev;

int fputc(int c, FILE *file) {
    7000061c:	7179                	addi	sp,sp,-48
    7000061e:	f406                	sd	ra,40(sp)
    70000620:	f022                	sd	s0,32(sp)
    70000622:	1800                	addi	s0,sp,48
    70000624:	87aa                	mv	a5,a0
    70000626:	fcb43823          	sd	a1,-48(s0)
    7000062a:	fcf42e23          	sw	a5,-36(s0)
/embryos/chapter12/apps/stdio.c:12
    char ch = c;
    7000062e:	fdc42783          	lw	a5,-36(s0)
    70000632:	0ff7f793          	zext.b	a5,a5
    70000636:	fef407a3          	sb	a5,-17(s0)
/embryos/chapter12/apps/stdio.c:13
    switch (file->type) {
    7000063a:	fd043783          	ld	a5,-48(s0)
    7000063e:	439c                	lw	a5,0(a5)
    70000640:	4709                	li	a4,2
    70000642:	04e78363          	beq	a5,a4,70000688 <fputc+0x6c>
    70000646:	4709                	li	a4,2
    70000648:	04f76e63          	bltu	a4,a5,700006a4 <fputc+0x88>
    7000064c:	c789                	beqz	a5,70000656 <fputc+0x3a>
    7000064e:	4705                	li	a4,1
    70000650:	00e78b63          	beq	a5,a4,70000666 <fputc+0x4a>
    70000654:	a881                	j	700006a4 <fputc+0x88>
/embryos/chapter12/apps/stdio.c:14
    case STDIO_DEV:    putchar(ch); break;
    70000656:	fef44783          	lbu	a5,-17(s0)
    7000065a:	853e                	mv	a0,a5
    7000065c:	00002097          	auipc	ra,0x2
    70000660:	89c080e7          	jalr	-1892(ra) # 70001ef8 <putchar>
    70000664:	a081                	j	700006a4 <fputc+0x88>
/embryos/chapter12/apps/stdio.c:15
    case STDIO_FILE:   user_write(file->u.file, file->offset, &ch, 1); break;
    70000666:	fd043783          	ld	a5,-48(s0)
    7000066a:	4b98                	lw	a4,16(a5)
    7000066c:	fd043783          	ld	a5,-48(s0)
    70000670:	43dc                	lw	a5,4(a5)
    70000672:	85be                	mv	a1,a5
    70000674:	fef40793          	addi	a5,s0,-17
    70000678:	4685                	li	a3,1
    7000067a:	863e                	mv	a2,a5
    7000067c:	853a                	mv	a0,a4
    7000067e:	00000097          	auipc	ra,0x0
    70000682:	9ce080e7          	jalr	-1586(ra) # 7000004c <user_write>
    70000686:	a839                	j	700006a4 <fputc+0x88>
/embryos/chapter12/apps/stdio.c:16
    case STDIO_STRING: file->u.string[file->offset] = ch; break;
    70000688:	fd043783          	ld	a5,-48(s0)
    7000068c:	6b98                	ld	a4,16(a5)
    7000068e:	fd043783          	ld	a5,-48(s0)
    70000692:	43dc                	lw	a5,4(a5)
    70000694:	1782                	slli	a5,a5,0x20
    70000696:	9381                	srli	a5,a5,0x20
    70000698:	97ba                	add	a5,a5,a4
    7000069a:	fef44703          	lbu	a4,-17(s0)
    7000069e:	00e78023          	sb	a4,0(a5)
    700006a2:	0001                	nop
/embryos/chapter12/apps/stdio.c:18
    }
    file->offset++;
    700006a4:	fd043783          	ld	a5,-48(s0)
    700006a8:	43dc                	lw	a5,4(a5)
    700006aa:	2785                	addiw	a5,a5,1
    700006ac:	0007871b          	sext.w	a4,a5
    700006b0:	fd043783          	ld	a5,-48(s0)
    700006b4:	c3d8                	sw	a4,4(a5)
/embryos/chapter12/apps/stdio.c:19
}
    700006b6:	0001                	nop
    700006b8:	853e                	mv	a0,a5
    700006ba:	70a2                	ld	ra,40(sp)
    700006bc:	7402                	ld	s0,32(sp)
    700006be:	6145                	addi	sp,sp,48
    700006c0:	8082                	ret

00000000700006c2 <fputs>:
fputs():
/embryos/chapter12/apps/stdio.c:21

int fputs(const char *s, FILE *file) {
    700006c2:	1101                	addi	sp,sp,-32
    700006c4:	ec06                	sd	ra,24(sp)
    700006c6:	e822                	sd	s0,16(sp)
    700006c8:	1000                	addi	s0,sp,32
    700006ca:	fea43423          	sd	a0,-24(s0)
    700006ce:	feb43023          	sd	a1,-32(s0)
/embryos/chapter12/apps/stdio.c:22
    while (*s != 0) fputc(*s++, file);
    700006d2:	a00d                	j	700006f4 <fputs+0x32>
/embryos/chapter12/apps/stdio.c:22 (discriminator 3)
    700006d4:	fe843783          	ld	a5,-24(s0)
    700006d8:	00178713          	addi	a4,a5,1
    700006dc:	fee43423          	sd	a4,-24(s0)
    700006e0:	0007c783          	lbu	a5,0(a5)
    700006e4:	2781                	sext.w	a5,a5
    700006e6:	fe043583          	ld	a1,-32(s0)
    700006ea:	853e                	mv	a0,a5
    700006ec:	00000097          	auipc	ra,0x0
    700006f0:	f30080e7          	jalr	-208(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:22 (discriminator 2)
    700006f4:	fe843783          	ld	a5,-24(s0)
    700006f8:	0007c783          	lbu	a5,0(a5)
    700006fc:	ffe1                	bnez	a5,700006d4 <fputs+0x12>
/embryos/chapter12/apps/stdio.c:23
}
    700006fe:	0001                	nop
    70000700:	853e                	mv	a0,a5
    70000702:	60e2                	ld	ra,24(sp)
    70000704:	6442                	ld	s0,16(sp)
    70000706:	6105                	addi	sp,sp,32
    70000708:	8082                	ret

000000007000070a <print_unsigned>:
print_unsigned():
/embryos/chapter12/apps/stdio.c:25

static void print_unsigned(FILE *file, uword_t x, unsigned int base) {
    7000070a:	711d                	addi	sp,sp,-96
    7000070c:	ec86                	sd	ra,88(sp)
    7000070e:	e8a2                	sd	s0,80(sp)
    70000710:	1080                	addi	s0,sp,96
    70000712:	faa43c23          	sd	a0,-72(s0)
    70000716:	fab43823          	sd	a1,-80(s0)
    7000071a:	87b2                	mv	a5,a2
    7000071c:	faf42623          	sw	a5,-84(s0)
/embryos/chapter12/apps/stdio.c:27
    char buf[32];
    int i = 0;
    70000720:	fe042623          	sw	zero,-20(s0)
/embryos/chapter12/apps/stdio.c:29
    do {
        int d = x % base;
    70000724:	fac46783          	lwu	a5,-84(s0)
    70000728:	fb043703          	ld	a4,-80(s0)
    7000072c:	02f777b3          	remu	a5,a4,a5
    70000730:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:30
        buf[i++] = (d < 10) ? '0'+d : 'a'+(d-10);
    70000734:	fe842783          	lw	a5,-24(s0)
    70000738:	0007871b          	sext.w	a4,a5
    7000073c:	47a5                	li	a5,9
    7000073e:	00e7cb63          	blt	a5,a4,70000754 <print_unsigned+0x4a>
/embryos/chapter12/apps/stdio.c:30 (discriminator 1)
    70000742:	fe842783          	lw	a5,-24(s0)
    70000746:	0ff7f793          	zext.b	a5,a5
    7000074a:	0307879b          	addiw	a5,a5,48
    7000074e:	0ff7f793          	zext.b	a5,a5
    70000752:	a809                	j	70000764 <print_unsigned+0x5a>
/embryos/chapter12/apps/stdio.c:30 (discriminator 2)
    70000754:	fe842783          	lw	a5,-24(s0)
    70000758:	0ff7f793          	zext.b	a5,a5
    7000075c:	0577879b          	addiw	a5,a5,87
    70000760:	0ff7f793          	zext.b	a5,a5
/embryos/chapter12/apps/stdio.c:30 (discriminator 4)
    70000764:	fec42703          	lw	a4,-20(s0)
    70000768:	0017069b          	addiw	a3,a4,1
    7000076c:	fed42623          	sw	a3,-20(s0)
    70000770:	1741                	addi	a4,a4,-16
    70000772:	9722                	add	a4,a4,s0
    70000774:	fcf70c23          	sb	a5,-40(a4)
/embryos/chapter12/apps/stdio.c:31
        x /= base;
    70000778:	fac46783          	lwu	a5,-84(s0)
    7000077c:	fb043703          	ld	a4,-80(s0)
    70000780:	02f757b3          	divu	a5,a4,a5
    70000784:	faf43823          	sd	a5,-80(s0)
/embryos/chapter12/apps/stdio.c:32
    } while (x);
    70000788:	fb043783          	ld	a5,-80(s0)
    7000078c:	ffc1                	bnez	a5,70000724 <print_unsigned+0x1a>
/embryos/chapter12/apps/stdio.c:33
    while (--i >= 0) fputc(buf[i], file);
    7000078e:	a839                	j	700007ac <print_unsigned+0xa2>
/embryos/chapter12/apps/stdio.c:33 (discriminator 3)
    70000790:	fec42783          	lw	a5,-20(s0)
    70000794:	17c1                	addi	a5,a5,-16
    70000796:	97a2                	add	a5,a5,s0
    70000798:	fd87c783          	lbu	a5,-40(a5)
    7000079c:	2781                	sext.w	a5,a5
    7000079e:	fb843583          	ld	a1,-72(s0)
    700007a2:	853e                	mv	a0,a5
    700007a4:	00000097          	auipc	ra,0x0
    700007a8:	e78080e7          	jalr	-392(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:33 (discriminator 2)
    700007ac:	fec42783          	lw	a5,-20(s0)
    700007b0:	37fd                	addiw	a5,a5,-1
    700007b2:	fef42623          	sw	a5,-20(s0)
    700007b6:	fec42783          	lw	a5,-20(s0)
    700007ba:	2781                	sext.w	a5,a5
    700007bc:	fc07dae3          	bgez	a5,70000790 <print_unsigned+0x86>
/embryos/chapter12/apps/stdio.c:34
}
    700007c0:	0001                	nop
    700007c2:	0001                	nop
    700007c4:	60e6                	ld	ra,88(sp)
    700007c6:	6446                	ld	s0,80(sp)
    700007c8:	6125                	addi	sp,sp,96
    700007ca:	8082                	ret

00000000700007cc <vfprintf>:
vfprintf():
/embryos/chapter12/apps/stdio.c:36

void vfprintf(FILE *file, const char *fmt, va_list ap) {
    700007cc:	715d                	addi	sp,sp,-80
    700007ce:	e486                	sd	ra,72(sp)
    700007d0:	e0a2                	sd	s0,64(sp)
    700007d2:	0880                	addi	s0,sp,80
    700007d4:	fca43423          	sd	a0,-56(s0)
    700007d8:	fcb43023          	sd	a1,-64(s0)
    700007dc:	fac43c23          	sd	a2,-72(s0)
/embryos/chapter12/apps/stdio.c:37
    for (; *fmt; fmt++) {
    700007e0:	ac65                	j	70000a98 <__global_pointer$+0x298>
/embryos/chapter12/apps/stdio.c:38
        if (*fmt != '%') { fputc(*fmt, file); continue; }
    700007e2:	fc043783          	ld	a5,-64(s0)
    700007e6:	0007c783          	lbu	a5,0(a5)
    700007ea:	873e                	mv	a4,a5
    700007ec:	02500793          	li	a5,37
    700007f0:	00f70f63          	beq	a4,a5,7000080e <__global_pointer$+0xe>
/embryos/chapter12/apps/stdio.c:38 (discriminator 1)
    700007f4:	fc043783          	ld	a5,-64(s0)
    700007f8:	0007c783          	lbu	a5,0(a5)
    700007fc:	2781                	sext.w	a5,a5
    700007fe:	fc843583          	ld	a1,-56(s0)
    70000802:	853e                	mv	a0,a5
    70000804:	00000097          	auipc	ra,0x0
    70000808:	e18080e7          	jalr	-488(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:38
    7000080c:	a449                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:39
        fmt++;
    7000080e:	fc043783          	ld	a5,-64(s0)
    70000812:	0785                	addi	a5,a5,1
    70000814:	fcf43023          	sd	a5,-64(s0)
/embryos/chapter12/apps/stdio.c:40
        switch (*fmt) {
    70000818:	fc043783          	ld	a5,-64(s0)
    7000081c:	0007c783          	lbu	a5,0(a5)
    70000820:	2781                	sext.w	a5,a5
    70000822:	07800713          	li	a4,120
    70000826:	16e78663          	beq	a5,a4,70000992 <__global_pointer$+0x192>
    7000082a:	07800713          	li	a4,120
    7000082e:	22f74c63          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000832:	07500713          	li	a4,117
    70000836:	10e78c63          	beq	a5,a4,7000094e <__global_pointer$+0x14e>
    7000083a:	07500713          	li	a4,117
    7000083e:	22f74463          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000842:	07300713          	li	a4,115
    70000846:	1ce78763          	beq	a5,a4,70000a14 <__global_pointer$+0x214>
    7000084a:	07300713          	li	a4,115
    7000084e:	20f74c63          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000852:	07000713          	li	a4,112
    70000856:	18e78063          	beq	a5,a4,700009d6 <__global_pointer$+0x1d6>
    7000085a:	07000713          	li	a4,112
    7000085e:	20f74463          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000862:	06400713          	li	a4,100
    70000866:	04e78763          	beq	a5,a4,700008b4 <__global_pointer$+0xb4>
    7000086a:	06400713          	li	a4,100
    7000086e:	1ef74c63          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000872:	06300713          	li	a4,99
    70000876:	18e78063          	beq	a5,a4,700009f6 <__global_pointer$+0x1f6>
    7000087a:	06300713          	li	a4,99
    7000087e:	1ef74463          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000882:	05800713          	li	a4,88
    70000886:	12e78863          	beq	a5,a4,700009b6 <__global_pointer$+0x1b6>
    7000088a:	05800713          	li	a4,88
    7000088e:	1cf74c63          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    70000892:	05500713          	li	a4,85
    70000896:	0ce78e63          	beq	a5,a4,70000972 <__global_pointer$+0x172>
    7000089a:	05500713          	li	a4,85
    7000089e:	1cf74463          	blt	a4,a5,70000a66 <__global_pointer$+0x266>
    700008a2:	02500713          	li	a4,37
    700008a6:	1ae78763          	beq	a5,a4,70000a54 <__global_pointer$+0x254>
    700008aa:	04400713          	li	a4,68
    700008ae:	04e78a63          	beq	a5,a4,70000902 <__global_pointer$+0x102>
    700008b2:	aa55                	j	70000a66 <__global_pointer$+0x266>
/embryos/chapter12/apps/stdio.c:42
        case 'd': {
            int x = va_arg(ap, int);
    700008b4:	fb843783          	ld	a5,-72(s0)
    700008b8:	00878713          	addi	a4,a5,8
    700008bc:	fae43c23          	sd	a4,-72(s0)
    700008c0:	439c                	lw	a5,0(a5)
    700008c2:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/stdio.c:43
            if (x < 0) { fputc('-', file); x = -x; }
    700008c6:	fec42783          	lw	a5,-20(s0)
    700008ca:	2781                	sext.w	a5,a5
    700008cc:	0207d063          	bgez	a5,700008ec <__global_pointer$+0xec>
/embryos/chapter12/apps/stdio.c:43 (discriminator 1)
    700008d0:	fc843583          	ld	a1,-56(s0)
    700008d4:	02d00513          	li	a0,45
    700008d8:	00000097          	auipc	ra,0x0
    700008dc:	d44080e7          	jalr	-700(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:43 (discriminator 2)
    700008e0:	fec42783          	lw	a5,-20(s0)
    700008e4:	40f007bb          	negw	a5,a5
    700008e8:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/stdio.c:44
            print_unsigned(file, (uword_t) x, 10);
    700008ec:	fec42783          	lw	a5,-20(s0)
    700008f0:	4629                	li	a2,10
    700008f2:	85be                	mv	a1,a5
    700008f4:	fc843503          	ld	a0,-56(s0)
    700008f8:	00000097          	auipc	ra,0x0
    700008fc:	e12080e7          	jalr	-494(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:45
            break;
    70000900:	a279                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:48
        }
        case 'D': {
            sword_t x = va_arg(ap, sword_t);
    70000902:	fb843783          	ld	a5,-72(s0)
    70000906:	00878713          	addi	a4,a5,8
    7000090a:	fae43c23          	sd	a4,-72(s0)
    7000090e:	639c                	ld	a5,0(a5)
    70000910:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/stdio.c:49
            if (x < 0) { fputc('-', file); x = -x; }
    70000914:	fe043783          	ld	a5,-32(s0)
    70000918:	0207d063          	bgez	a5,70000938 <__global_pointer$+0x138>
/embryos/chapter12/apps/stdio.c:49 (discriminator 1)
    7000091c:	fc843583          	ld	a1,-56(s0)
    70000920:	02d00513          	li	a0,45
    70000924:	00000097          	auipc	ra,0x0
    70000928:	cf8080e7          	jalr	-776(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:49 (discriminator 2)
    7000092c:	fe043783          	ld	a5,-32(s0)
    70000930:	40f007b3          	neg	a5,a5
    70000934:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/stdio.c:50
            print_unsigned(file, (uword_t) x, 10);
    70000938:	fe043783          	ld	a5,-32(s0)
    7000093c:	4629                	li	a2,10
    7000093e:	85be                	mv	a1,a5
    70000940:	fc843503          	ld	a0,-56(s0)
    70000944:	00000097          	auipc	ra,0x0
    70000948:	dc6080e7          	jalr	-570(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:51
            break;
    7000094c:	a289                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:53
        }
        case 'u': print_unsigned(file, va_arg(ap, unsigned int), 10); break;
    7000094e:	fb843783          	ld	a5,-72(s0)
    70000952:	00878713          	addi	a4,a5,8
    70000956:	fae43c23          	sd	a4,-72(s0)
    7000095a:	439c                	lw	a5,0(a5)
/embryos/chapter12/apps/stdio.c:53 (discriminator 1)
    7000095c:	1782                	slli	a5,a5,0x20
    7000095e:	9381                	srli	a5,a5,0x20
    70000960:	4629                	li	a2,10
    70000962:	85be                	mv	a1,a5
    70000964:	fc843503          	ld	a0,-56(s0)
    70000968:	00000097          	auipc	ra,0x0
    7000096c:	da2080e7          	jalr	-606(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:53
    70000970:	aa39                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:54
        case 'U': print_unsigned(file, va_arg(ap, uword_t),      10); break;
    70000972:	fb843783          	ld	a5,-72(s0)
    70000976:	00878713          	addi	a4,a5,8
    7000097a:	fae43c23          	sd	a4,-72(s0)
    7000097e:	639c                	ld	a5,0(a5)
/embryos/chapter12/apps/stdio.c:54 (discriminator 1)
    70000980:	4629                	li	a2,10
    70000982:	85be                	mv	a1,a5
    70000984:	fc843503          	ld	a0,-56(s0)
    70000988:	00000097          	auipc	ra,0x0
    7000098c:	d82080e7          	jalr	-638(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:54
    70000990:	a8fd                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:55
        case 'x': print_unsigned(file, va_arg(ap, unsigned int), 16); break;
    70000992:	fb843783          	ld	a5,-72(s0)
    70000996:	00878713          	addi	a4,a5,8
    7000099a:	fae43c23          	sd	a4,-72(s0)
    7000099e:	439c                	lw	a5,0(a5)
/embryos/chapter12/apps/stdio.c:55 (discriminator 1)
    700009a0:	1782                	slli	a5,a5,0x20
    700009a2:	9381                	srli	a5,a5,0x20
    700009a4:	4641                	li	a2,16
    700009a6:	85be                	mv	a1,a5
    700009a8:	fc843503          	ld	a0,-56(s0)
    700009ac:	00000097          	auipc	ra,0x0
    700009b0:	d5e080e7          	jalr	-674(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:55
    700009b4:	a8e9                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:56
        case 'X': print_unsigned(file, va_arg(ap, uword_t),      16); break;
    700009b6:	fb843783          	ld	a5,-72(s0)
    700009ba:	00878713          	addi	a4,a5,8
    700009be:	fae43c23          	sd	a4,-72(s0)
    700009c2:	639c                	ld	a5,0(a5)
/embryos/chapter12/apps/stdio.c:56 (discriminator 1)
    700009c4:	4641                	li	a2,16
    700009c6:	85be                	mv	a1,a5
    700009c8:	fc843503          	ld	a0,-56(s0)
    700009cc:	00000097          	auipc	ra,0x0
    700009d0:	d3e080e7          	jalr	-706(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:56
    700009d4:	a86d                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:57
        case 'p': print_unsigned(file, va_arg(ap, uintptr_t),    16); break;
    700009d6:	fb843783          	ld	a5,-72(s0)
    700009da:	00878713          	addi	a4,a5,8
    700009de:	fae43c23          	sd	a4,-72(s0)
    700009e2:	639c                	ld	a5,0(a5)
/embryos/chapter12/apps/stdio.c:57 (discriminator 1)
    700009e4:	4641                	li	a2,16
    700009e6:	85be                	mv	a1,a5
    700009e8:	fc843503          	ld	a0,-56(s0)
    700009ec:	00000097          	auipc	ra,0x0
    700009f0:	d1e080e7          	jalr	-738(ra) # 7000070a <print_unsigned>
/embryos/chapter12/apps/stdio.c:57
    700009f4:	a869                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:58
        case 'c': fputc(va_arg(ap, int), file); break;
    700009f6:	fb843783          	ld	a5,-72(s0)
    700009fa:	00878713          	addi	a4,a5,8
    700009fe:	fae43c23          	sd	a4,-72(s0)
    70000a02:	439c                	lw	a5,0(a5)
/embryos/chapter12/apps/stdio.c:58 (discriminator 1)
    70000a04:	fc843583          	ld	a1,-56(s0)
    70000a08:	853e                	mv	a0,a5
    70000a0a:	00000097          	auipc	ra,0x0
    70000a0e:	c12080e7          	jalr	-1006(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:58
    70000a12:	a8b5                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:60
        case 's': {
            char *s = va_arg(ap, char*);
    70000a14:	fb843783          	ld	a5,-72(s0)
    70000a18:	00878713          	addi	a4,a5,8
    70000a1c:	fae43c23          	sd	a4,-72(s0)
    70000a20:	639c                	ld	a5,0(a5)
    70000a22:	fcf43c23          	sd	a5,-40(s0)
/embryos/chapter12/apps/stdio.c:61
            while (*s) fputc(*s++, file);
    70000a26:	a00d                	j	70000a48 <__global_pointer$+0x248>
/embryos/chapter12/apps/stdio.c:61 (discriminator 3)
    70000a28:	fd843783          	ld	a5,-40(s0)
    70000a2c:	00178713          	addi	a4,a5,1
    70000a30:	fce43c23          	sd	a4,-40(s0)
    70000a34:	0007c783          	lbu	a5,0(a5)
    70000a38:	2781                	sext.w	a5,a5
    70000a3a:	fc843583          	ld	a1,-56(s0)
    70000a3e:	853e                	mv	a0,a5
    70000a40:	00000097          	auipc	ra,0x0
    70000a44:	bdc080e7          	jalr	-1060(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:61 (discriminator 2)
    70000a48:	fd843783          	ld	a5,-40(s0)
    70000a4c:	0007c783          	lbu	a5,0(a5)
    70000a50:	ffe1                	bnez	a5,70000a28 <__global_pointer$+0x228>
/embryos/chapter12/apps/stdio.c:62
            break;
    70000a52:	a835                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:64
        }
        case '%': fputc('%', file); break;
    70000a54:	fc843583          	ld	a1,-56(s0)
    70000a58:	02500513          	li	a0,37
    70000a5c:	00000097          	auipc	ra,0x0
    70000a60:	bc0080e7          	jalr	-1088(ra) # 7000061c <fputc>
    70000a64:	a02d                	j	70000a8e <__global_pointer$+0x28e>
/embryos/chapter12/apps/stdio.c:65
        default:  fputc('%', file); fputc(*fmt, file);
    70000a66:	fc843583          	ld	a1,-56(s0)
    70000a6a:	02500513          	li	a0,37
    70000a6e:	00000097          	auipc	ra,0x0
    70000a72:	bae080e7          	jalr	-1106(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:65 (discriminator 1)
    70000a76:	fc043783          	ld	a5,-64(s0)
    70000a7a:	0007c783          	lbu	a5,0(a5)
    70000a7e:	2781                	sext.w	a5,a5
    70000a80:	fc843583          	ld	a1,-56(s0)
    70000a84:	853e                	mv	a0,a5
    70000a86:	00000097          	auipc	ra,0x0
    70000a8a:	b96080e7          	jalr	-1130(ra) # 7000061c <fputc>
/embryos/chapter12/apps/stdio.c:37
    for (; *fmt; fmt++) {
    70000a8e:	fc043783          	ld	a5,-64(s0)
    70000a92:	0785                	addi	a5,a5,1
    70000a94:	fcf43023          	sd	a5,-64(s0)
/embryos/chapter12/apps/stdio.c:37 (discriminator 1)
    70000a98:	fc043783          	ld	a5,-64(s0)
    70000a9c:	0007c783          	lbu	a5,0(a5)
    70000aa0:	d40791e3          	bnez	a5,700007e2 <vfprintf+0x16>
/embryos/chapter12/apps/stdio.c:68
        }
    }
}
    70000aa4:	0001                	nop
    70000aa6:	0001                	nop
    70000aa8:	60a6                	ld	ra,72(sp)
    70000aaa:	6406                	ld	s0,64(sp)
    70000aac:	6161                	addi	sp,sp,80
    70000aae:	8082                	ret

0000000070000ab0 <fprintf>:
fprintf():
/embryos/chapter12/apps/stdio.c:70

void fprintf(FILE *file, const char *fmt, ...) {
    70000ab0:	7159                	addi	sp,sp,-112
    70000ab2:	fc06                	sd	ra,56(sp)
    70000ab4:	f822                	sd	s0,48(sp)
    70000ab6:	0080                	addi	s0,sp,64
    70000ab8:	fca43c23          	sd	a0,-40(s0)
    70000abc:	fcb43823          	sd	a1,-48(s0)
    70000ac0:	e010                	sd	a2,0(s0)
    70000ac2:	e414                	sd	a3,8(s0)
    70000ac4:	e818                	sd	a4,16(s0)
    70000ac6:	ec1c                	sd	a5,24(s0)
    70000ac8:	03043023          	sd	a6,32(s0)
    70000acc:	03143423          	sd	a7,40(s0)
/embryos/chapter12/apps/stdio.c:72
    va_list ap;
    va_start(ap, fmt);
    70000ad0:	03040793          	addi	a5,s0,48
    70000ad4:	fcf43423          	sd	a5,-56(s0)
    70000ad8:	fc843783          	ld	a5,-56(s0)
    70000adc:	fd078793          	addi	a5,a5,-48
    70000ae0:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:73
    vfprintf(file, fmt, ap);
    70000ae4:	fe843783          	ld	a5,-24(s0)
    70000ae8:	863e                	mv	a2,a5
    70000aea:	fd043583          	ld	a1,-48(s0)
    70000aee:	fd843503          	ld	a0,-40(s0)
    70000af2:	00000097          	auipc	ra,0x0
    70000af6:	cda080e7          	jalr	-806(ra) # 700007cc <vfprintf>
/embryos/chapter12/apps/stdio.c:75
    va_end(ap);
}
    70000afa:	0001                	nop
    70000afc:	70e2                	ld	ra,56(sp)
    70000afe:	7442                	ld	s0,48(sp)
    70000b00:	6165                	addi	sp,sp,112
    70000b02:	8082                	ret

0000000070000b04 <sprintf>:
sprintf():
/embryos/chapter12/apps/stdio.c:77

void sprintf(char *s, const char *fmt, ...) {
    70000b04:	7119                	addi	sp,sp,-128
    70000b06:	e486                	sd	ra,72(sp)
    70000b08:	e0a2                	sd	s0,64(sp)
    70000b0a:	0880                	addi	s0,sp,80
    70000b0c:	fca43423          	sd	a0,-56(s0)
    70000b10:	fcb43023          	sd	a1,-64(s0)
    70000b14:	e010                	sd	a2,0(s0)
    70000b16:	e414                	sd	a3,8(s0)
    70000b18:	e818                	sd	a4,16(s0)
    70000b1a:	ec1c                	sd	a5,24(s0)
    70000b1c:	03043023          	sd	a6,32(s0)
    70000b20:	03143423          	sd	a7,40(s0)
/embryos/chapter12/apps/stdio.c:79
    FILE file;
    file.type = STDIO_STRING;
    70000b24:	4789                	li	a5,2
    70000b26:	fcf42c23          	sw	a5,-40(s0)
/embryos/chapter12/apps/stdio.c:80
    file.u.string = s;
    70000b2a:	fc843783          	ld	a5,-56(s0)
    70000b2e:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:82
    va_list ap;
    va_start(ap, fmt);
    70000b32:	03040793          	addi	a5,s0,48
    70000b36:	faf43c23          	sd	a5,-72(s0)
    70000b3a:	fb843783          	ld	a5,-72(s0)
    70000b3e:	fd078793          	addi	a5,a5,-48
    70000b42:	fcf43823          	sd	a5,-48(s0)
/embryos/chapter12/apps/stdio.c:83
    vfprintf(&file, fmt, ap);
    70000b46:	fd043703          	ld	a4,-48(s0)
    70000b4a:	fd840793          	addi	a5,s0,-40
    70000b4e:	863a                	mv	a2,a4
    70000b50:	fc043583          	ld	a1,-64(s0)
    70000b54:	853e                	mv	a0,a5
    70000b56:	00000097          	auipc	ra,0x0
    70000b5a:	c76080e7          	jalr	-906(ra) # 700007cc <vfprintf>
/embryos/chapter12/apps/stdio.c:85
    va_end(ap);
    s[file.offset] = 0;
    70000b5e:	fdc42783          	lw	a5,-36(s0)
    70000b62:	1782                	slli	a5,a5,0x20
    70000b64:	9381                	srli	a5,a5,0x20
    70000b66:	fc843703          	ld	a4,-56(s0)
    70000b6a:	97ba                	add	a5,a5,a4
    70000b6c:	00078023          	sb	zero,0(a5)
/embryos/chapter12/apps/stdio.c:86
}
    70000b70:	0001                	nop
    70000b72:	60a6                	ld	ra,72(sp)
    70000b74:	6406                	ld	s0,64(sp)
    70000b76:	6109                	addi	sp,sp,128
    70000b78:	8082                	ret

0000000070000b7a <printf>:
printf():
/embryos/chapter12/apps/stdio.c:88

void printf(const char *fmt, ...) {
    70000b7a:	7159                	addi	sp,sp,-112
    70000b7c:	f406                	sd	ra,40(sp)
    70000b7e:	f022                	sd	s0,32(sp)
    70000b80:	1800                	addi	s0,sp,48
    70000b82:	fca43c23          	sd	a0,-40(s0)
    70000b86:	e40c                	sd	a1,8(s0)
    70000b88:	e810                	sd	a2,16(s0)
    70000b8a:	ec14                	sd	a3,24(s0)
    70000b8c:	f018                	sd	a4,32(s0)
    70000b8e:	f41c                	sd	a5,40(s0)
    70000b90:	03043823          	sd	a6,48(s0)
    70000b94:	03143c23          	sd	a7,56(s0)
/embryos/chapter12/apps/stdio.c:90
    va_list ap;
    va_start(ap, fmt);
    70000b98:	04040793          	addi	a5,s0,64
    70000b9c:	fcf43823          	sd	a5,-48(s0)
    70000ba0:	fd043783          	ld	a5,-48(s0)
    70000ba4:	fc878793          	addi	a5,a5,-56
    70000ba8:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:91
    vfprintf(stdout, fmt, ap);
    70000bac:	00001797          	auipc	a5,0x1
    70000bb0:	6e478793          	addi	a5,a5,1764 # 70002290 <stdout>
    70000bb4:	639c                	ld	a5,0(a5)
    70000bb6:	fe843703          	ld	a4,-24(s0)
    70000bba:	863a                	mv	a2,a4
    70000bbc:	fd843583          	ld	a1,-40(s0)
    70000bc0:	853e                	mv	a0,a5
    70000bc2:	00000097          	auipc	ra,0x0
    70000bc6:	c0a080e7          	jalr	-1014(ra) # 700007cc <vfprintf>
/embryos/chapter12/apps/stdio.c:93
    va_end(ap);
}
    70000bca:	0001                	nop
    70000bcc:	70a2                	ld	ra,40(sp)
    70000bce:	7402                	ld	s0,32(sp)
    70000bd0:	6165                	addi	sp,sp,112
    70000bd2:	8082                	ret

0000000070000bd4 <fopen>:
fopen():
/embryos/chapter12/apps/stdio.c:95

FILE *fopen(const char *name, const char *access) {
    70000bd4:	7139                	addi	sp,sp,-64
    70000bd6:	fc06                	sd	ra,56(sp)
    70000bd8:	f822                	sd	s0,48(sp)
    70000bda:	0080                	addi	s0,sp,64
    70000bdc:	fca43423          	sd	a0,-56(s0)
    70000be0:	fcb43023          	sd	a1,-64(s0)
/embryos/chapter12/apps/stdio.c:96
    if (*access == 'r') {
    70000be4:	fc043783          	ld	a5,-64(s0)
    70000be8:	0007c783          	lbu	a5,0(a5)
    70000bec:	873e                	mv	a4,a5
    70000bee:	07200793          	li	a5,114
    70000bf2:	04f71b63          	bne	a4,a5,70000c48 <fopen+0x74>
/embryos/chapter12/apps/stdio.c:97
        int fh = dir_lookup(name);
    70000bf6:	fc843503          	ld	a0,-56(s0)
    70000bfa:	00000097          	auipc	ra,0x0
    70000bfe:	28c080e7          	jalr	652(ra) # 70000e86 <dir_lookup>
    70000c02:	87aa                	mv	a5,a0
    70000c04:	fcf42e23          	sw	a5,-36(s0)
/embryos/chapter12/apps/stdio.c:98
        if (fh < 0) return 0;
    70000c08:	fdc42783          	lw	a5,-36(s0)
    70000c0c:	2781                	sext.w	a5,a5
    70000c0e:	0007d463          	bgez	a5,70000c16 <fopen+0x42>
/embryos/chapter12/apps/stdio.c:98 (discriminator 1)
    70000c12:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:98
    70000c14:	a855                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:99
        FILE *file = calloc(1, sizeof(*file));
    70000c16:	45e1                	li	a1,24
    70000c18:	4505                	li	a0,1
    70000c1a:	00001097          	auipc	ra,0x1
    70000c1e:	434080e7          	jalr	1076(ra) # 7000204e <calloc>
    70000c22:	fca43823          	sd	a0,-48(s0)
/embryos/chapter12/apps/stdio.c:100
        if (file == 0) return 0;
    70000c26:	fd043783          	ld	a5,-48(s0)
    70000c2a:	e399                	bnez	a5,70000c30 <fopen+0x5c>
/embryos/chapter12/apps/stdio.c:100 (discriminator 1)
    70000c2c:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:100
    70000c2e:	a869                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:101
        file->type = STDIO_FILE;
    70000c30:	fd043783          	ld	a5,-48(s0)
    70000c34:	4705                	li	a4,1
    70000c36:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/stdio.c:102
        file->u.file = fh;
    70000c38:	fd043783          	ld	a5,-48(s0)
    70000c3c:	fdc42703          	lw	a4,-36(s0)
    70000c40:	cb98                	sw	a4,16(a5)
/embryos/chapter12/apps/stdio.c:103
        return file;
    70000c42:	fd043783          	ld	a5,-48(s0)
    70000c46:	a049                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:105
    }
    if (*access == 'w') {
    70000c48:	fc043783          	ld	a5,-64(s0)
    70000c4c:	0007c783          	lbu	a5,0(a5)
    70000c50:	873e                	mv	a4,a5
    70000c52:	07700793          	li	a5,119
    70000c56:	06f71863          	bne	a4,a5,70000cc6 <fopen+0xf2>
/embryos/chapter12/apps/stdio.c:106
        int fh = user_create();     // create a new file
    70000c5a:	fffff097          	auipc	ra,0xfffff
    70000c5e:	3e2080e7          	jalr	994(ra) # 7000003c <user_create>
    70000c62:	87aa                	mv	a5,a0
    70000c64:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/stdio.c:107
        if (fh < 0) return 0;
    70000c68:	fec42783          	lw	a5,-20(s0)
    70000c6c:	2781                	sext.w	a5,a5
    70000c6e:	0007d463          	bgez	a5,70000c76 <fopen+0xa2>
/embryos/chapter12/apps/stdio.c:107 (discriminator 1)
    70000c72:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:107
    70000c74:	a891                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:108
        dir_delete(name);           // delete the old file if any
    70000c76:	fc843503          	ld	a0,-56(s0)
    70000c7a:	00000097          	auipc	ra,0x0
    70000c7e:	3a0080e7          	jalr	928(ra) # 7000101a <dir_delete>
/embryos/chapter12/apps/stdio.c:109
        dir_create(name, fh);
    70000c82:	fec42783          	lw	a5,-20(s0)
    70000c86:	85be                	mv	a1,a5
    70000c88:	fc843503          	ld	a0,-56(s0)
    70000c8c:	00000097          	auipc	ra,0x0
    70000c90:	28e080e7          	jalr	654(ra) # 70000f1a <dir_create>
/embryos/chapter12/apps/stdio.c:110
        FILE *file = calloc(1, sizeof(*file));
    70000c94:	45e1                	li	a1,24
    70000c96:	4505                	li	a0,1
    70000c98:	00001097          	auipc	ra,0x1
    70000c9c:	3b6080e7          	jalr	950(ra) # 7000204e <calloc>
    70000ca0:	fea43023          	sd	a0,-32(s0)
/embryos/chapter12/apps/stdio.c:111
        if (file == 0) return 0;
    70000ca4:	fe043783          	ld	a5,-32(s0)
    70000ca8:	e399                	bnez	a5,70000cae <fopen+0xda>
/embryos/chapter12/apps/stdio.c:111 (discriminator 1)
    70000caa:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:111
    70000cac:	a831                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:112
        file->type = STDIO_FILE;
    70000cae:	fe043783          	ld	a5,-32(s0)
    70000cb2:	4705                	li	a4,1
    70000cb4:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/stdio.c:113
        file->u.file = fh;
    70000cb6:	fe043783          	ld	a5,-32(s0)
    70000cba:	fec42703          	lw	a4,-20(s0)
    70000cbe:	cb98                	sw	a4,16(a5)
/embryos/chapter12/apps/stdio.c:114
        return file;
    70000cc0:	fe043783          	ld	a5,-32(s0)
    70000cc4:	a011                	j	70000cc8 <fopen+0xf4>
/embryos/chapter12/apps/stdio.c:116
    }
    return 0;
    70000cc6:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:117
}
    70000cc8:	853e                	mv	a0,a5
    70000cca:	70e2                	ld	ra,56(sp)
    70000ccc:	7442                	ld	s0,48(sp)
    70000cce:	6121                	addi	sp,sp,64
    70000cd0:	8082                	ret

0000000070000cd2 <freadline>:
freadline():
/embryos/chapter12/apps/stdio.c:119

char *freadline(char *str, int size, FILE *file) {
    70000cd2:	7139                	addi	sp,sp,-64
    70000cd4:	fc06                	sd	ra,56(sp)
    70000cd6:	f822                	sd	s0,48(sp)
    70000cd8:	0080                	addi	s0,sp,64
    70000cda:	fca43c23          	sd	a0,-40(s0)
    70000cde:	87ae                	mv	a5,a1
    70000ce0:	fcc43423          	sd	a2,-56(s0)
    70000ce4:	fcf42a23          	sw	a5,-44(s0)
/embryos/chapter12/apps/stdio.c:120
    if (file->eof) return 0;
    70000ce8:	fc843783          	ld	a5,-56(s0)
    70000cec:	479c                	lw	a5,8(a5)
    70000cee:	c399                	beqz	a5,70000cf4 <freadline+0x22>
/embryos/chapter12/apps/stdio.c:120 (discriminator 1)
    70000cf0:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:120
    70000cf2:	a045                	j	70000d92 <freadline+0xc0>
/embryos/chapter12/apps/stdio.c:121
    int nread = 0;
    70000cf4:	fe042623          	sw	zero,-20(s0)
/embryos/chapter12/apps/stdio.c:122
    while (nread < size - 1) {
    70000cf8:	a88d                	j	70000d6a <freadline+0x98>
/embryos/chapter12/apps/stdio.c:123
        int n = user_read(file->u.file, file->offset, &str[nread], 1);
    70000cfa:	fc843783          	ld	a5,-56(s0)
    70000cfe:	4b88                	lw	a0,16(a5)
    70000d00:	fc843783          	ld	a5,-56(s0)
    70000d04:	43dc                	lw	a5,4(a5)
    70000d06:	85be                	mv	a1,a5
    70000d08:	fec42783          	lw	a5,-20(s0)
    70000d0c:	fd843703          	ld	a4,-40(s0)
    70000d10:	97ba                	add	a5,a5,a4
    70000d12:	4685                	li	a3,1
    70000d14:	863e                	mv	a2,a5
    70000d16:	fffff097          	auipc	ra,0xfffff
    70000d1a:	32e080e7          	jalr	814(ra) # 70000044 <user_read>
    70000d1e:	87aa                	mv	a5,a0
    70000d20:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:124
        if (n == 0) {
    70000d24:	fe842783          	lw	a5,-24(s0)
    70000d28:	2781                	sext.w	a5,a5
    70000d2a:	e791                	bnez	a5,70000d36 <freadline+0x64>
/embryos/chapter12/apps/stdio.c:125
            file->eof = 1;
    70000d2c:	fc843783          	ld	a5,-56(s0)
    70000d30:	4705                	li	a4,1
    70000d32:	c798                	sw	a4,8(a5)
/embryos/chapter12/apps/stdio.c:126
            break;
    70000d34:	a0b1                	j	70000d80 <freadline+0xae>
/embryos/chapter12/apps/stdio.c:128
        }
        file->offset++;
    70000d36:	fc843783          	ld	a5,-56(s0)
    70000d3a:	43dc                	lw	a5,4(a5)
    70000d3c:	2785                	addiw	a5,a5,1
    70000d3e:	0007871b          	sext.w	a4,a5
    70000d42:	fc843783          	ld	a5,-56(s0)
    70000d46:	c3d8                	sw	a4,4(a5)
/embryos/chapter12/apps/stdio.c:129
        nread++;
    70000d48:	fec42783          	lw	a5,-20(s0)
    70000d4c:	2785                	addiw	a5,a5,1
    70000d4e:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/stdio.c:130
        if (str[nread - 1] == '\n') break;
    70000d52:	fec42783          	lw	a5,-20(s0)
    70000d56:	17fd                	addi	a5,a5,-1
    70000d58:	fd843703          	ld	a4,-40(s0)
    70000d5c:	97ba                	add	a5,a5,a4
    70000d5e:	0007c783          	lbu	a5,0(a5)
    70000d62:	873e                	mv	a4,a5
    70000d64:	47a9                	li	a5,10
    70000d66:	00f70c63          	beq	a4,a5,70000d7e <freadline+0xac>
/embryos/chapter12/apps/stdio.c:122
    while (nread < size - 1) {
    70000d6a:	fd442783          	lw	a5,-44(s0)
    70000d6e:	37fd                	addiw	a5,a5,-1
    70000d70:	2781                	sext.w	a5,a5
    70000d72:	fec42703          	lw	a4,-20(s0)
    70000d76:	2701                	sext.w	a4,a4
    70000d78:	f8f741e3          	blt	a4,a5,70000cfa <freadline+0x28>
    70000d7c:	a011                	j	70000d80 <freadline+0xae>
/embryos/chapter12/apps/stdio.c:130
        if (str[nread - 1] == '\n') break;
    70000d7e:	0001                	nop
/embryos/chapter12/apps/stdio.c:132
    }
    str[nread] = 0;
    70000d80:	fec42783          	lw	a5,-20(s0)
    70000d84:	fd843703          	ld	a4,-40(s0)
    70000d88:	97ba                	add	a5,a5,a4
    70000d8a:	00078023          	sb	zero,0(a5)
/embryos/chapter12/apps/stdio.c:133
    return str;
    70000d8e:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/stdio.c:134
}
    70000d92:	853e                	mv	a0,a5
    70000d94:	70e2                	ld	ra,56(sp)
    70000d96:	7442                	ld	s0,48(sp)
    70000d98:	6121                	addi	sp,sp,64
    70000d9a:	8082                	ret

0000000070000d9c <fgets>:
fgets():
/embryos/chapter12/apps/stdio.c:136

char *fgets(char *str, int size, FILE *file) {
    70000d9c:	7179                	addi	sp,sp,-48
    70000d9e:	f406                	sd	ra,40(sp)
    70000da0:	f022                	sd	s0,32(sp)
    70000da2:	1800                	addi	s0,sp,48
    70000da4:	fea43423          	sd	a0,-24(s0)
    70000da8:	87ae                	mv	a5,a1
    70000daa:	fcc43c23          	sd	a2,-40(s0)
    70000dae:	fef42223          	sw	a5,-28(s0)
/embryos/chapter12/apps/stdio.c:137
    switch (file->type) {
    70000db2:	fd843783          	ld	a5,-40(s0)
    70000db6:	439c                	lw	a5,0(a5)
    70000db8:	c789                	beqz	a5,70000dc2 <fgets+0x26>
    70000dba:	4705                	li	a4,1
    70000dbc:	02e78363          	beq	a5,a4,70000de2 <fgets+0x46>
    70000dc0:	a835                	j	70000dfc <fgets+0x60>
/embryos/chapter12/apps/stdio.c:139
    case STDIO_DEV:
        return readline(str, size) ? str : 0;
    70000dc2:	fe442783          	lw	a5,-28(s0)
    70000dc6:	85be                	mv	a1,a5
    70000dc8:	fe843503          	ld	a0,-24(s0)
    70000dcc:	00001097          	auipc	ra,0x1
    70000dd0:	162080e7          	jalr	354(ra) # 70001f2e <readline>
    70000dd4:	87aa                	mv	a5,a0
/embryos/chapter12/apps/stdio.c:139 (discriminator 1)
    70000dd6:	c781                	beqz	a5,70000dde <fgets+0x42>
/embryos/chapter12/apps/stdio.c:139 (discriminator 2)
    70000dd8:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/stdio.c:139
    70000ddc:	a00d                	j	70000dfe <fgets+0x62>
/embryos/chapter12/apps/stdio.c:139 (discriminator 3)
    70000dde:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:139
    70000de0:	a839                	j	70000dfe <fgets+0x62>
/embryos/chapter12/apps/stdio.c:141
    case STDIO_FILE:
        return freadline(str, size, file);
    70000de2:	fe442783          	lw	a5,-28(s0)
    70000de6:	fd843603          	ld	a2,-40(s0)
    70000dea:	85be                	mv	a1,a5
    70000dec:	fe843503          	ld	a0,-24(s0)
    70000df0:	00000097          	auipc	ra,0x0
    70000df4:	ee2080e7          	jalr	-286(ra) # 70000cd2 <freadline>
    70000df8:	87aa                	mv	a5,a0
    70000dfa:	a011                	j	70000dfe <fgets+0x62>
/embryos/chapter12/apps/stdio.c:143
    default:
        return 0;
    70000dfc:	4781                	li	a5,0
/embryos/chapter12/apps/stdio.c:145
    }
}
    70000dfe:	853e                	mv	a0,a5
    70000e00:	70a2                	ld	ra,40(sp)
    70000e02:	7402                	ld	s0,32(sp)
    70000e04:	6145                	addi	sp,sp,48
    70000e06:	8082                	ret

0000000070000e08 <feof>:
feof():
/embryos/chapter12/apps/stdio.c:147

int feof(FILE *file) { return file->eof; }
    70000e08:	1101                	addi	sp,sp,-32
    70000e0a:	ec06                	sd	ra,24(sp)
    70000e0c:	e822                	sd	s0,16(sp)
    70000e0e:	1000                	addi	s0,sp,32
    70000e10:	fea43423          	sd	a0,-24(s0)
    70000e14:	fe843783          	ld	a5,-24(s0)
    70000e18:	479c                	lw	a5,8(a5)
    70000e1a:	853e                	mv	a0,a5
    70000e1c:	60e2                	ld	ra,24(sp)
    70000e1e:	6442                	ld	s0,16(sp)
    70000e20:	6105                	addi	sp,sp,32
    70000e22:	8082                	ret

0000000070000e24 <fflush>:
fflush():
/embryos/chapter12/apps/stdio.c:149

void fflush(FILE *file) { /* no buffering */ }
    70000e24:	1101                	addi	sp,sp,-32
    70000e26:	ec06                	sd	ra,24(sp)
    70000e28:	e822                	sd	s0,16(sp)
    70000e2a:	1000                	addi	s0,sp,32
    70000e2c:	fea43423          	sd	a0,-24(s0)
    70000e30:	0001                	nop
    70000e32:	60e2                	ld	ra,24(sp)
    70000e34:	6442                	ld	s0,16(sp)
    70000e36:	6105                	addi	sp,sp,32
    70000e38:	8082                	ret

0000000070000e3a <clearerr>:
clearerr():
/embryos/chapter12/apps/stdio.c:151

void clearerr(FILE *file) { file->eof = 0; }
    70000e3a:	1101                	addi	sp,sp,-32
    70000e3c:	ec06                	sd	ra,24(sp)
    70000e3e:	e822                	sd	s0,16(sp)
    70000e40:	1000                	addi	s0,sp,32
    70000e42:	fea43423          	sd	a0,-24(s0)
    70000e46:	fe843783          	ld	a5,-24(s0)
    70000e4a:	0007a423          	sw	zero,8(a5)
    70000e4e:	0001                	nop
    70000e50:	60e2                	ld	ra,24(sp)
    70000e52:	6442                	ld	s0,16(sp)
    70000e54:	6105                	addi	sp,sp,32
    70000e56:	8082                	ret

0000000070000e58 <fclose>:
fclose():
/embryos/chapter12/apps/stdio.c:153

void fclose(FILE *file) {
    70000e58:	1101                	addi	sp,sp,-32
    70000e5a:	ec06                	sd	ra,24(sp)
    70000e5c:	e822                	sd	s0,16(sp)
    70000e5e:	1000                	addi	s0,sp,32
    70000e60:	fea43423          	sd	a0,-24(s0)
/embryos/chapter12/apps/stdio.c:154
    if (file->type == STDIO_FILE) free(file);
    70000e64:	fe843783          	ld	a5,-24(s0)
    70000e68:	4398                	lw	a4,0(a5)
    70000e6a:	4785                	li	a5,1
    70000e6c:	00f71863          	bne	a4,a5,70000e7c <fclose+0x24>
/embryos/chapter12/apps/stdio.c:154 (discriminator 1)
    70000e70:	fe843503          	ld	a0,-24(s0)
    70000e74:	00001097          	auipc	ra,0x1
    70000e78:	2d2080e7          	jalr	722(ra) # 70002146 <free>
/embryos/chapter12/apps/stdio.c:155
}
    70000e7c:	0001                	nop
    70000e7e:	60e2                	ld	ra,24(sp)
    70000e80:	6442                	ld	s0,16(sp)
    70000e82:	6105                	addi	sp,sp,32
    70000e84:	8082                	ret

0000000070000e86 <dir_lookup>:
dir_lookup():
/embryos/chapter12/apps/dir.c:5
#include "syslib.h"
#include "string.h"
#include "dir.h"

int dir_lookup(const char *name) {
    70000e86:	7139                	addi	sp,sp,-64
    70000e88:	fc06                	sd	ra,56(sp)
    70000e8a:	f822                	sd	s0,48(sp)
    70000e8c:	0080                	addi	s0,sp,64
    70000e8e:	fca43423          	sd	a0,-56(s0)
/embryos/chapter12/apps/dir.c:7
    struct dirent e;
    int n = user_size(ROOT_DIR) / sizeof e;
    70000e92:	4505                	li	a0,1
    70000e94:	fffff097          	auipc	ra,0xfffff
    70000e98:	1c0080e7          	jalr	448(ra) # 70000054 <user_size>
    70000e9c:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:7 (discriminator 1)
    70000e9e:	8391                	srli	a5,a5,0x4
    70000ea0:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/dir.c:8
    for (int i = 0; i < n; i++) {
    70000ea4:	fe042623          	sw	zero,-20(s0)
    70000ea8:	a891                	j	70000efc <dir_lookup+0x76>
/embryos/chapter12/apps/dir.c:9
        user_read(ROOT_DIR, i * sizeof e, &e, sizeof e);
    70000eaa:	fec42783          	lw	a5,-20(s0)
    70000eae:	0047979b          	slliw	a5,a5,0x4
    70000eb2:	2781                	sext.w	a5,a5
    70000eb4:	873e                	mv	a4,a5
    70000eb6:	fd840793          	addi	a5,s0,-40
    70000eba:	46c1                	li	a3,16
    70000ebc:	863e                	mv	a2,a5
    70000ebe:	85ba                	mv	a1,a4
    70000ec0:	4505                	li	a0,1
    70000ec2:	fffff097          	auipc	ra,0xfffff
    70000ec6:	182080e7          	jalr	386(ra) # 70000044 <user_read>
/embryos/chapter12/apps/dir.c:10
        if (e.file != 0) {
    70000eca:	fe645783          	lhu	a5,-26(s0)
    70000ece:	c395                	beqz	a5,70000ef2 <dir_lookup+0x6c>
/embryos/chapter12/apps/dir.c:11
            e.name[NAME_LEN - 1] = 0;
    70000ed0:	fe0402a3          	sb	zero,-27(s0)
/embryos/chapter12/apps/dir.c:12
            if (strcmp(e.name, name) == 0) return e.file;
    70000ed4:	fd840793          	addi	a5,s0,-40
    70000ed8:	fc843583          	ld	a1,-56(s0)
    70000edc:	853e                	mv	a0,a5
    70000ede:	fffff097          	auipc	ra,0xfffff
    70000ee2:	1c8080e7          	jalr	456(ra) # 700000a6 <strcmp>
    70000ee6:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:12 (discriminator 1)
    70000ee8:	e789                	bnez	a5,70000ef2 <dir_lookup+0x6c>
/embryos/chapter12/apps/dir.c:12 (discriminator 2)
    70000eea:	fe645783          	lhu	a5,-26(s0)
    70000eee:	2781                	sext.w	a5,a5
/embryos/chapter12/apps/dir.c:12
    70000ef0:	a005                	j	70000f10 <dir_lookup+0x8a>
/embryos/chapter12/apps/dir.c:8 (discriminator 2)
    for (int i = 0; i < n; i++) {
    70000ef2:	fec42783          	lw	a5,-20(s0)
    70000ef6:	2785                	addiw	a5,a5,1
    70000ef8:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/dir.c:8 (discriminator 1)
    70000efc:	fec42783          	lw	a5,-20(s0)
    70000f00:	873e                	mv	a4,a5
    70000f02:	fe842783          	lw	a5,-24(s0)
    70000f06:	2701                	sext.w	a4,a4
    70000f08:	2781                	sext.w	a5,a5
    70000f0a:	faf740e3          	blt	a4,a5,70000eaa <dir_lookup+0x24>
/embryos/chapter12/apps/dir.c:15
        }
    }
    return -1;
    70000f0e:	57fd                	li	a5,-1
/embryos/chapter12/apps/dir.c:16
}
    70000f10:	853e                	mv	a0,a5
    70000f12:	70e2                	ld	ra,56(sp)
    70000f14:	7442                	ld	s0,48(sp)
    70000f16:	6121                	addi	sp,sp,64
    70000f18:	8082                	ret

0000000070000f1a <dir_create>:
dir_create():
/embryos/chapter12/apps/dir.c:18

int dir_create(const char *name, int file) {
    70000f1a:	7139                	addi	sp,sp,-64
    70000f1c:	fc06                	sd	ra,56(sp)
    70000f1e:	f822                	sd	s0,48(sp)
    70000f20:	0080                	addi	s0,sp,64
    70000f22:	fca43423          	sd	a0,-56(s0)
    70000f26:	87ae                	mv	a5,a1
    70000f28:	fcf42223          	sw	a5,-60(s0)
/embryos/chapter12/apps/dir.c:19
    if (strlen(name) >= NAME_LEN - 1) return -1;
    70000f2c:	fc843503          	ld	a0,-56(s0)
    70000f30:	fffff097          	auipc	ra,0xfffff
    70000f34:	2fc080e7          	jalr	764(ra) # 7000022c <strlen>
    70000f38:	872a                	mv	a4,a0
/embryos/chapter12/apps/dir.c:19 (discriminator 1)
    70000f3a:	47b1                	li	a5,12
    70000f3c:	00e7f463          	bgeu	a5,a4,70000f44 <dir_create+0x2a>
/embryos/chapter12/apps/dir.c:19 (discriminator 2)
    70000f40:	57fd                	li	a5,-1
/embryos/chapter12/apps/dir.c:19
    70000f42:	a0f9                	j	70001010 <dir_create+0xf6>
/embryos/chapter12/apps/dir.c:21
    struct dirent e;
    int n = user_size(ROOT_DIR) / sizeof e, unused = n;
    70000f44:	4505                	li	a0,1
    70000f46:	fffff097          	auipc	ra,0xfffff
    70000f4a:	10e080e7          	jalr	270(ra) # 70000054 <user_size>
    70000f4e:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:21 (discriminator 1)
    70000f50:	8391                	srli	a5,a5,0x4
    70000f52:	fef42223          	sw	a5,-28(s0)
    70000f56:	fe442783          	lw	a5,-28(s0)
    70000f5a:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/dir.c:22
    for (int i = 0; i < n; i++) {
    70000f5e:	fe042423          	sw	zero,-24(s0)
    70000f62:	a8a9                	j	70000fbc <dir_create+0xa2>
/embryos/chapter12/apps/dir.c:23
        user_read(ROOT_DIR, i * sizeof e, &e, sizeof e);
    70000f64:	fe842783          	lw	a5,-24(s0)
    70000f68:	0047979b          	slliw	a5,a5,0x4
    70000f6c:	2781                	sext.w	a5,a5
    70000f6e:	873e                	mv	a4,a5
    70000f70:	fd040793          	addi	a5,s0,-48
    70000f74:	46c1                	li	a3,16
    70000f76:	863e                	mv	a2,a5
    70000f78:	85ba                	mv	a1,a4
    70000f7a:	4505                	li	a0,1
    70000f7c:	fffff097          	auipc	ra,0xfffff
    70000f80:	0c8080e7          	jalr	200(ra) # 70000044 <user_read>
/embryos/chapter12/apps/dir.c:24
        if (e.file == 0) unused = i;
    70000f84:	fde45783          	lhu	a5,-34(s0)
    70000f88:	e791                	bnez	a5,70000f94 <dir_create+0x7a>
/embryos/chapter12/apps/dir.c:24 (discriminator 1)
    70000f8a:	fe842783          	lw	a5,-24(s0)
    70000f8e:	fef42623          	sw	a5,-20(s0)
    70000f92:	a005                	j	70000fb2 <dir_create+0x98>
/embryos/chapter12/apps/dir.c:26
        else {
            e.name[NAME_LEN - 1] = 0;
    70000f94:	fc040ea3          	sb	zero,-35(s0)
/embryos/chapter12/apps/dir.c:27
            if (strcmp(e.name, name) == 0) return -1;
    70000f98:	fd040793          	addi	a5,s0,-48
    70000f9c:	fc843583          	ld	a1,-56(s0)
    70000fa0:	853e                	mv	a0,a5
    70000fa2:	fffff097          	auipc	ra,0xfffff
    70000fa6:	104080e7          	jalr	260(ra) # 700000a6 <strcmp>
    70000faa:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:27 (discriminator 1)
    70000fac:	e399                	bnez	a5,70000fb2 <dir_create+0x98>
/embryos/chapter12/apps/dir.c:27 (discriminator 2)
    70000fae:	57fd                	li	a5,-1
/embryos/chapter12/apps/dir.c:27
    70000fb0:	a085                	j	70001010 <dir_create+0xf6>
/embryos/chapter12/apps/dir.c:22 (discriminator 2)
    for (int i = 0; i < n; i++) {
    70000fb2:	fe842783          	lw	a5,-24(s0)
    70000fb6:	2785                	addiw	a5,a5,1
    70000fb8:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/dir.c:22 (discriminator 1)
    70000fbc:	fe842783          	lw	a5,-24(s0)
    70000fc0:	873e                	mv	a4,a5
    70000fc2:	fe442783          	lw	a5,-28(s0)
    70000fc6:	2701                	sext.w	a4,a4
    70000fc8:	2781                	sext.w	a5,a5
    70000fca:	f8f74de3          	blt	a4,a5,70000f64 <dir_create+0x4a>
/embryos/chapter12/apps/dir.c:30
        }
    }
    e.file = file;
    70000fce:	fc442783          	lw	a5,-60(s0)
    70000fd2:	17c2                	slli	a5,a5,0x30
    70000fd4:	93c1                	srli	a5,a5,0x30
    70000fd6:	fcf41f23          	sh	a5,-34(s0)
/embryos/chapter12/apps/dir.c:31
    strcpy(e.name, name);
    70000fda:	fd040793          	addi	a5,s0,-48
    70000fde:	fc843583          	ld	a1,-56(s0)
    70000fe2:	853e                	mv	a0,a5
    70000fe4:	fffff097          	auipc	ra,0xfffff
    70000fe8:	16a080e7          	jalr	362(ra) # 7000014e <strcpy>
/embryos/chapter12/apps/dir.c:32
    user_write(ROOT_DIR, unused * sizeof(e), &e, sizeof(e));
    70000fec:	fec42783          	lw	a5,-20(s0)
    70000ff0:	0047979b          	slliw	a5,a5,0x4
    70000ff4:	2781                	sext.w	a5,a5
    70000ff6:	873e                	mv	a4,a5
    70000ff8:	fd040793          	addi	a5,s0,-48
    70000ffc:	46c1                	li	a3,16
    70000ffe:	863e                	mv	a2,a5
    70001000:	85ba                	mv	a1,a4
    70001002:	4505                	li	a0,1
    70001004:	fffff097          	auipc	ra,0xfffff
    70001008:	048080e7          	jalr	72(ra) # 7000004c <user_write>
/embryos/chapter12/apps/dir.c:33
    return file;
    7000100c:	fc442783          	lw	a5,-60(s0)
/embryos/chapter12/apps/dir.c:34
}
    70001010:	853e                	mv	a0,a5
    70001012:	70e2                	ld	ra,56(sp)
    70001014:	7442                	ld	s0,48(sp)
    70001016:	6121                	addi	sp,sp,64
    70001018:	8082                	ret

000000007000101a <dir_delete>:
dir_delete():
/embryos/chapter12/apps/dir.c:36

void dir_delete(const char *name) {
    7000101a:	7139                	addi	sp,sp,-64
    7000101c:	fc06                	sd	ra,56(sp)
    7000101e:	f822                	sd	s0,48(sp)
    70001020:	0080                	addi	s0,sp,64
    70001022:	fca43423          	sd	a0,-56(s0)
/embryos/chapter12/apps/dir.c:38
    struct dirent e;
    int n = user_size(ROOT_DIR) / sizeof e;
    70001026:	4505                	li	a0,1
    70001028:	fffff097          	auipc	ra,0xfffff
    7000102c:	02c080e7          	jalr	44(ra) # 70000054 <user_size>
    70001030:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:38 (discriminator 1)
    70001032:	8391                	srli	a5,a5,0x4
    70001034:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/dir.c:39
    for (int i = 0; i < n; i++) {
    70001038:	fe042623          	sw	zero,-20(s0)
    7000103c:	a851                	j	700010d0 <dir_delete+0xb6>
/embryos/chapter12/apps/dir.c:40
        user_read(ROOT_DIR, i * sizeof e, &e, sizeof e);
    7000103e:	fec42783          	lw	a5,-20(s0)
    70001042:	0047979b          	slliw	a5,a5,0x4
    70001046:	2781                	sext.w	a5,a5
    70001048:	873e                	mv	a4,a5
    7000104a:	fd840793          	addi	a5,s0,-40
    7000104e:	46c1                	li	a3,16
    70001050:	863e                	mv	a2,a5
    70001052:	85ba                	mv	a1,a4
    70001054:	4505                	li	a0,1
    70001056:	fffff097          	auipc	ra,0xfffff
    7000105a:	fee080e7          	jalr	-18(ra) # 70000044 <user_read>
/embryos/chapter12/apps/dir.c:41
        e.name[NAME_LEN - 1] = 0;
    7000105e:	fe0402a3          	sb	zero,-27(s0)
/embryos/chapter12/apps/dir.c:42
        if (e.file != 0) {
    70001062:	fe645783          	lhu	a5,-26(s0)
    70001066:	c3a5                	beqz	a5,700010c6 <dir_delete+0xac>
/embryos/chapter12/apps/dir.c:43
            e.name[NAME_LEN - 1] = 0;
    70001068:	fe0402a3          	sb	zero,-27(s0)
/embryos/chapter12/apps/dir.c:44
            if (strcmp(e.name, name) == 0) {
    7000106c:	fd840793          	addi	a5,s0,-40
    70001070:	fc843583          	ld	a1,-56(s0)
    70001074:	853e                	mv	a0,a5
    70001076:	fffff097          	auipc	ra,0xfffff
    7000107a:	030080e7          	jalr	48(ra) # 700000a6 <strcmp>
    7000107e:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:44 (discriminator 1)
    70001080:	e3b9                	bnez	a5,700010c6 <dir_delete+0xac>
/embryos/chapter12/apps/dir.c:45
                user_delete(e.file);
    70001082:	fe645783          	lhu	a5,-26(s0)
    70001086:	2781                	sext.w	a5,a5
    70001088:	853e                	mv	a0,a5
    7000108a:	fffff097          	auipc	ra,0xfffff
    7000108e:	fd2080e7          	jalr	-46(ra) # 7000005c <user_delete>
/embryos/chapter12/apps/dir.c:46
                memset(&e, 0, sizeof(e));
    70001092:	fd840793          	addi	a5,s0,-40
    70001096:	4641                	li	a2,16
    70001098:	4581                	li	a1,0
    7000109a:	853e                	mv	a0,a5
    7000109c:	fffff097          	auipc	ra,0xfffff
    700010a0:	52c080e7          	jalr	1324(ra) # 700005c8 <memset>
/embryos/chapter12/apps/dir.c:47
                user_write(ROOT_DIR, i * sizeof e, &e, sizeof e);
    700010a4:	fec42783          	lw	a5,-20(s0)
    700010a8:	0047979b          	slliw	a5,a5,0x4
    700010ac:	2781                	sext.w	a5,a5
    700010ae:	873e                	mv	a4,a5
    700010b0:	fd840793          	addi	a5,s0,-40
    700010b4:	46c1                	li	a3,16
    700010b6:	863e                	mv	a2,a5
    700010b8:	85ba                	mv	a1,a4
    700010ba:	4505                	li	a0,1
    700010bc:	fffff097          	auipc	ra,0xfffff
    700010c0:	f90080e7          	jalr	-112(ra) # 7000004c <user_write>
/embryos/chapter12/apps/dir.c:48
                break;
    700010c4:	a005                	j	700010e4 <dir_delete+0xca>
/embryos/chapter12/apps/dir.c:39 (discriminator 2)
    for (int i = 0; i < n; i++) {
    700010c6:	fec42783          	lw	a5,-20(s0)
    700010ca:	2785                	addiw	a5,a5,1
    700010cc:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/dir.c:39 (discriminator 1)
    700010d0:	fec42783          	lw	a5,-20(s0)
    700010d4:	873e                	mv	a4,a5
    700010d6:	fe842783          	lw	a5,-24(s0)
    700010da:	2701                	sext.w	a4,a4
    700010dc:	2781                	sext.w	a5,a5
    700010de:	f6f740e3          	blt	a4,a5,7000103e <dir_delete+0x24>
/embryos/chapter12/apps/dir.c:52
            }
        }
    }
}
    700010e2:	0001                	nop
    700010e4:	0001                	nop
    700010e6:	70e2                	ld	ra,56(sp)
    700010e8:	7442                	ld	s0,48(sp)
    700010ea:	6121                	addi	sp,sp,64
    700010ec:	8082                	ret

00000000700010ee <dir_list>:
dir_list():
/embryos/chapter12/apps/dir.c:54

void dir_list(void (*fn)(const char *name, int file)) {
    700010ee:	7139                	addi	sp,sp,-64
    700010f0:	fc06                	sd	ra,56(sp)
    700010f2:	f822                	sd	s0,48(sp)
    700010f4:	0080                	addi	s0,sp,64
    700010f6:	fca43423          	sd	a0,-56(s0)
/embryos/chapter12/apps/dir.c:56
    struct dirent e;
    int n = user_size(ROOT_DIR) / sizeof e;
    700010fa:	4505                	li	a0,1
    700010fc:	fffff097          	auipc	ra,0xfffff
    70001100:	f58080e7          	jalr	-168(ra) # 70000054 <user_size>
    70001104:	87aa                	mv	a5,a0
/embryos/chapter12/apps/dir.c:56 (discriminator 1)
    70001106:	8391                	srli	a5,a5,0x4
    70001108:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/dir.c:57
    for (int i = 0; i < n; i++) {
    7000110c:	fe042623          	sw	zero,-20(s0)
    70001110:	a0b1                	j	7000115c <dir_list+0x6e>
/embryos/chapter12/apps/dir.c:58
        user_read(ROOT_DIR, i * sizeof e, &e, sizeof e);
    70001112:	fec42783          	lw	a5,-20(s0)
    70001116:	0047979b          	slliw	a5,a5,0x4
    7000111a:	2781                	sext.w	a5,a5
    7000111c:	873e                	mv	a4,a5
    7000111e:	fd840793          	addi	a5,s0,-40
    70001122:	46c1                	li	a3,16
    70001124:	863e                	mv	a2,a5
    70001126:	85ba                	mv	a1,a4
    70001128:	4505                	li	a0,1
    7000112a:	fffff097          	auipc	ra,0xfffff
    7000112e:	f1a080e7          	jalr	-230(ra) # 70000044 <user_read>
/embryos/chapter12/apps/dir.c:59
        if (e.file != 0) {
    70001132:	fe645783          	lhu	a5,-26(s0)
    70001136:	cf91                	beqz	a5,70001152 <dir_list+0x64>
/embryos/chapter12/apps/dir.c:60
            e.name[NAME_LEN - 1] = 0;
    70001138:	fe0402a3          	sb	zero,-27(s0)
/embryos/chapter12/apps/dir.c:61
            fn(e.name, e.file);
    7000113c:	fe645783          	lhu	a5,-26(s0)
    70001140:	0007869b          	sext.w	a3,a5
    70001144:	fd840713          	addi	a4,s0,-40
    70001148:	fc843783          	ld	a5,-56(s0)
    7000114c:	85b6                	mv	a1,a3
    7000114e:	853a                	mv	a0,a4
    70001150:	9782                	jalr	a5
/embryos/chapter12/apps/dir.c:57 (discriminator 2)
    for (int i = 0; i < n; i++) {
    70001152:	fec42783          	lw	a5,-20(s0)
    70001156:	2785                	addiw	a5,a5,1
    70001158:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/dir.c:57 (discriminator 1)
    7000115c:	fec42783          	lw	a5,-20(s0)
    70001160:	873e                	mv	a4,a5
    70001162:	fe842783          	lw	a5,-24(s0)
    70001166:	2701                	sext.w	a4,a4
    70001168:	2781                	sext.w	a5,a5
    7000116a:	faf744e3          	blt	a4,a5,70001112 <dir_list+0x24>
/embryos/chapter12/apps/dir.c:64
        }
    }
}
    7000116e:	0001                	nop
    70001170:	0001                	nop
    70001172:	70e2                	ld	ra,56(sp)
    70001174:	7442                	ld	s0,48(sp)
    70001176:	6121                	addi	sp,sp,64
    70001178:	8082                	ret

000000007000117a <idx>:
idx():
/embryos/chapter12/apps/blockpixel.c:12
#define BP_IS_DIRTY(b)        ((b) & BP_DIRTY_MASK)
#define BP_SET_DIRTY(b)       ((b) |=  BP_DIRTY_MASK)
#define BP_CLEAR_DIRTY(b)     ((b) &= ~BP_DIRTY_MASK)
#define BP_MAKE(color, dirty) (((color)&7) | ((dirty)?BP_DIRTY_MASK:0))

static inline int idx(struct bp *bp, int px, int py) {
    7000117a:	1101                	addi	sp,sp,-32
    7000117c:	ec06                	sd	ra,24(sp)
    7000117e:	e822                	sd	s0,16(sp)
    70001180:	1000                	addi	s0,sp,32
    70001182:	fea43423          	sd	a0,-24(s0)
    70001186:	87ae                	mv	a5,a1
    70001188:	8732                	mv	a4,a2
    7000118a:	fef42223          	sw	a5,-28(s0)
    7000118e:	87ba                	mv	a5,a4
    70001190:	fef42023          	sw	a5,-32(s0)
/embryos/chapter12/apps/blockpixel.c:13
    return py * bp->width + px;
    70001194:	fe843783          	ld	a5,-24(s0)
    70001198:	479c                	lw	a5,8(a5)
    7000119a:	fe042703          	lw	a4,-32(s0)
    7000119e:	02f707bb          	mulw	a5,a4,a5
    700011a2:	2781                	sext.w	a5,a5
    700011a4:	fe442703          	lw	a4,-28(s0)
    700011a8:	9fb9                	addw	a5,a5,a4
    700011aa:	2781                	sext.w	a5,a5
/embryos/chapter12/apps/blockpixel.c:14
}
    700011ac:	853e                	mv	a0,a5
    700011ae:	60e2                	ld	ra,24(sp)
    700011b0:	6442                	ld	s0,16(sp)
    700011b2:	6105                	addi	sp,sp,32
    700011b4:	8082                	ret

00000000700011b6 <bp_render_pair>:
bp_render_pair():
/embryos/chapter12/apps/blockpixel.c:17

static inline void bp_render_pair(uint8_t top_color, uint8_t bottom_color,
                                  int *code, int *fg, int *bg) {
    700011b6:	7179                	addi	sp,sp,-48
    700011b8:	f406                	sd	ra,40(sp)
    700011ba:	f022                	sd	s0,32(sp)
    700011bc:	1800                	addi	s0,sp,48
    700011be:	87aa                	mv	a5,a0
    700011c0:	fec43023          	sd	a2,-32(s0)
    700011c4:	fcd43c23          	sd	a3,-40(s0)
    700011c8:	fce43823          	sd	a4,-48(s0)
    700011cc:	fef407a3          	sb	a5,-17(s0)
    700011d0:	87ae                	mv	a5,a1
    700011d2:	fef40723          	sb	a5,-18(s0)
/embryos/chapter12/apps/blockpixel.c:18
    if (top_color == bottom_color) { // Entire cell drawn using background
    700011d6:	fef44783          	lbu	a5,-17(s0)
    700011da:	873e                	mv	a4,a5
    700011dc:	fee44783          	lbu	a5,-18(s0)
    700011e0:	0ff77713          	zext.b	a4,a4
    700011e4:	0ff7f793          	zext.b	a5,a5
    700011e8:	02f71563          	bne	a4,a5,70001212 <bp_render_pair+0x5c>
/embryos/chapter12/apps/blockpixel.c:19
        *code = 0; // space with bg filling the full cell
    700011ec:	fe043783          	ld	a5,-32(s0)
    700011f0:	0007a023          	sw	zero,0(a5)
/embryos/chapter12/apps/blockpixel.c:20
        *fg = top_color; *bg = top_color;
    700011f4:	fef44783          	lbu	a5,-17(s0)
    700011f8:	0007871b          	sext.w	a4,a5
    700011fc:	fd843783          	ld	a5,-40(s0)
    70001200:	c398                	sw	a4,0(a5)
    70001202:	fef44783          	lbu	a5,-17(s0)
    70001206:	0007871b          	sext.w	a4,a5
    7000120a:	fd043783          	ld	a5,-48(s0)
    7000120e:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:26
    }
    else { // Mixed colors: choose canonical representation
        *code = 1; // top pixel = fg, bottom pixel = bg
        *fg = top_color; *bg = bottom_color;
    }
}
    70001210:	a01d                	j	70001236 <bp_render_pair+0x80>
/embryos/chapter12/apps/blockpixel.c:23
        *code = 1; // top pixel = fg, bottom pixel = bg
    70001212:	fe043783          	ld	a5,-32(s0)
    70001216:	4705                	li	a4,1
    70001218:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:24
        *fg = top_color; *bg = bottom_color;
    7000121a:	fef44783          	lbu	a5,-17(s0)
    7000121e:	0007871b          	sext.w	a4,a5
    70001222:	fd843783          	ld	a5,-40(s0)
    70001226:	c398                	sw	a4,0(a5)
    70001228:	fee44783          	lbu	a5,-18(s0)
    7000122c:	0007871b          	sext.w	a4,a5
    70001230:	fd043783          	ld	a5,-48(s0)
    70001234:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:26
}
    70001236:	0001                	nop
    70001238:	70a2                	ld	ra,40(sp)
    7000123a:	7402                	ld	s0,32(sp)
    7000123c:	6145                	addi	sp,sp,48
    7000123e:	8082                	ret

0000000070001240 <bp_init>:
bp_init():
/embryos/chapter12/apps/blockpixel.c:29

void bp_init(struct bp *bp, int x, int y, int width, int height,
                                 uint8_t *buffer) {
    70001240:	7139                	addi	sp,sp,-64
    70001242:	fc06                	sd	ra,56(sp)
    70001244:	f822                	sd	s0,48(sp)
    70001246:	0080                	addi	s0,sp,64
    70001248:	fca43c23          	sd	a0,-40(s0)
    7000124c:	fcf43023          	sd	a5,-64(s0)
    70001250:	87ae                	mv	a5,a1
    70001252:	fcf42a23          	sw	a5,-44(s0)
    70001256:	87b2                	mv	a5,a2
    70001258:	fcf42823          	sw	a5,-48(s0)
    7000125c:	87b6                	mv	a5,a3
    7000125e:	fcf42623          	sw	a5,-52(s0)
    70001262:	87ba                	mv	a5,a4
    70001264:	fcf42423          	sw	a5,-56(s0)
/embryos/chapter12/apps/blockpixel.c:30
    bp->x = x; bp->y = y; bp->width = width; bp->height = height;
    70001268:	fd843783          	ld	a5,-40(s0)
    7000126c:	fd442703          	lw	a4,-44(s0)
    70001270:	c398                	sw	a4,0(a5)
    70001272:	fd843783          	ld	a5,-40(s0)
    70001276:	fd042703          	lw	a4,-48(s0)
    7000127a:	c3d8                	sw	a4,4(a5)
    7000127c:	fd843783          	ld	a5,-40(s0)
    70001280:	fcc42703          	lw	a4,-52(s0)
    70001284:	c798                	sw	a4,8(a5)
    70001286:	fd843783          	ld	a5,-40(s0)
    7000128a:	fc842703          	lw	a4,-56(s0)
    7000128e:	c7d8                	sw	a4,12(a5)
/embryos/chapter12/apps/blockpixel.c:31
    bp->buf = buffer;
    70001290:	fd843783          	ld	a5,-40(s0)
    70001294:	fc043703          	ld	a4,-64(s0)
    70001298:	eb98                	sd	a4,16(a5)
/embryos/chapter12/apps/blockpixel.c:32
    for (int i = 0; i < width * height; i++) bp->buf[i] = BP_MAKE(0, 1);
    7000129a:	fe042623          	sw	zero,-20(s0)
    7000129e:	a839                	j	700012bc <bp_init+0x7c>
/embryos/chapter12/apps/blockpixel.c:32 (discriminator 3)
    700012a0:	fd843783          	ld	a5,-40(s0)
    700012a4:	6b98                	ld	a4,16(a5)
    700012a6:	fec42783          	lw	a5,-20(s0)
    700012aa:	97ba                	add	a5,a5,a4
    700012ac:	4721                	li	a4,8
    700012ae:	00e78023          	sb	a4,0(a5)
    700012b2:	fec42783          	lw	a5,-20(s0)
    700012b6:	2785                	addiw	a5,a5,1
    700012b8:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/blockpixel.c:32 (discriminator 1)
    700012bc:	fcc42783          	lw	a5,-52(s0)
    700012c0:	873e                	mv	a4,a5
    700012c2:	fc842783          	lw	a5,-56(s0)
    700012c6:	02f707bb          	mulw	a5,a4,a5
    700012ca:	2781                	sext.w	a5,a5
    700012cc:	fec42703          	lw	a4,-20(s0)
    700012d0:	2701                	sext.w	a4,a4
    700012d2:	fcf747e3          	blt	a4,a5,700012a0 <bp_init+0x60>
/embryos/chapter12/apps/blockpixel.c:33
}
    700012d6:	0001                	nop
    700012d8:	0001                	nop
    700012da:	70e2                	ld	ra,56(sp)
    700012dc:	7442                	ld	s0,48(sp)
    700012de:	6121                	addi	sp,sp,64
    700012e0:	8082                	ret

00000000700012e2 <bp_put>:
bp_put():
/embryos/chapter12/apps/blockpixel.c:35

void bp_put(struct bp *bp, int px, int py, uint8_t color, enum bp_mode mode) {
    700012e2:	711d                	addi	sp,sp,-96
    700012e4:	ec86                	sd	ra,88(sp)
    700012e6:	e8a2                	sd	s0,80(sp)
    700012e8:	e4a6                	sd	s1,72(sp)
    700012ea:	e0ca                	sd	s2,64(sp)
    700012ec:	1080                	addi	s0,sp,96
    700012ee:	faa43c23          	sd	a0,-72(s0)
    700012f2:	87ae                	mv	a5,a1
    700012f4:	faf42a23          	sw	a5,-76(s0)
    700012f8:	87b2                	mv	a5,a2
    700012fa:	faf42823          	sw	a5,-80(s0)
    700012fe:	87b6                	mv	a5,a3
    70001300:	faf407a3          	sb	a5,-81(s0)
    70001304:	87ba                	mv	a5,a4
    70001306:	faf42423          	sw	a5,-88(s0)
/embryos/chapter12/apps/blockpixel.c:36
    if (px < 0 || px >= bp->width) return;
    7000130a:	fb442783          	lw	a5,-76(s0)
    7000130e:	2781                	sext.w	a5,a5
    70001310:	2007ca63          	bltz	a5,70001524 <bp_put+0x242>
/embryos/chapter12/apps/blockpixel.c:36 (discriminator 2)
    70001314:	fb843783          	ld	a5,-72(s0)
    70001318:	479c                	lw	a5,8(a5)
    7000131a:	fb442703          	lw	a4,-76(s0)
    7000131e:	2701                	sext.w	a4,a4
    70001320:	20f75263          	bge	a4,a5,70001524 <bp_put+0x242>
/embryos/chapter12/apps/blockpixel.c:37
    if (py < 0 || py >= bp->height) return;
    70001324:	fb042783          	lw	a5,-80(s0)
    70001328:	2781                	sext.w	a5,a5
    7000132a:	1e07cf63          	bltz	a5,70001528 <bp_put+0x246>
/embryos/chapter12/apps/blockpixel.c:37 (discriminator 2)
    7000132e:	fb843783          	ld	a5,-72(s0)
    70001332:	47dc                	lw	a5,12(a5)
    70001334:	fb042703          	lw	a4,-80(s0)
    70001338:	2701                	sext.w	a4,a4
    7000133a:	1ef75763          	bge	a4,a5,70001528 <bp_put+0x246>
/embryos/chapter12/apps/blockpixel.c:38
    bp->buf[idx(bp, px, py)] = BP_MAKE(color, 1);
    7000133e:	faf40783          	lb	a5,-81(s0)
    70001342:	8b9d                	andi	a5,a5,7
    70001344:	0187979b          	slliw	a5,a5,0x18
    70001348:	4187d79b          	sraiw	a5,a5,0x18
    7000134c:	0087e793          	ori	a5,a5,8
    70001350:	0187991b          	slliw	s2,a5,0x18
    70001354:	4189591b          	sraiw	s2,s2,0x18
    70001358:	fb843783          	ld	a5,-72(s0)
    7000135c:	6b84                	ld	s1,16(a5)
    7000135e:	fb042703          	lw	a4,-80(s0)
    70001362:	fb442783          	lw	a5,-76(s0)
    70001366:	863a                	mv	a2,a4
    70001368:	85be                	mv	a1,a5
    7000136a:	fb843503          	ld	a0,-72(s0)
    7000136e:	00000097          	auipc	ra,0x0
    70001372:	e0c080e7          	jalr	-500(ra) # 7000117a <idx>
    70001376:	87aa                	mv	a5,a0
/embryos/chapter12/apps/blockpixel.c:38 (discriminator 1)
    70001378:	97a6                	add	a5,a5,s1
    7000137a:	0ff97713          	zext.b	a4,s2
    7000137e:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:39
    if (mode == BP_LAZY) return;
    70001382:	fa842783          	lw	a5,-88(s0)
    70001386:	0007871b          	sext.w	a4,a5
    7000138a:	4785                	li	a5,1
    7000138c:	1af70063          	beq	a4,a5,7000152c <bp_put+0x24a>
/embryos/chapter12/apps/blockpixel.c:40
    int cell_x = px, cell_y = py / 2;
    70001390:	fb442783          	lw	a5,-76(s0)
    70001394:	fcf42e23          	sw	a5,-36(s0)
    70001398:	fb042783          	lw	a5,-80(s0)
    7000139c:	01f7d71b          	srliw	a4,a5,0x1f
    700013a0:	9fb9                	addw	a5,a5,a4
    700013a2:	4017d79b          	sraiw	a5,a5,0x1
    700013a6:	fcf42c23          	sw	a5,-40(s0)
/embryos/chapter12/apps/blockpixel.c:41
    int top_index    = (cell_y * 2) * bp->width + cell_x;
    700013aa:	fb843783          	ld	a5,-72(s0)
    700013ae:	479c                	lw	a5,8(a5)
    700013b0:	fd842703          	lw	a4,-40(s0)
    700013b4:	02f707bb          	mulw	a5,a4,a5
    700013b8:	2781                	sext.w	a5,a5
    700013ba:	0017979b          	slliw	a5,a5,0x1
    700013be:	2781                	sext.w	a5,a5
    700013c0:	fdc42703          	lw	a4,-36(s0)
    700013c4:	9fb9                	addw	a5,a5,a4
    700013c6:	fcf42a23          	sw	a5,-44(s0)
/embryos/chapter12/apps/blockpixel.c:42
    int bottom_index = top_index + bp->width;
    700013ca:	fb843783          	ld	a5,-72(s0)
    700013ce:	479c                	lw	a5,8(a5)
    700013d0:	fd442703          	lw	a4,-44(s0)
    700013d4:	9fb9                	addw	a5,a5,a4
    700013d6:	fcf42823          	sw	a5,-48(s0)
/embryos/chapter12/apps/blockpixel.c:43
    uint8_t top_color    = BP_GET_COLOR(bp->buf[top_index]);
    700013da:	fb843783          	ld	a5,-72(s0)
    700013de:	6b98                	ld	a4,16(a5)
    700013e0:	fd442783          	lw	a5,-44(s0)
    700013e4:	97ba                	add	a5,a5,a4
    700013e6:	0007c783          	lbu	a5,0(a5)
    700013ea:	8b9d                	andi	a5,a5,7
    700013ec:	fcf407a3          	sb	a5,-49(s0)
/embryos/chapter12/apps/blockpixel.c:44
    uint8_t bottom_color = BP_GET_COLOR(bp->buf[bottom_index]);
    700013f0:	fb843783          	ld	a5,-72(s0)
    700013f4:	6b98                	ld	a4,16(a5)
    700013f6:	fd042783          	lw	a5,-48(s0)
    700013fa:	97ba                	add	a5,a5,a4
    700013fc:	0007c783          	lbu	a5,0(a5)
    70001400:	8b9d                	andi	a5,a5,7
    70001402:	fcf40723          	sb	a5,-50(s0)
/embryos/chapter12/apps/blockpixel.c:46
    int code, fg, bg;
    bp_render_pair(top_color, bottom_color, &code, &fg, &bg);
    70001406:	fc040713          	addi	a4,s0,-64
    7000140a:	fc440693          	addi	a3,s0,-60
    7000140e:	fc840613          	addi	a2,s0,-56
    70001412:	fce44583          	lbu	a1,-50(s0)
    70001416:	fcf44783          	lbu	a5,-49(s0)
    7000141a:	853e                	mv	a0,a5
    7000141c:	00000097          	auipc	ra,0x0
    70001420:	d9a080e7          	jalr	-614(ra) # 700011b6 <bp_render_pair>
/embryos/chapter12/apps/blockpixel.c:47
    user_put(bp->x + cell_x, bp->y + cell_y,
    70001424:	fb843783          	ld	a5,-72(s0)
    70001428:	439c                	lw	a5,0(a5)
    7000142a:	fdc42703          	lw	a4,-36(s0)
    7000142e:	9fb9                	addw	a5,a5,a4
    70001430:	0007851b          	sext.w	a0,a5
    70001434:	fb843783          	ld	a5,-72(s0)
    70001438:	43dc                	lw	a5,4(a5)
    7000143a:	fd842703          	lw	a4,-40(s0)
    7000143e:	9fb9                	addw	a5,a5,a4
    70001440:	0007859b          	sext.w	a1,a5
/embryos/chapter12/apps/blockpixel.c:48
             CELL_EXT(CELL_BLOCK, code, fg, bg));
    70001444:	fc842783          	lw	a5,-56(s0)
    70001448:	0107979b          	slliw	a5,a5,0x10
    7000144c:	4107d79b          	sraiw	a5,a5,0x10
    70001450:	0ff7f793          	zext.b	a5,a5
    70001454:	0107971b          	slliw	a4,a5,0x10
    70001458:	4107571b          	sraiw	a4,a4,0x10
    7000145c:	fc442783          	lw	a5,-60(s0)
    70001460:	0107979b          	slliw	a5,a5,0x10
    70001464:	4107d79b          	sraiw	a5,a5,0x10
    70001468:	0087979b          	slliw	a5,a5,0x8
    7000146c:	0107979b          	slliw	a5,a5,0x10
    70001470:	4107d79b          	sraiw	a5,a5,0x10
    70001474:	7007f793          	andi	a5,a5,1792
    70001478:	0107979b          	slliw	a5,a5,0x10
    7000147c:	4107d79b          	sraiw	a5,a5,0x10
    70001480:	8fd9                	or	a5,a5,a4
    70001482:	0107971b          	slliw	a4,a5,0x10
    70001486:	4107571b          	sraiw	a4,a4,0x10
    7000148a:	fc042783          	lw	a5,-64(s0)
    7000148e:	0107979b          	slliw	a5,a5,0x10
    70001492:	4107d79b          	sraiw	a5,a5,0x10
    70001496:	00b7979b          	slliw	a5,a5,0xb
    7000149a:	0107969b          	slliw	a3,a5,0x10
    7000149e:	4106d69b          	sraiw	a3,a3,0x10
    700014a2:	6791                	lui	a5,0x4
    700014a4:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    700014a8:	8ff5                	and	a5,a5,a3
    700014aa:	0107979b          	slliw	a5,a5,0x10
    700014ae:	4107d79b          	sraiw	a5,a5,0x10
    700014b2:	8fd9                	or	a5,a5,a4
    700014b4:	0107971b          	slliw	a4,a5,0x10
    700014b8:	4107571b          	sraiw	a4,a4,0x10
    700014bc:	6791                	lui	a5,0x4
    700014be:	8fd9                	or	a5,a5,a4
    700014c0:	0107979b          	slliw	a5,a5,0x10
    700014c4:	4107d79b          	sraiw	a5,a5,0x10
/embryos/chapter12/apps/blockpixel.c:47
    user_put(bp->x + cell_x, bp->y + cell_y,
    700014c8:	17c2                	slli	a5,a5,0x30
    700014ca:	93c1                	srli	a5,a5,0x30
    700014cc:	863e                	mv	a2,a5
    700014ce:	fffff097          	auipc	ra,0xfffff
    700014d2:	b5e080e7          	jalr	-1186(ra) # 7000002c <user_put>
/embryos/chapter12/apps/blockpixel.c:49
    BP_CLEAR_DIRTY(bp->buf[top_index]);
    700014d6:	fb843783          	ld	a5,-72(s0)
    700014da:	6b98                	ld	a4,16(a5)
    700014dc:	fd442783          	lw	a5,-44(s0)
    700014e0:	97ba                	add	a5,a5,a4
    700014e2:	0007c703          	lbu	a4,0(a5) # 4000 <text_file_end+0xd7e>
    700014e6:	fb843783          	ld	a5,-72(s0)
    700014ea:	6b94                	ld	a3,16(a5)
    700014ec:	fd442783          	lw	a5,-44(s0)
    700014f0:	97b6                	add	a5,a5,a3
    700014f2:	9b5d                	andi	a4,a4,-9
    700014f4:	0ff77713          	zext.b	a4,a4
    700014f8:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:50
    BP_CLEAR_DIRTY(bp->buf[bottom_index]);
    700014fc:	fb843783          	ld	a5,-72(s0)
    70001500:	6b98                	ld	a4,16(a5)
    70001502:	fd042783          	lw	a5,-48(s0)
    70001506:	97ba                	add	a5,a5,a4
    70001508:	0007c703          	lbu	a4,0(a5)
    7000150c:	fb843783          	ld	a5,-72(s0)
    70001510:	6b94                	ld	a3,16(a5)
    70001512:	fd042783          	lw	a5,-48(s0)
    70001516:	97b6                	add	a5,a5,a3
    70001518:	9b5d                	andi	a4,a4,-9
    7000151a:	0ff77713          	zext.b	a4,a4
    7000151e:	00e78023          	sb	a4,0(a5)
    70001522:	a031                	j	7000152e <bp_put+0x24c>
/embryos/chapter12/apps/blockpixel.c:36
    if (px < 0 || px >= bp->width) return;
    70001524:	0001                	nop
    70001526:	a021                	j	7000152e <bp_put+0x24c>
/embryos/chapter12/apps/blockpixel.c:37
    if (py < 0 || py >= bp->height) return;
    70001528:	0001                	nop
    7000152a:	a011                	j	7000152e <bp_put+0x24c>
/embryos/chapter12/apps/blockpixel.c:39
    if (mode == BP_LAZY) return;
    7000152c:	0001                	nop
/embryos/chapter12/apps/blockpixel.c:51
}
    7000152e:	60e6                	ld	ra,88(sp)
    70001530:	6446                	ld	s0,80(sp)
    70001532:	64a6                	ld	s1,72(sp)
    70001534:	6906                	ld	s2,64(sp)
    70001536:	6125                	addi	sp,sp,96
    70001538:	8082                	ret

000000007000153a <bp_flush>:
bp_flush():
/embryos/chapter12/apps/blockpixel.c:53

void bp_flush(struct bp *bp) {
    7000153a:	7139                	addi	sp,sp,-64
    7000153c:	fc06                	sd	ra,56(sp)
    7000153e:	f822                	sd	s0,48(sp)
    70001540:	0080                	addi	s0,sp,64
    70001542:	fca43423          	sd	a0,-56(s0)
/embryos/chapter12/apps/blockpixel.c:54
    for (int cell_y = 0; cell_y < bp->height/2; cell_y++)
    70001546:	fe042623          	sw	zero,-20(s0)
    7000154a:	aae9                	j	70001724 <bp_flush+0x1ea>
/embryos/chapter12/apps/blockpixel.c:55
        for (int cell_x = 0; cell_x < bp->width; cell_x++) {
    7000154c:	fe042423          	sw	zero,-24(s0)
    70001550:	aa6d                	j	7000170a <bp_flush+0x1d0>
/embryos/chapter12/apps/blockpixel.c:56
            int top_index    = (cell_y * 2) * bp->width + cell_x;
    70001552:	fc843783          	ld	a5,-56(s0)
    70001556:	479c                	lw	a5,8(a5)
    70001558:	fec42703          	lw	a4,-20(s0)
    7000155c:	02f707bb          	mulw	a5,a4,a5
    70001560:	2781                	sext.w	a5,a5
    70001562:	0017979b          	slliw	a5,a5,0x1
    70001566:	2781                	sext.w	a5,a5
    70001568:	fe842703          	lw	a4,-24(s0)
    7000156c:	9fb9                	addw	a5,a5,a4
    7000156e:	fef42223          	sw	a5,-28(s0)
/embryos/chapter12/apps/blockpixel.c:57
            int bottom_index = top_index + bp->width;
    70001572:	fc843783          	ld	a5,-56(s0)
    70001576:	479c                	lw	a5,8(a5)
    70001578:	fe442703          	lw	a4,-28(s0)
    7000157c:	9fb9                	addw	a5,a5,a4
    7000157e:	fef42023          	sw	a5,-32(s0)
/embryos/chapter12/apps/blockpixel.c:58
            if (!BP_IS_DIRTY(bp->buf[top_index]) &&
    70001582:	fc843783          	ld	a5,-56(s0)
    70001586:	6b98                	ld	a4,16(a5)
    70001588:	fe442783          	lw	a5,-28(s0)
    7000158c:	97ba                	add	a5,a5,a4
    7000158e:	0007c783          	lbu	a5,0(a5)
    70001592:	2781                	sext.w	a5,a5
    70001594:	8ba1                	andi	a5,a5,8
    70001596:	2781                	sext.w	a5,a5
    70001598:	ef91                	bnez	a5,700015b4 <bp_flush+0x7a>
/embryos/chapter12/apps/blockpixel.c:59
                !BP_IS_DIRTY(bp->buf[bottom_index])) continue;
    7000159a:	fc843783          	ld	a5,-56(s0)
    7000159e:	6b98                	ld	a4,16(a5)
    700015a0:	fe042783          	lw	a5,-32(s0)
    700015a4:	97ba                	add	a5,a5,a4
    700015a6:	0007c783          	lbu	a5,0(a5)
    700015aa:	2781                	sext.w	a5,a5
    700015ac:	8ba1                	andi	a5,a5,8
    700015ae:	2781                	sext.w	a5,a5
/embryos/chapter12/apps/blockpixel.c:58 (discriminator 1)
            if (!BP_IS_DIRTY(bp->buf[top_index]) &&
    700015b0:	14078763          	beqz	a5,700016fe <bp_flush+0x1c4>
/embryos/chapter12/apps/blockpixel.c:60
            uint8_t top_color    = BP_GET_COLOR(bp->buf[top_index]);
    700015b4:	fc843783          	ld	a5,-56(s0)
    700015b8:	6b98                	ld	a4,16(a5)
    700015ba:	fe442783          	lw	a5,-28(s0)
    700015be:	97ba                	add	a5,a5,a4
    700015c0:	0007c783          	lbu	a5,0(a5)
    700015c4:	8b9d                	andi	a5,a5,7
    700015c6:	fcf40fa3          	sb	a5,-33(s0)
/embryos/chapter12/apps/blockpixel.c:61
            uint8_t bottom_color = BP_GET_COLOR(bp->buf[bottom_index]);
    700015ca:	fc843783          	ld	a5,-56(s0)
    700015ce:	6b98                	ld	a4,16(a5)
    700015d0:	fe042783          	lw	a5,-32(s0)
    700015d4:	97ba                	add	a5,a5,a4
    700015d6:	0007c783          	lbu	a5,0(a5)
    700015da:	8b9d                	andi	a5,a5,7
    700015dc:	fcf40f23          	sb	a5,-34(s0)
/embryos/chapter12/apps/blockpixel.c:63
            int code, fg, bg;
            bp_render_pair(top_color, bottom_color, &code, &fg, &bg);
    700015e0:	fd040713          	addi	a4,s0,-48
    700015e4:	fd440693          	addi	a3,s0,-44
    700015e8:	fd840613          	addi	a2,s0,-40
    700015ec:	fde44583          	lbu	a1,-34(s0)
    700015f0:	fdf44783          	lbu	a5,-33(s0)
    700015f4:	853e                	mv	a0,a5
    700015f6:	00000097          	auipc	ra,0x0
    700015fa:	bc0080e7          	jalr	-1088(ra) # 700011b6 <bp_render_pair>
/embryos/chapter12/apps/blockpixel.c:64
            user_put(bp->x + cell_x, bp->y + cell_y,
    700015fe:	fc843783          	ld	a5,-56(s0)
    70001602:	439c                	lw	a5,0(a5)
    70001604:	fe842703          	lw	a4,-24(s0)
    70001608:	9fb9                	addw	a5,a5,a4
    7000160a:	0007851b          	sext.w	a0,a5
    7000160e:	fc843783          	ld	a5,-56(s0)
    70001612:	43dc                	lw	a5,4(a5)
    70001614:	fec42703          	lw	a4,-20(s0)
    70001618:	9fb9                	addw	a5,a5,a4
    7000161a:	0007859b          	sext.w	a1,a5
/embryos/chapter12/apps/blockpixel.c:65
                     CELL_EXT(CELL_BLOCK, code, fg, bg));
    7000161e:	fd842783          	lw	a5,-40(s0)
    70001622:	0107979b          	slliw	a5,a5,0x10
    70001626:	4107d79b          	sraiw	a5,a5,0x10
    7000162a:	0ff7f793          	zext.b	a5,a5
    7000162e:	0107971b          	slliw	a4,a5,0x10
    70001632:	4107571b          	sraiw	a4,a4,0x10
    70001636:	fd442783          	lw	a5,-44(s0)
    7000163a:	0107979b          	slliw	a5,a5,0x10
    7000163e:	4107d79b          	sraiw	a5,a5,0x10
    70001642:	0087979b          	slliw	a5,a5,0x8
    70001646:	0107979b          	slliw	a5,a5,0x10
    7000164a:	4107d79b          	sraiw	a5,a5,0x10
    7000164e:	7007f793          	andi	a5,a5,1792
    70001652:	0107979b          	slliw	a5,a5,0x10
    70001656:	4107d79b          	sraiw	a5,a5,0x10
    7000165a:	8fd9                	or	a5,a5,a4
    7000165c:	0107971b          	slliw	a4,a5,0x10
    70001660:	4107571b          	sraiw	a4,a4,0x10
    70001664:	fd042783          	lw	a5,-48(s0)
    70001668:	0107979b          	slliw	a5,a5,0x10
    7000166c:	4107d79b          	sraiw	a5,a5,0x10
    70001670:	00b7979b          	slliw	a5,a5,0xb
    70001674:	0107969b          	slliw	a3,a5,0x10
    70001678:	4106d69b          	sraiw	a3,a3,0x10
    7000167c:	6791                	lui	a5,0x4
    7000167e:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001682:	8ff5                	and	a5,a5,a3
    70001684:	0107979b          	slliw	a5,a5,0x10
    70001688:	4107d79b          	sraiw	a5,a5,0x10
    7000168c:	8fd9                	or	a5,a5,a4
    7000168e:	0107971b          	slliw	a4,a5,0x10
    70001692:	4107571b          	sraiw	a4,a4,0x10
    70001696:	6791                	lui	a5,0x4
    70001698:	8fd9                	or	a5,a5,a4
    7000169a:	0107979b          	slliw	a5,a5,0x10
    7000169e:	4107d79b          	sraiw	a5,a5,0x10
/embryos/chapter12/apps/blockpixel.c:64
            user_put(bp->x + cell_x, bp->y + cell_y,
    700016a2:	17c2                	slli	a5,a5,0x30
    700016a4:	93c1                	srli	a5,a5,0x30
    700016a6:	863e                	mv	a2,a5
    700016a8:	fffff097          	auipc	ra,0xfffff
    700016ac:	984080e7          	jalr	-1660(ra) # 7000002c <user_put>
/embryos/chapter12/apps/blockpixel.c:66
            BP_CLEAR_DIRTY(bp->buf[top_index]);
    700016b0:	fc843783          	ld	a5,-56(s0)
    700016b4:	6b98                	ld	a4,16(a5)
    700016b6:	fe442783          	lw	a5,-28(s0)
    700016ba:	97ba                	add	a5,a5,a4
    700016bc:	0007c703          	lbu	a4,0(a5) # 4000 <text_file_end+0xd7e>
    700016c0:	fc843783          	ld	a5,-56(s0)
    700016c4:	6b94                	ld	a3,16(a5)
    700016c6:	fe442783          	lw	a5,-28(s0)
    700016ca:	97b6                	add	a5,a5,a3
    700016cc:	9b5d                	andi	a4,a4,-9
    700016ce:	0ff77713          	zext.b	a4,a4
    700016d2:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/blockpixel.c:67
            BP_CLEAR_DIRTY(bp->buf[bottom_index]);
    700016d6:	fc843783          	ld	a5,-56(s0)
    700016da:	6b98                	ld	a4,16(a5)
    700016dc:	fe042783          	lw	a5,-32(s0)
    700016e0:	97ba                	add	a5,a5,a4
    700016e2:	0007c703          	lbu	a4,0(a5)
    700016e6:	fc843783          	ld	a5,-56(s0)
    700016ea:	6b94                	ld	a3,16(a5)
    700016ec:	fe042783          	lw	a5,-32(s0)
    700016f0:	97b6                	add	a5,a5,a3
    700016f2:	9b5d                	andi	a4,a4,-9
    700016f4:	0ff77713          	zext.b	a4,a4
    700016f8:	00e78023          	sb	a4,0(a5)
    700016fc:	a011                	j	70001700 <bp_flush+0x1c6>
/embryos/chapter12/apps/blockpixel.c:59
                !BP_IS_DIRTY(bp->buf[bottom_index])) continue;
    700016fe:	0001                	nop
/embryos/chapter12/apps/blockpixel.c:55 (discriminator 2)
        for (int cell_x = 0; cell_x < bp->width; cell_x++) {
    70001700:	fe842783          	lw	a5,-24(s0)
    70001704:	2785                	addiw	a5,a5,1
    70001706:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/blockpixel.c:55 (discriminator 1)
    7000170a:	fc843783          	ld	a5,-56(s0)
    7000170e:	479c                	lw	a5,8(a5)
    70001710:	fe842703          	lw	a4,-24(s0)
    70001714:	2701                	sext.w	a4,a4
    70001716:	e2f74ee3          	blt	a4,a5,70001552 <bp_flush+0x18>
/embryos/chapter12/apps/blockpixel.c:54 (discriminator 2)
    for (int cell_y = 0; cell_y < bp->height/2; cell_y++)
    7000171a:	fec42783          	lw	a5,-20(s0)
    7000171e:	2785                	addiw	a5,a5,1
    70001720:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/blockpixel.c:54 (discriminator 1)
    70001724:	fc843783          	ld	a5,-56(s0)
    70001728:	47dc                	lw	a5,12(a5)
    7000172a:	01f7d71b          	srliw	a4,a5,0x1f
    7000172e:	9fb9                	addw	a5,a5,a4
    70001730:	4017d79b          	sraiw	a5,a5,0x1
    70001734:	2781                	sext.w	a5,a5
    70001736:	fec42703          	lw	a4,-20(s0)
    7000173a:	2701                	sext.w	a4,a4
    7000173c:	e0f748e3          	blt	a4,a5,7000154c <bp_flush+0x12>
/embryos/chapter12/apps/blockpixel.c:69
        }
}
    70001740:	0001                	nop
    70001742:	0001                	nop
    70001744:	70e2                	ld	ra,56(sp)
    70001746:	7442                	ld	s0,48(sp)
    70001748:	6121                	addi	sp,sp,64
    7000174a:	8082                	ret

000000007000174c <window_init>:
window_init():
/embryos/chapter12/apps/window1.c:4
#include "syslib.h"
#include "window.h"

void window_init(struct window *window) {
    7000174c:	7179                	addi	sp,sp,-48
    7000174e:	f406                	sd	ra,40(sp)
    70001750:	f022                	sd	s0,32(sp)
    70001752:	1800                	addi	s0,sp,48
    70001754:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/window1.c:5
    window->cur_col = 0; window->cur_fg = 0; window->cur_bg = 7;
    70001758:	fd843783          	ld	a5,-40(s0)
    7000175c:	3407ae23          	sw	zero,860(a5)
    70001760:	fd843783          	ld	a5,-40(s0)
    70001764:	3607a023          	sw	zero,864(a5)
    70001768:	fd843783          	ld	a5,-40(s0)
    7000176c:	471d                	li	a4,7
    7000176e:	36e7a223          	sw	a4,868(a5)
/embryos/chapter12/apps/window1.c:6
    for (int row = 0; row < NROWS; row++)
    70001772:	fe042623          	sw	zero,-20(s0)
    70001776:	a889                	j	700017c8 <window_init+0x7c>
/embryos/chapter12/apps/window1.c:7
        for (int col = 0; col < NCOLS; col++)
    70001778:	fe042423          	sw	zero,-24(s0)
    7000177c:	a80d                	j	700017ae <window_init+0x62>
/embryos/chapter12/apps/window1.c:8
            window->cells[row][col] = CELL(' ', ANSI_BLACK, ANSI_WHITE);
    7000177e:	fd843683          	ld	a3,-40(s0)
    70001782:	fe842603          	lw	a2,-24(s0)
    70001786:	fec42703          	lw	a4,-20(s0)
    7000178a:	87ba                	mv	a5,a4
    7000178c:	078a                	slli	a5,a5,0x2
    7000178e:	97ba                	add	a5,a5,a4
    70001790:	078e                	slli	a5,a5,0x3
    70001792:	8f99                	sub	a5,a5,a4
    70001794:	97b2                	add	a5,a5,a2
    70001796:	0786                	slli	a5,a5,0x1
    70001798:	97b6                	add	a5,a5,a3
    7000179a:	6711                	lui	a4,0x4
    7000179c:	82070713          	addi	a4,a4,-2016 # 3820 <text_file_end+0x59e>
    700017a0:	00e79023          	sh	a4,0(a5)
/embryos/chapter12/apps/window1.c:7 (discriminator 3)
        for (int col = 0; col < NCOLS; col++)
    700017a4:	fe842783          	lw	a5,-24(s0)
    700017a8:	2785                	addiw	a5,a5,1
    700017aa:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/window1.c:7 (discriminator 1)
    700017ae:	fe842783          	lw	a5,-24(s0)
    700017b2:	0007871b          	sext.w	a4,a5
    700017b6:	02600793          	li	a5,38
    700017ba:	fce7d2e3          	bge	a5,a4,7000177e <window_init+0x32>
/embryos/chapter12/apps/window1.c:6 (discriminator 2)
    for (int row = 0; row < NROWS; row++)
    700017be:	fec42783          	lw	a5,-20(s0)
    700017c2:	2785                	addiw	a5,a5,1
    700017c4:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/window1.c:6 (discriminator 1)
    700017c8:	fec42783          	lw	a5,-20(s0)
    700017cc:	0007871b          	sext.w	a4,a5
    700017d0:	47a9                	li	a5,10
    700017d2:	fae7d3e3          	bge	a5,a4,70001778 <window_init+0x2c>
/embryos/chapter12/apps/window1.c:9
}
    700017d6:	0001                	nop
    700017d8:	0001                	nop
    700017da:	70a2                	ld	ra,40(sp)
    700017dc:	7402                	ld	s0,32(sp)
    700017de:	6145                	addi	sp,sp,48
    700017e0:	8082                	ret

00000000700017e2 <window_sync>:
window_sync():
/embryos/chapter12/apps/window1.c:11

void window_sync(struct window *window) {
    700017e2:	7179                	addi	sp,sp,-48
    700017e4:	f406                	sd	ra,40(sp)
    700017e6:	f022                	sd	s0,32(sp)
    700017e8:	1800                	addi	s0,sp,48
    700017ea:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/window1.c:12
    for (int row = 0; row < NROWS; row++)
    700017ee:	fe042623          	sw	zero,-20(s0)
    700017f2:	a08d                	j	70001854 <window_sync+0x72>
/embryos/chapter12/apps/window1.c:13
        for (int col = 0; col < NCOLS; col++)
    700017f4:	fe042423          	sw	zero,-24(s0)
    700017f8:	a089                	j	7000183a <window_sync+0x58>
/embryos/chapter12/apps/window1.c:14
            user_put(col, row, window->cells[row][col]);
    700017fa:	fd843683          	ld	a3,-40(s0)
    700017fe:	fe842603          	lw	a2,-24(s0)
    70001802:	fec42703          	lw	a4,-20(s0)
    70001806:	87ba                	mv	a5,a4
    70001808:	078a                	slli	a5,a5,0x2
    7000180a:	97ba                	add	a5,a5,a4
    7000180c:	078e                	slli	a5,a5,0x3
    7000180e:	8f99                	sub	a5,a5,a4
    70001810:	97b2                	add	a5,a5,a2
    70001812:	0786                	slli	a5,a5,0x1
    70001814:	97b6                	add	a5,a5,a3
    70001816:	0007d683          	lhu	a3,0(a5)
    7000181a:	fec42703          	lw	a4,-20(s0)
    7000181e:	fe842783          	lw	a5,-24(s0)
    70001822:	8636                	mv	a2,a3
    70001824:	85ba                	mv	a1,a4
    70001826:	853e                	mv	a0,a5
    70001828:	fffff097          	auipc	ra,0xfffff
    7000182c:	804080e7          	jalr	-2044(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window1.c:13 (discriminator 3)
        for (int col = 0; col < NCOLS; col++)
    70001830:	fe842783          	lw	a5,-24(s0)
    70001834:	2785                	addiw	a5,a5,1
    70001836:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/window1.c:13 (discriminator 1)
    7000183a:	fe842783          	lw	a5,-24(s0)
    7000183e:	0007871b          	sext.w	a4,a5
    70001842:	02600793          	li	a5,38
    70001846:	fae7dae3          	bge	a5,a4,700017fa <window_sync+0x18>
/embryos/chapter12/apps/window1.c:12 (discriminator 2)
    for (int row = 0; row < NROWS; row++)
    7000184a:	fec42783          	lw	a5,-20(s0)
    7000184e:	2785                	addiw	a5,a5,1
    70001850:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/window1.c:12 (discriminator 1)
    70001854:	fec42783          	lw	a5,-20(s0)
    70001858:	0007871b          	sext.w	a4,a5
    7000185c:	47a9                	li	a5,10
    7000185e:	f8e7dbe3          	bge	a5,a4,700017f4 <window_sync+0x12>
/embryos/chapter12/apps/window1.c:15
}
    70001862:	0001                	nop
    70001864:	0001                	nop
    70001866:	70a2                	ld	ra,40(sp)
    70001868:	7402                	ld	s0,32(sp)
    7000186a:	6145                	addi	sp,sp,48
    7000186c:	8082                	ret

000000007000186e <window_scroll>:
window_scroll():
/embryos/chapter12/apps/window1.c:17

void window_scroll(struct window *window) {
    7000186e:	7179                	addi	sp,sp,-48
    70001870:	f406                	sd	ra,40(sp)
    70001872:	f022                	sd	s0,32(sp)
    70001874:	1800                	addi	s0,sp,48
    70001876:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/window1.c:18
    for (int row = 0; row < NROWS - 1; row++)
    7000187a:	fe042623          	sw	zero,-20(s0)
    7000187e:	a88d                	j	700018f0 <window_scroll+0x82>
/embryos/chapter12/apps/window1.c:19
        for (int col = 0; col < NCOLS; col++)
    70001880:	fe042423          	sw	zero,-24(s0)
    70001884:	a889                	j	700018d6 <window_scroll+0x68>
/embryos/chapter12/apps/window1.c:20
            window->cells[row][col] = window->cells[row + 1][col];
    70001886:	fec42783          	lw	a5,-20(s0)
    7000188a:	2785                	addiw	a5,a5,1
    7000188c:	0007871b          	sext.w	a4,a5
    70001890:	fd843683          	ld	a3,-40(s0)
    70001894:	fe842603          	lw	a2,-24(s0)
    70001898:	87ba                	mv	a5,a4
    7000189a:	078a                	slli	a5,a5,0x2
    7000189c:	97ba                	add	a5,a5,a4
    7000189e:	078e                	slli	a5,a5,0x3
    700018a0:	8f99                	sub	a5,a5,a4
    700018a2:	97b2                	add	a5,a5,a2
    700018a4:	0786                	slli	a5,a5,0x1
    700018a6:	97b6                	add	a5,a5,a3
    700018a8:	0007d683          	lhu	a3,0(a5)
    700018ac:	fd843603          	ld	a2,-40(s0)
    700018b0:	fe842583          	lw	a1,-24(s0)
    700018b4:	fec42703          	lw	a4,-20(s0)
    700018b8:	87ba                	mv	a5,a4
    700018ba:	078a                	slli	a5,a5,0x2
    700018bc:	97ba                	add	a5,a5,a4
    700018be:	078e                	slli	a5,a5,0x3
    700018c0:	8f99                	sub	a5,a5,a4
    700018c2:	97ae                	add	a5,a5,a1
    700018c4:	0786                	slli	a5,a5,0x1
    700018c6:	97b2                	add	a5,a5,a2
    700018c8:	00d79023          	sh	a3,0(a5)
/embryos/chapter12/apps/window1.c:19 (discriminator 3)
        for (int col = 0; col < NCOLS; col++)
    700018cc:	fe842783          	lw	a5,-24(s0)
    700018d0:	2785                	addiw	a5,a5,1
    700018d2:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/window1.c:19 (discriminator 1)
    700018d6:	fe842783          	lw	a5,-24(s0)
    700018da:	0007871b          	sext.w	a4,a5
    700018de:	02600793          	li	a5,38
    700018e2:	fae7d2e3          	bge	a5,a4,70001886 <window_scroll+0x18>
/embryos/chapter12/apps/window1.c:18 (discriminator 2)
    for (int row = 0; row < NROWS - 1; row++)
    700018e6:	fec42783          	lw	a5,-20(s0)
    700018ea:	2785                	addiw	a5,a5,1
    700018ec:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/window1.c:18 (discriminator 1)
    700018f0:	fec42783          	lw	a5,-20(s0)
    700018f4:	0007871b          	sext.w	a4,a5
    700018f8:	47a5                	li	a5,9
    700018fa:	f8e7d3e3          	bge	a5,a4,70001880 <window_scroll+0x12>
/embryos/chapter12/apps/window1.c:21
    for (int col = 0; col < NCOLS; col++)
    700018fe:	fe042223          	sw	zero,-28(s0)
    70001902:	a01d                	j	70001928 <window_scroll+0xba>
/embryos/chapter12/apps/window1.c:22
        window->cells[NROWS - 1][col] = CELL(' ', ANSI_BLACK, ANSI_WHITE);
    70001904:	fd843703          	ld	a4,-40(s0)
    70001908:	fe442783          	lw	a5,-28(s0)
    7000190c:	18678793          	addi	a5,a5,390
    70001910:	0786                	slli	a5,a5,0x1
    70001912:	97ba                	add	a5,a5,a4
    70001914:	6711                	lui	a4,0x4
    70001916:	82070713          	addi	a4,a4,-2016 # 3820 <text_file_end+0x59e>
    7000191a:	00e79023          	sh	a4,0(a5)
/embryos/chapter12/apps/window1.c:21 (discriminator 3)
    for (int col = 0; col < NCOLS; col++)
    7000191e:	fe442783          	lw	a5,-28(s0)
    70001922:	2785                	addiw	a5,a5,1
    70001924:	fef42223          	sw	a5,-28(s0)
/embryos/chapter12/apps/window1.c:21 (discriminator 1)
    70001928:	fe442783          	lw	a5,-28(s0)
    7000192c:	0007871b          	sext.w	a4,a5
    70001930:	02600793          	li	a5,38
    70001934:	fce7d8e3          	bge	a5,a4,70001904 <window_scroll+0x96>
/embryos/chapter12/apps/window1.c:23
    window_sync(window);
    70001938:	fd843503          	ld	a0,-40(s0)
    7000193c:	00000097          	auipc	ra,0x0
    70001940:	ea6080e7          	jalr	-346(ra) # 700017e2 <window_sync>
/embryos/chapter12/apps/window1.c:24
}
    70001944:	0001                	nop
    70001946:	70a2                	ld	ra,40(sp)
    70001948:	7402                	ld	s0,32(sp)
    7000194a:	6145                	addi	sp,sp,48
    7000194c:	8082                	ret

000000007000194e <window_putchar>:
window_putchar():
/embryos/chapter12/apps/window1.c:26

void window_putchar(struct window *window, char c) {
    7000194e:	1101                	addi	sp,sp,-32
    70001950:	ec06                	sd	ra,24(sp)
    70001952:	e822                	sd	s0,16(sp)
    70001954:	1000                	addi	s0,sp,32
    70001956:	fea43423          	sd	a0,-24(s0)
    7000195a:	87ae                	mv	a5,a1
    7000195c:	fef403a3          	sb	a5,-25(s0)
/embryos/chapter12/apps/window1.c:27
    if (c == '\b') {
    70001960:	fe744783          	lbu	a5,-25(s0)
    70001964:	0ff7f713          	zext.b	a4,a5
    70001968:	47a1                	li	a5,8
    7000196a:	02f71463          	bne	a4,a5,70001992 <window_putchar+0x44>
/embryos/chapter12/apps/window1.c:28
        if (window->cur_col > 0) window->cur_col--;
    7000196e:	fe843783          	ld	a5,-24(s0)
    70001972:	35c7a783          	lw	a5,860(a5)
    70001976:	18f05c63          	blez	a5,70001b0e <window_putchar+0x1c0>
/embryos/chapter12/apps/window1.c:28 (discriminator 1)
    7000197a:	fe843783          	ld	a5,-24(s0)
    7000197e:	35c7a783          	lw	a5,860(a5)
    70001982:	37fd                	addiw	a5,a5,-1
    70001984:	0007871b          	sext.w	a4,a5
    70001988:	fe843783          	ld	a5,-24(s0)
    7000198c:	34e7ae23          	sw	a4,860(a5)
/embryos/chapter12/apps/window1.c:29
        return;
    70001990:	aabd                	j	70001b0e <window_putchar+0x1c0>
/embryos/chapter12/apps/window1.c:31
    }
    if (c == '\n') {
    70001992:	fe744783          	lbu	a5,-25(s0)
    70001996:	0ff7f713          	zext.b	a4,a5
    7000199a:	47a9                	li	a5,10
    7000199c:	00f71d63          	bne	a4,a5,700019b6 <window_putchar+0x68>
/embryos/chapter12/apps/window1.c:32
        window_scroll(window);
    700019a0:	fe843503          	ld	a0,-24(s0)
    700019a4:	00000097          	auipc	ra,0x0
    700019a8:	eca080e7          	jalr	-310(ra) # 7000186e <window_scroll>
/embryos/chapter12/apps/window1.c:33
        window->cur_col = 0;
    700019ac:	fe843783          	ld	a5,-24(s0)
    700019b0:	3407ae23          	sw	zero,860(a5)
    700019b4:	aab1                	j	70001b10 <window_putchar+0x1c2>
/embryos/chapter12/apps/window1.c:36
    }
    else {
        user_put(window->cur_col, NROWS - 1,
    700019b6:	fe843783          	ld	a5,-24(s0)
    700019ba:	35c7a503          	lw	a0,860(a5)
/embryos/chapter12/apps/window1.c:37
                    CELL(c, window->cur_fg, window->cur_bg));
    700019be:	fe744783          	lbu	a5,-25(s0)
    700019c2:	0107971b          	slliw	a4,a5,0x10
    700019c6:	4107571b          	sraiw	a4,a4,0x10
    700019ca:	fe843783          	ld	a5,-24(s0)
    700019ce:	3607a783          	lw	a5,864(a5)
    700019d2:	0107979b          	slliw	a5,a5,0x10
    700019d6:	4107d79b          	sraiw	a5,a5,0x10
    700019da:	0087979b          	slliw	a5,a5,0x8
    700019de:	0107979b          	slliw	a5,a5,0x10
    700019e2:	4107d79b          	sraiw	a5,a5,0x10
    700019e6:	7007f793          	andi	a5,a5,1792
    700019ea:	0107979b          	slliw	a5,a5,0x10
    700019ee:	4107d79b          	sraiw	a5,a5,0x10
    700019f2:	8fd9                	or	a5,a5,a4
    700019f4:	0107971b          	slliw	a4,a5,0x10
    700019f8:	4107571b          	sraiw	a4,a4,0x10
    700019fc:	fe843783          	ld	a5,-24(s0)
    70001a00:	3647a783          	lw	a5,868(a5)
    70001a04:	0107979b          	slliw	a5,a5,0x10
    70001a08:	4107d79b          	sraiw	a5,a5,0x10
    70001a0c:	00b7979b          	slliw	a5,a5,0xb
    70001a10:	0107969b          	slliw	a3,a5,0x10
    70001a14:	4106d69b          	sraiw	a3,a3,0x10
    70001a18:	6791                	lui	a5,0x4
    70001a1a:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001a1e:	8ff5                	and	a5,a5,a3
    70001a20:	0107979b          	slliw	a5,a5,0x10
    70001a24:	4107d79b          	sraiw	a5,a5,0x10
    70001a28:	8fd9                	or	a5,a5,a4
    70001a2a:	0107979b          	slliw	a5,a5,0x10
    70001a2e:	4107d79b          	sraiw	a5,a5,0x10
/embryos/chapter12/apps/window1.c:36
        user_put(window->cur_col, NROWS - 1,
    70001a32:	17c2                	slli	a5,a5,0x30
    70001a34:	93c1                	srli	a5,a5,0x30
    70001a36:	863e                	mv	a2,a5
    70001a38:	45a9                	li	a1,10
    70001a3a:	ffffe097          	auipc	ra,0xffffe
    70001a3e:	5f2080e7          	jalr	1522(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window1.c:39
        window->cells[NROWS - 1][window->cur_col] =
                    CELL(c, window->cur_fg, window->cur_bg);
    70001a42:	fe744783          	lbu	a5,-25(s0)
    70001a46:	0107971b          	slliw	a4,a5,0x10
    70001a4a:	4107571b          	sraiw	a4,a4,0x10
    70001a4e:	fe843783          	ld	a5,-24(s0)
    70001a52:	3607a783          	lw	a5,864(a5)
    70001a56:	0107979b          	slliw	a5,a5,0x10
    70001a5a:	4107d79b          	sraiw	a5,a5,0x10
    70001a5e:	0087979b          	slliw	a5,a5,0x8
    70001a62:	0107979b          	slliw	a5,a5,0x10
    70001a66:	4107d79b          	sraiw	a5,a5,0x10
    70001a6a:	7007f793          	andi	a5,a5,1792
    70001a6e:	0107979b          	slliw	a5,a5,0x10
    70001a72:	4107d79b          	sraiw	a5,a5,0x10
    70001a76:	8fd9                	or	a5,a5,a4
    70001a78:	0107971b          	slliw	a4,a5,0x10
    70001a7c:	4107571b          	sraiw	a4,a4,0x10
    70001a80:	fe843783          	ld	a5,-24(s0)
    70001a84:	3647a783          	lw	a5,868(a5)
    70001a88:	0107979b          	slliw	a5,a5,0x10
    70001a8c:	4107d79b          	sraiw	a5,a5,0x10
    70001a90:	00b7979b          	slliw	a5,a5,0xb
    70001a94:	0107969b          	slliw	a3,a5,0x10
    70001a98:	4106d69b          	sraiw	a3,a3,0x10
    70001a9c:	6791                	lui	a5,0x4
    70001a9e:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001aa2:	8ff5                	and	a5,a5,a3
    70001aa4:	0107979b          	slliw	a5,a5,0x10
    70001aa8:	4107d79b          	sraiw	a5,a5,0x10
    70001aac:	8fd9                	or	a5,a5,a4
    70001aae:	0107971b          	slliw	a4,a5,0x10
    70001ab2:	4107571b          	sraiw	a4,a4,0x10
/embryos/chapter12/apps/window1.c:38
        window->cells[NROWS - 1][window->cur_col] =
    70001ab6:	fe843783          	ld	a5,-24(s0)
    70001aba:	35c7a783          	lw	a5,860(a5)
/embryos/chapter12/apps/window1.c:39
                    CELL(c, window->cur_fg, window->cur_bg);
    70001abe:	1742                	slli	a4,a4,0x30
    70001ac0:	9341                	srli	a4,a4,0x30
/embryos/chapter12/apps/window1.c:38
        window->cells[NROWS - 1][window->cur_col] =
    70001ac2:	fe843683          	ld	a3,-24(s0)
    70001ac6:	18678793          	addi	a5,a5,390
    70001aca:	0786                	slli	a5,a5,0x1
    70001acc:	97b6                	add	a5,a5,a3
    70001ace:	00e79023          	sh	a4,0(a5)
/embryos/chapter12/apps/window1.c:40
        if (++window->cur_col == NCOLS) {
    70001ad2:	fe843783          	ld	a5,-24(s0)
    70001ad6:	35c7a783          	lw	a5,860(a5)
    70001ada:	2785                	addiw	a5,a5,1
    70001adc:	0007871b          	sext.w	a4,a5
    70001ae0:	fe843783          	ld	a5,-24(s0)
    70001ae4:	34e7ae23          	sw	a4,860(a5)
    70001ae8:	fe843783          	ld	a5,-24(s0)
    70001aec:	35c7a703          	lw	a4,860(a5)
    70001af0:	02700793          	li	a5,39
    70001af4:	00f71e63          	bne	a4,a5,70001b10 <window_putchar+0x1c2>
/embryos/chapter12/apps/window1.c:41
            window_scroll(window);
    70001af8:	fe843503          	ld	a0,-24(s0)
    70001afc:	00000097          	auipc	ra,0x0
    70001b00:	d72080e7          	jalr	-654(ra) # 7000186e <window_scroll>
/embryos/chapter12/apps/window1.c:42
            window->cur_col = 0;
    70001b04:	fe843783          	ld	a5,-24(s0)
    70001b08:	3407ae23          	sw	zero,860(a5)
    70001b0c:	a011                	j	70001b10 <window_putchar+0x1c2>
/embryos/chapter12/apps/window1.c:29
        return;
    70001b0e:	0001                	nop
/embryos/chapter12/apps/window1.c:45
        }
    }
}
    70001b10:	60e2                	ld	ra,24(sp)
    70001b12:	6442                	ld	s0,16(sp)
    70001b14:	6105                	addi	sp,sp,32
    70001b16:	8082                	ret

0000000070001b18 <window_readline>:
window_readline():
/embryos/chapter12/apps/window2.c:4
#include "syslib.h"
#include "window.h"

int window_readline(struct window *window, char *line, int size) {
    70001b18:	7139                	addi	sp,sp,-64
    70001b1a:	fc06                	sd	ra,56(sp)
    70001b1c:	f822                	sd	s0,48(sp)
    70001b1e:	0080                	addi	s0,sp,64
    70001b20:	fca43c23          	sd	a0,-40(s0)
    70001b24:	fcb43823          	sd	a1,-48(s0)
    70001b28:	87b2                	mv	a5,a2
    70001b2a:	fcf42623          	sw	a5,-52(s0)
/embryos/chapter12/apps/window2.c:5
    int n = 0;
    70001b2e:	fe042623          	sw	zero,-20(s0)
/embryos/chapter12/apps/window2.c:7
    for (;;) {
        user_put(window->cur_col, NROWS - 1, CELL(' ',  ANSI_WHITE,  ANSI_CYAN));
    70001b32:	fd843783          	ld	a5,-40(s0)
    70001b36:	35c7a703          	lw	a4,860(a5)
    70001b3a:	678d                	lui	a5,0x3
    70001b3c:	72078613          	addi	a2,a5,1824 # 3720 <text_file_end+0x49e>
    70001b40:	45a9                	li	a1,10
    70001b42:	853a                	mv	a0,a4
    70001b44:	ffffe097          	auipc	ra,0xffffe
    70001b48:	4e8080e7          	jalr	1256(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window2.c:10
        int c;
        for (;;) {
            c = user_get(1);
    70001b4c:	4505                	li	a0,1
    70001b4e:	ffffe097          	auipc	ra,0xffffe
    70001b52:	4e6080e7          	jalr	1254(ra) # 70000034 <user_get>
    70001b56:	87aa                	mv	a5,a0
    70001b58:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/window2.c:11
            if (c == USER_GET_GOT_FOCUS)
    70001b5c:	fe842783          	lw	a5,-24(s0)
    70001b60:	0007871b          	sext.w	a4,a5
    70001b64:	57fd                	li	a5,-1
    70001b66:	02f71063          	bne	a4,a5,70001b86 <window_readline+0x6e>
/embryos/chapter12/apps/window2.c:12
                user_put(window->cur_col, NROWS - 1, CELL(' ',  ANSI_WHITE,  ANSI_CYAN));
    70001b6a:	fd843783          	ld	a5,-40(s0)
    70001b6e:	35c7a703          	lw	a4,860(a5)
    70001b72:	678d                	lui	a5,0x3
    70001b74:	72078613          	addi	a2,a5,1824 # 3720 <text_file_end+0x49e>
    70001b78:	45a9                	li	a1,10
    70001b7a:	853a                	mv	a0,a4
    70001b7c:	ffffe097          	auipc	ra,0xffffe
    70001b80:	4b0080e7          	jalr	1200(ra) # 7000002c <user_put>
    70001b84:	b7e1                	j	70001b4c <window_readline+0x34>
/embryos/chapter12/apps/window2.c:13
            else if (c == USER_GET_LOST_FOCUS)
    70001b86:	fe842783          	lw	a5,-24(s0)
    70001b8a:	0007871b          	sext.w	a4,a5
    70001b8e:	57f9                	li	a5,-2
    70001b90:	02f71063          	bne	a4,a5,70001bb0 <window_readline+0x98>
/embryos/chapter12/apps/window2.c:14
                user_put(window->cur_col, NROWS - 1, CELL(' ',  ANSI_WHITE,  ANSI_MAGENTA));
    70001b94:	fd843783          	ld	a5,-40(s0)
    70001b98:	35c7a703          	lw	a4,860(a5)
    70001b9c:	678d                	lui	a5,0x3
    70001b9e:	f2078613          	addi	a2,a5,-224 # 2f20 <flat_file_off+0x1f20>
    70001ba2:	45a9                	li	a1,10
    70001ba4:	853a                	mv	a0,a4
    70001ba6:	ffffe097          	auipc	ra,0xffffe
    70001baa:	486080e7          	jalr	1158(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window2.c:10
            c = user_get(1);
    70001bae:	bf79                	j	70001b4c <window_readline+0x34>
/embryos/chapter12/apps/window2.c:15
            else break;
    70001bb0:	0001                	nop
/embryos/chapter12/apps/window2.c:17
        }
        if (c == 4) {   // <ctrl>D is EOF
    70001bb2:	fe842783          	lw	a5,-24(s0)
    70001bb6:	0007871b          	sext.w	a4,a5
    70001bba:	4791                	li	a5,4
    70001bbc:	04f71263          	bne	a4,a5,70001c00 <window_readline+0xe8>
/embryos/chapter12/apps/window2.c:18
            line[(n < size - 1) ? n : (size - 1)] = 0;
    70001bc0:	fcc42783          	lw	a5,-52(s0)
    70001bc4:	37fd                	addiw	a5,a5,-1
    70001bc6:	2781                	sext.w	a5,a5
    70001bc8:	863e                	mv	a2,a5
    70001bca:	fec42783          	lw	a5,-20(s0)
    70001bce:	86be                	mv	a3,a5
    70001bd0:	0006871b          	sext.w	a4,a3
    70001bd4:	0006079b          	sext.w	a5,a2
    70001bd8:	00e7d363          	bge	a5,a4,70001bde <window_readline+0xc6>
    70001bdc:	86b2                	mv	a3,a2
    70001bde:	0006879b          	sext.w	a5,a3
    70001be2:	873e                	mv	a4,a5
    70001be4:	fd043783          	ld	a5,-48(s0)
    70001be8:	97ba                	add	a5,a5,a4
    70001bea:	00078023          	sb	zero,0(a5)
/embryos/chapter12/apps/window2.c:19
            return n > 0;
    70001bee:	fec42783          	lw	a5,-20(s0)
    70001bf2:	2781                	sext.w	a5,a5
    70001bf4:	00f027b3          	sgtz	a5,a5
    70001bf8:	0ff7f793          	zext.b	a5,a5
    70001bfc:	2781                	sext.w	a5,a5
    70001bfe:	a45d                	j	70001ea4 <window_readline+0x38c>
/embryos/chapter12/apps/window2.c:21
        }
        if (c == '\b' || c == '\177') {
    70001c00:	fe842783          	lw	a5,-24(s0)
    70001c04:	0007871b          	sext.w	a4,a5
    70001c08:	47a1                	li	a5,8
    70001c0a:	00f70a63          	beq	a4,a5,70001c1e <window_readline+0x106>
/embryos/chapter12/apps/window2.c:21 (discriminator 1)
    70001c0e:	fe842783          	lw	a5,-24(s0)
    70001c12:	0007871b          	sext.w	a4,a5
    70001c16:	07f00793          	li	a5,127
    70001c1a:	1af71d63          	bne	a4,a5,70001dd4 <window_readline+0x2bc>
/embryos/chapter12/apps/window2.c:22
            if (n > 0) {
    70001c1e:	fec42783          	lw	a5,-20(s0)
    70001c22:	2781                	sext.w	a5,a5
    70001c24:	26f05f63          	blez	a5,70001ea2 <window_readline+0x38a>
/embryos/chapter12/apps/window2.c:23
                user_put(window->cur_col, NROWS - 1,   // erase cursor
    70001c28:	fd843783          	ld	a5,-40(s0)
    70001c2c:	35c7a503          	lw	a0,860(a5)
/embryos/chapter12/apps/window2.c:24
                        CELL(' ', window->cur_fg, window->cur_bg));
    70001c30:	fd843783          	ld	a5,-40(s0)
    70001c34:	3607a783          	lw	a5,864(a5)
    70001c38:	0107979b          	slliw	a5,a5,0x10
    70001c3c:	4107d79b          	sraiw	a5,a5,0x10
    70001c40:	0087979b          	slliw	a5,a5,0x8
    70001c44:	0107979b          	slliw	a5,a5,0x10
    70001c48:	4107d79b          	sraiw	a5,a5,0x10
    70001c4c:	7007f793          	andi	a5,a5,1792
    70001c50:	0107979b          	slliw	a5,a5,0x10
    70001c54:	4107d79b          	sraiw	a5,a5,0x10
    70001c58:	0207e793          	ori	a5,a5,32
    70001c5c:	0107971b          	slliw	a4,a5,0x10
    70001c60:	4107571b          	sraiw	a4,a4,0x10
    70001c64:	fd843783          	ld	a5,-40(s0)
    70001c68:	3647a783          	lw	a5,868(a5)
    70001c6c:	0107979b          	slliw	a5,a5,0x10
    70001c70:	4107d79b          	sraiw	a5,a5,0x10
    70001c74:	00b7979b          	slliw	a5,a5,0xb
    70001c78:	0107969b          	slliw	a3,a5,0x10
    70001c7c:	4106d69b          	sraiw	a3,a3,0x10
    70001c80:	6791                	lui	a5,0x4
    70001c82:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001c86:	8ff5                	and	a5,a5,a3
    70001c88:	0107979b          	slliw	a5,a5,0x10
    70001c8c:	4107d79b          	sraiw	a5,a5,0x10
    70001c90:	8fd9                	or	a5,a5,a4
    70001c92:	0107979b          	slliw	a5,a5,0x10
    70001c96:	4107d79b          	sraiw	a5,a5,0x10
/embryos/chapter12/apps/window2.c:23
                user_put(window->cur_col, NROWS - 1,   // erase cursor
    70001c9a:	17c2                	slli	a5,a5,0x30
    70001c9c:	93c1                	srli	a5,a5,0x30
    70001c9e:	863e                	mv	a2,a5
    70001ca0:	45a9                	li	a1,10
    70001ca2:	ffffe097          	auipc	ra,0xffffe
    70001ca6:	38a080e7          	jalr	906(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window2.c:25
                window->cur_col--;
    70001caa:	fd843783          	ld	a5,-40(s0)
    70001cae:	35c7a783          	lw	a5,860(a5)
    70001cb2:	37fd                	addiw	a5,a5,-1
    70001cb4:	0007871b          	sext.w	a4,a5
    70001cb8:	fd843783          	ld	a5,-40(s0)
    70001cbc:	34e7ae23          	sw	a4,860(a5)
/embryos/chapter12/apps/window2.c:27
                window->cells[NROWS - 1][window->cur_col] =
                        CELL(' ', window->cur_fg, window->cur_bg);
    70001cc0:	fd843783          	ld	a5,-40(s0)
    70001cc4:	3607a783          	lw	a5,864(a5)
    70001cc8:	0107979b          	slliw	a5,a5,0x10
    70001ccc:	4107d79b          	sraiw	a5,a5,0x10
    70001cd0:	0087979b          	slliw	a5,a5,0x8
    70001cd4:	0107979b          	slliw	a5,a5,0x10
    70001cd8:	4107d79b          	sraiw	a5,a5,0x10
    70001cdc:	7007f793          	andi	a5,a5,1792
    70001ce0:	0107979b          	slliw	a5,a5,0x10
    70001ce4:	4107d79b          	sraiw	a5,a5,0x10
    70001ce8:	0207e793          	ori	a5,a5,32
    70001cec:	0107971b          	slliw	a4,a5,0x10
    70001cf0:	4107571b          	sraiw	a4,a4,0x10
    70001cf4:	fd843783          	ld	a5,-40(s0)
    70001cf8:	3647a783          	lw	a5,868(a5)
    70001cfc:	0107979b          	slliw	a5,a5,0x10
    70001d00:	4107d79b          	sraiw	a5,a5,0x10
    70001d04:	00b7979b          	slliw	a5,a5,0xb
    70001d08:	0107969b          	slliw	a3,a5,0x10
    70001d0c:	4106d69b          	sraiw	a3,a3,0x10
    70001d10:	6791                	lui	a5,0x4
    70001d12:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001d16:	8ff5                	and	a5,a5,a3
    70001d18:	0107979b          	slliw	a5,a5,0x10
    70001d1c:	4107d79b          	sraiw	a5,a5,0x10
    70001d20:	8fd9                	or	a5,a5,a4
    70001d22:	0107971b          	slliw	a4,a5,0x10
    70001d26:	4107571b          	sraiw	a4,a4,0x10
/embryos/chapter12/apps/window2.c:26
                window->cells[NROWS - 1][window->cur_col] =
    70001d2a:	fd843783          	ld	a5,-40(s0)
    70001d2e:	35c7a783          	lw	a5,860(a5)
/embryos/chapter12/apps/window2.c:27
                        CELL(' ', window->cur_fg, window->cur_bg);
    70001d32:	1742                	slli	a4,a4,0x30
    70001d34:	9341                	srli	a4,a4,0x30
/embryos/chapter12/apps/window2.c:26
                window->cells[NROWS - 1][window->cur_col] =
    70001d36:	fd843683          	ld	a3,-40(s0)
    70001d3a:	18678793          	addi	a5,a5,390
    70001d3e:	0786                	slli	a5,a5,0x1
    70001d40:	97b6                	add	a5,a5,a3
    70001d42:	00e79023          	sh	a4,0(a5)
/embryos/chapter12/apps/window2.c:28
                user_put(window->cur_col, NROWS - 1,   // erase last char
    70001d46:	fd843783          	ld	a5,-40(s0)
    70001d4a:	35c7a503          	lw	a0,860(a5)
/embryos/chapter12/apps/window2.c:29
                        CELL(' ', window->cur_fg, window->cur_bg));
    70001d4e:	fd843783          	ld	a5,-40(s0)
    70001d52:	3607a783          	lw	a5,864(a5)
    70001d56:	0107979b          	slliw	a5,a5,0x10
    70001d5a:	4107d79b          	sraiw	a5,a5,0x10
    70001d5e:	0087979b          	slliw	a5,a5,0x8
    70001d62:	0107979b          	slliw	a5,a5,0x10
    70001d66:	4107d79b          	sraiw	a5,a5,0x10
    70001d6a:	7007f793          	andi	a5,a5,1792
    70001d6e:	0107979b          	slliw	a5,a5,0x10
    70001d72:	4107d79b          	sraiw	a5,a5,0x10
    70001d76:	0207e793          	ori	a5,a5,32
    70001d7a:	0107971b          	slliw	a4,a5,0x10
    70001d7e:	4107571b          	sraiw	a4,a4,0x10
    70001d82:	fd843783          	ld	a5,-40(s0)
    70001d86:	3647a783          	lw	a5,868(a5)
    70001d8a:	0107979b          	slliw	a5,a5,0x10
    70001d8e:	4107d79b          	sraiw	a5,a5,0x10
    70001d92:	00b7979b          	slliw	a5,a5,0xb
    70001d96:	0107969b          	slliw	a3,a5,0x10
    70001d9a:	4106d69b          	sraiw	a3,a3,0x10
    70001d9e:	6791                	lui	a5,0x4
    70001da0:	80078793          	addi	a5,a5,-2048 # 3800 <text_file_end+0x57e>
    70001da4:	8ff5                	and	a5,a5,a3
    70001da6:	0107979b          	slliw	a5,a5,0x10
    70001daa:	4107d79b          	sraiw	a5,a5,0x10
    70001dae:	8fd9                	or	a5,a5,a4
    70001db0:	0107979b          	slliw	a5,a5,0x10
    70001db4:	4107d79b          	sraiw	a5,a5,0x10
/embryos/chapter12/apps/window2.c:28
                user_put(window->cur_col, NROWS - 1,   // erase last char
    70001db8:	17c2                	slli	a5,a5,0x30
    70001dba:	93c1                	srli	a5,a5,0x30
    70001dbc:	863e                	mv	a2,a5
    70001dbe:	45a9                	li	a1,10
    70001dc0:	ffffe097          	auipc	ra,0xffffe
    70001dc4:	26c080e7          	jalr	620(ra) # 7000002c <user_put>
/embryos/chapter12/apps/window2.c:30
                n--;
    70001dc8:	fec42783          	lw	a5,-20(s0)
    70001dcc:	37fd                	addiw	a5,a5,-1
    70001dce:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/window2.c:22
            if (n > 0) {
    70001dd2:	a8c1                	j	70001ea2 <window_readline+0x38a>
/embryos/chapter12/apps/window2.c:34
            }
        }
        else {
            if (c == '\r') c = '\n';
    70001dd4:	fe842783          	lw	a5,-24(s0)
    70001dd8:	0007871b          	sext.w	a4,a5
    70001ddc:	47b5                	li	a5,13
    70001dde:	00f71563          	bne	a4,a5,70001de8 <window_readline+0x2d0>
/embryos/chapter12/apps/window2.c:34 (discriminator 1)
    70001de2:	47a9                	li	a5,10
    70001de4:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/window2.c:35
            if (n < size - 1) line[n] = c;
    70001de8:	fcc42783          	lw	a5,-52(s0)
    70001dec:	37fd                	addiw	a5,a5,-1
    70001dee:	2781                	sext.w	a5,a5
    70001df0:	fec42703          	lw	a4,-20(s0)
    70001df4:	2701                	sext.w	a4,a4
    70001df6:	00f75d63          	bge	a4,a5,70001e10 <window_readline+0x2f8>
/embryos/chapter12/apps/window2.c:35 (discriminator 1)
    70001dfa:	fec42783          	lw	a5,-20(s0)
    70001dfe:	fd043703          	ld	a4,-48(s0)
    70001e02:	97ba                	add	a5,a5,a4
    70001e04:	fe842703          	lw	a4,-24(s0)
    70001e08:	0ff77713          	zext.b	a4,a4
    70001e0c:	00e78023          	sb	a4,0(a5)
/embryos/chapter12/apps/window2.c:36
            n++;
    70001e10:	fec42783          	lw	a5,-20(s0)
    70001e14:	2785                	addiw	a5,a5,1
    70001e16:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/window2.c:37
            if (c == '\n') {
    70001e1a:	fe842783          	lw	a5,-24(s0)
    70001e1e:	0007871b          	sext.w	a4,a5
    70001e22:	47a9                	li	a5,10
    70001e24:	04f71263          	bne	a4,a5,70001e68 <window_readline+0x350>
/embryos/chapter12/apps/window2.c:38
                line[(n < size - 1) ? n : (size - 1)] = 0;
    70001e28:	fcc42783          	lw	a5,-52(s0)
    70001e2c:	37fd                	addiw	a5,a5,-1
    70001e2e:	2781                	sext.w	a5,a5
    70001e30:	863e                	mv	a2,a5
    70001e32:	fec42783          	lw	a5,-20(s0)
    70001e36:	86be                	mv	a3,a5
    70001e38:	0006871b          	sext.w	a4,a3
    70001e3c:	0006079b          	sext.w	a5,a2
    70001e40:	00e7d363          	bge	a5,a4,70001e46 <window_readline+0x32e>
    70001e44:	86b2                	mv	a3,a2
    70001e46:	0006879b          	sext.w	a5,a3
    70001e4a:	873e                	mv	a4,a5
    70001e4c:	fd043783          	ld	a5,-48(s0)
    70001e50:	97ba                	add	a5,a5,a4
    70001e52:	00078023          	sb	zero,0(a5)
/embryos/chapter12/apps/window2.c:39
                window_putchar(window, '\n');
    70001e56:	45a9                	li	a1,10
    70001e58:	fd843503          	ld	a0,-40(s0)
    70001e5c:	00000097          	auipc	ra,0x0
    70001e60:	af2080e7          	jalr	-1294(ra) # 7000194e <window_putchar>
/embryos/chapter12/apps/window2.c:40
                return 1;
    70001e64:	4785                	li	a5,1
    70001e66:	a83d                	j	70001ea4 <window_readline+0x38c>
/embryos/chapter12/apps/window2.c:42
            }
            else window_putchar(window, (32 <= c && c < 127) ? c : '?');
    70001e68:	fe842783          	lw	a5,-24(s0)
    70001e6c:	0007871b          	sext.w	a4,a5
    70001e70:	47fd                	li	a5,31
    70001e72:	00e7df63          	bge	a5,a4,70001e90 <window_readline+0x378>
/embryos/chapter12/apps/window2.c:42 (discriminator 1)
    70001e76:	fe842783          	lw	a5,-24(s0)
    70001e7a:	0007871b          	sext.w	a4,a5
    70001e7e:	07e00793          	li	a5,126
    70001e82:	00e7c763          	blt	a5,a4,70001e90 <window_readline+0x378>
/embryos/chapter12/apps/window2.c:42 (discriminator 3)
    70001e86:	fe842783          	lw	a5,-24(s0)
    70001e8a:	0ff7f793          	zext.b	a5,a5
/embryos/chapter12/apps/window2.c:42
    70001e8e:	a019                	j	70001e94 <window_readline+0x37c>
/embryos/chapter12/apps/window2.c:42 (discriminator 4)
    70001e90:	03f00793          	li	a5,63
/embryos/chapter12/apps/window2.c:42 (discriminator 6)
    70001e94:	85be                	mv	a1,a5
    70001e96:	fd843503          	ld	a0,-40(s0)
    70001e9a:	00000097          	auipc	ra,0x0
    70001e9e:	ab4080e7          	jalr	-1356(ra) # 7000194e <window_putchar>
/embryos/chapter12/apps/window2.c:6
    for (;;) {
    70001ea2:	b941                	j	70001b32 <window_readline+0x1a>
/embryos/chapter12/apps/window2.c:45
        }
    }
}
    70001ea4:	853e                	mv	a0,a5
    70001ea6:	70e2                	ld	ra,56(sp)
    70001ea8:	7442                	ld	s0,48(sp)
    70001eaa:	6121                	addi	sp,sp,64
    70001eac:	8082                	ret

0000000070001eae <init>:
init():
/embryos/chapter12/apps/putchar.c:8
#include "stdio.h"

static struct window window;
static int initialized = 0;

static void init(){
    70001eae:	1141                	addi	sp,sp,-16
    70001eb0:	e406                	sd	ra,8(sp)
    70001eb2:	e022                	sd	s0,0(sp)
    70001eb4:	0800                	addi	s0,sp,16
/embryos/chapter12/apps/putchar.c:9
    if (!initialized) {
    70001eb6:	00000797          	auipc	a5,0x0
    70001eba:	76a78793          	addi	a5,a5,1898 # 70002620 <initialized>
    70001ebe:	439c                	lw	a5,0(a5)
    70001ec0:	e79d                	bnez	a5,70001eee <init+0x40>
/embryos/chapter12/apps/putchar.c:10
        window_init(&window);
    70001ec2:	00000517          	auipc	a0,0x0
    70001ec6:	3f650513          	addi	a0,a0,1014 # 700022b8 <window>
    70001eca:	00000097          	auipc	ra,0x0
    70001ece:	882080e7          	jalr	-1918(ra) # 7000174c <window_init>
/embryos/chapter12/apps/putchar.c:11
        window_sync(&window);
    70001ed2:	00000517          	auipc	a0,0x0
    70001ed6:	3e650513          	addi	a0,a0,998 # 700022b8 <window>
    70001eda:	00000097          	auipc	ra,0x0
    70001ede:	908080e7          	jalr	-1784(ra) # 700017e2 <window_sync>
/embryos/chapter12/apps/putchar.c:12
        initialized = 1;
    70001ee2:	00000797          	auipc	a5,0x0
    70001ee6:	73e78793          	addi	a5,a5,1854 # 70002620 <initialized>
    70001eea:	4705                	li	a4,1
    70001eec:	c398                	sw	a4,0(a5)
/embryos/chapter12/apps/putchar.c:14
    }
}
    70001eee:	0001                	nop
    70001ef0:	60a2                	ld	ra,8(sp)
    70001ef2:	6402                	ld	s0,0(sp)
    70001ef4:	0141                	addi	sp,sp,16
    70001ef6:	8082                	ret

0000000070001ef8 <putchar>:
putchar():
/embryos/chapter12/apps/putchar.c:16

void putchar(char c) {
    70001ef8:	1101                	addi	sp,sp,-32
    70001efa:	ec06                	sd	ra,24(sp)
    70001efc:	e822                	sd	s0,16(sp)
    70001efe:	1000                	addi	s0,sp,32
    70001f00:	87aa                	mv	a5,a0
    70001f02:	fef407a3          	sb	a5,-17(s0)
/embryos/chapter12/apps/putchar.c:17
    init();
    70001f06:	00000097          	auipc	ra,0x0
    70001f0a:	fa8080e7          	jalr	-88(ra) # 70001eae <init>
/embryos/chapter12/apps/putchar.c:18
    window_putchar(&window, c);
    70001f0e:	fef44783          	lbu	a5,-17(s0)
    70001f12:	85be                	mv	a1,a5
    70001f14:	00000517          	auipc	a0,0x0
    70001f18:	3a450513          	addi	a0,a0,932 # 700022b8 <window>
    70001f1c:	00000097          	auipc	ra,0x0
    70001f20:	a32080e7          	jalr	-1486(ra) # 7000194e <window_putchar>
/embryos/chapter12/apps/putchar.c:19
}
    70001f24:	0001                	nop
    70001f26:	60e2                	ld	ra,24(sp)
    70001f28:	6442                	ld	s0,16(sp)
    70001f2a:	6105                	addi	sp,sp,32
    70001f2c:	8082                	ret

0000000070001f2e <readline>:
readline():
/embryos/chapter12/apps/putchar.c:21

int readline(char *line, int size) {
    70001f2e:	1101                	addi	sp,sp,-32
    70001f30:	ec06                	sd	ra,24(sp)
    70001f32:	e822                	sd	s0,16(sp)
    70001f34:	1000                	addi	s0,sp,32
    70001f36:	fea43423          	sd	a0,-24(s0)
    70001f3a:	87ae                	mv	a5,a1
    70001f3c:	fef42223          	sw	a5,-28(s0)
/embryos/chapter12/apps/putchar.c:22
    init();
    70001f40:	00000097          	auipc	ra,0x0
    70001f44:	f6e080e7          	jalr	-146(ra) # 70001eae <init>
/embryos/chapter12/apps/putchar.c:23
    return window_readline(&window, line, size);
    70001f48:	fe442783          	lw	a5,-28(s0)
    70001f4c:	863e                	mv	a2,a5
    70001f4e:	fe843583          	ld	a1,-24(s0)
    70001f52:	00000517          	auipc	a0,0x0
    70001f56:	36650513          	addi	a0,a0,870 # 700022b8 <window>
    70001f5a:	00000097          	auipc	ra,0x0
    70001f5e:	bbe080e7          	jalr	-1090(ra) # 70001b18 <window_readline>
    70001f62:	87aa                	mv	a5,a0
/embryos/chapter12/apps/putchar.c:24
}
    70001f64:	853e                	mv	a0,a5
    70001f66:	60e2                	ld	ra,24(sp)
    70001f68:	6442                	ld	s0,16(sp)
    70001f6a:	6105                	addi	sp,sp,32
    70001f6c:	8082                	ret

0000000070001f6e <malloc>:
malloc():
/embryos/chapter12/apps/malloc.c:20
};

static struct m_hdr *free_list, *brk;
extern struct m_hdr __bss_end[];

void *malloc(size_t size) {
    70001f6e:	7139                	addi	sp,sp,-64
    70001f70:	fc06                	sd	ra,56(sp)
    70001f72:	f822                	sd	s0,48(sp)
    70001f74:	0080                	addi	s0,sp,64
    70001f76:	fca43423          	sd	a0,-56(s0)
/embryos/chapter12/apps/malloc.c:22
    struct m_hdr *mh;
    size = ROUNDUP(sizeof(*mh) + size);
    70001f7a:	fc843783          	ld	a5,-56(s0)
    70001f7e:	07fd                	addi	a5,a5,31
    70001f80:	9bc1                	andi	a5,a5,-16
    70001f82:	fcf43423          	sd	a5,-56(s0)
/embryos/chapter12/apps/malloc.c:23
    for (struct m_hdr **pmh = &free_list; (mh = *pmh); pmh = &mh->next)
    70001f86:	00000797          	auipc	a5,0x0
    70001f8a:	6a278793          	addi	a5,a5,1698 # 70002628 <free_list>
    70001f8e:	fef43423          	sd	a5,-24(s0)
    70001f92:	a035                	j	70001fbe <malloc+0x50>
/embryos/chapter12/apps/malloc.c:24
        if (mh->size == size) {
    70001f94:	fe043783          	ld	a5,-32(s0)
    70001f98:	679c                	ld	a5,8(a5)
    70001f9a:	fc843703          	ld	a4,-56(s0)
    70001f9e:	00f71c63          	bne	a4,a5,70001fb6 <malloc+0x48>
/embryos/chapter12/apps/malloc.c:25
            *pmh = mh->next;
    70001fa2:	fe043783          	ld	a5,-32(s0)
    70001fa6:	6398                	ld	a4,0(a5)
    70001fa8:	fe843783          	ld	a5,-24(s0)
    70001fac:	e398                	sd	a4,0(a5)
/embryos/chapter12/apps/malloc.c:26
            return &mh[1];
    70001fae:	fe043783          	ld	a5,-32(s0)
    70001fb2:	07c1                	addi	a5,a5,16
    70001fb4:	a841                	j	70002044 <malloc+0xd6>
/embryos/chapter12/apps/malloc.c:23 (discriminator 2)
    for (struct m_hdr **pmh = &free_list; (mh = *pmh); pmh = &mh->next)
    70001fb6:	fe043783          	ld	a5,-32(s0)
    70001fba:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/malloc.c:23 (discriminator 1)
    70001fbe:	fe843783          	ld	a5,-24(s0)
    70001fc2:	639c                	ld	a5,0(a5)
    70001fc4:	fef43023          	sd	a5,-32(s0)
    70001fc8:	fe043783          	ld	a5,-32(s0)
    70001fcc:	f7e1                	bnez	a5,70001f94 <malloc+0x26>
/embryos/chapter12/apps/malloc.c:28
        }
    if (!brk) brk = (struct m_hdr *) ROUNDUP(&__bss_end[1]) - 1;
    70001fce:	00000797          	auipc	a5,0x0
    70001fd2:	66278793          	addi	a5,a5,1634 # 70002630 <brk>
    70001fd6:	639c                	ld	a5,0(a5)
    70001fd8:	ef91                	bnez	a5,70001ff4 <malloc+0x86>
/embryos/chapter12/apps/malloc.c:28 (discriminator 1)
    70001fda:	00000797          	auipc	a5,0x0
    70001fde:	66e78793          	addi	a5,a5,1646 # 70002648 <__bss_end+0x10>
    70001fe2:	07bd                	addi	a5,a5,15
    70001fe4:	9bc1                	andi	a5,a5,-16
    70001fe6:	17c1                	addi	a5,a5,-16
    70001fe8:	873e                	mv	a4,a5
    70001fea:	00000797          	auipc	a5,0x0
    70001fee:	64678793          	addi	a5,a5,1606 # 70002630 <brk>
    70001ff2:	e398                	sd	a4,0(a5)
/embryos/chapter12/apps/malloc.c:29
    char *next = (char *) brk + size;
    70001ff4:	00000797          	auipc	a5,0x0
    70001ff8:	63c78793          	addi	a5,a5,1596 # 70002630 <brk>
    70001ffc:	6398                	ld	a4,0(a5)
    70001ffe:	fc843783          	ld	a5,-56(s0)
    70002002:	97ba                	add	a5,a5,a4
    70002004:	fcf43c23          	sd	a5,-40(s0)
/embryos/chapter12/apps/malloc.c:30
    if (next > (char *) VM_END) return 0;
    70002008:	fd843703          	ld	a4,-40(s0)
    7000200c:	702007b7          	lui	a5,0x70200
    70002010:	00e7f463          	bgeu	a5,a4,70002018 <malloc+0xaa>
/embryos/chapter12/apps/malloc.c:30 (discriminator 1)
    70002014:	4781                	li	a5,0
/embryos/chapter12/apps/malloc.c:30
    70002016:	a03d                	j	70002044 <malloc+0xd6>
/embryos/chapter12/apps/malloc.c:31
    mh = brk;
    70002018:	00000797          	auipc	a5,0x0
    7000201c:	61878793          	addi	a5,a5,1560 # 70002630 <brk>
    70002020:	639c                	ld	a5,0(a5)
    70002022:	fef43023          	sd	a5,-32(s0)
/embryos/chapter12/apps/malloc.c:32
    mh->size = size;
    70002026:	fe043783          	ld	a5,-32(s0)
    7000202a:	fc843703          	ld	a4,-56(s0)
    7000202e:	e798                	sd	a4,8(a5)
/embryos/chapter12/apps/malloc.c:33
    brk = (struct m_hdr *) next;
    70002030:	00000797          	auipc	a5,0x0
    70002034:	60078793          	addi	a5,a5,1536 # 70002630 <brk>
    70002038:	fd843703          	ld	a4,-40(s0)
    7000203c:	e398                	sd	a4,0(a5)
/embryos/chapter12/apps/malloc.c:34
    return &mh[1];
    7000203e:	fe043783          	ld	a5,-32(s0)
    70002042:	07c1                	addi	a5,a5,16
/embryos/chapter12/apps/malloc.c:35
}
    70002044:	853e                	mv	a0,a5
    70002046:	70e2                	ld	ra,56(sp)
    70002048:	7442                	ld	s0,48(sp)
    7000204a:	6121                	addi	sp,sp,64
    7000204c:	8082                	ret

000000007000204e <calloc>:
calloc():
/embryos/chapter12/apps/malloc.c:37

void *calloc(size_t nitems, size_t size) {
    7000204e:	7179                	addi	sp,sp,-48
    70002050:	f406                	sd	ra,40(sp)
    70002052:	f022                	sd	s0,32(sp)
    70002054:	1800                	addi	s0,sp,48
    70002056:	fca43c23          	sd	a0,-40(s0)
    7000205a:	fcb43823          	sd	a1,-48(s0)
/embryos/chapter12/apps/malloc.c:38
    size *= nitems;
    7000205e:	fd043703          	ld	a4,-48(s0)
    70002062:	fd843783          	ld	a5,-40(s0)
    70002066:	02f707b3          	mul	a5,a4,a5
    7000206a:	fcf43823          	sd	a5,-48(s0)
/embryos/chapter12/apps/malloc.c:39
    void *p = malloc(size);
    7000206e:	fd043503          	ld	a0,-48(s0)
    70002072:	00000097          	auipc	ra,0x0
    70002076:	efc080e7          	jalr	-260(ra) # 70001f6e <malloc>
    7000207a:	fea43423          	sd	a0,-24(s0)
/embryos/chapter12/apps/malloc.c:40
    if (p != 0) memset(p, 0, size);
    7000207e:	fe843783          	ld	a5,-24(s0)
    70002082:	cb91                	beqz	a5,70002096 <calloc+0x48>
/embryos/chapter12/apps/malloc.c:40 (discriminator 1)
    70002084:	fd043603          	ld	a2,-48(s0)
    70002088:	4581                	li	a1,0
    7000208a:	fe843503          	ld	a0,-24(s0)
    7000208e:	ffffe097          	auipc	ra,0xffffe
    70002092:	53a080e7          	jalr	1338(ra) # 700005c8 <memset>
/embryos/chapter12/apps/malloc.c:41
    return p;
    70002096:	fe843783          	ld	a5,-24(s0)
/embryos/chapter12/apps/malloc.c:42
}
    7000209a:	853e                	mv	a0,a5
    7000209c:	70a2                	ld	ra,40(sp)
    7000209e:	7402                	ld	s0,32(sp)
    700020a0:	6145                	addi	sp,sp,48
    700020a2:	8082                	ret

00000000700020a4 <realloc>:
realloc():
/embryos/chapter12/apps/malloc.c:44

void *realloc(void *ptr, size_t size) {
    700020a4:	7179                	addi	sp,sp,-48
    700020a6:	f406                	sd	ra,40(sp)
    700020a8:	f022                	sd	s0,32(sp)
    700020aa:	1800                	addi	s0,sp,48
    700020ac:	fca43c23          	sd	a0,-40(s0)
    700020b0:	fcb43823          	sd	a1,-48(s0)
/embryos/chapter12/apps/malloc.c:45
    if (ptr == 0) return malloc(size);
    700020b4:	fd843783          	ld	a5,-40(s0)
    700020b8:	eb89                	bnez	a5,700020ca <realloc+0x26>
/embryos/chapter12/apps/malloc.c:45 (discriminator 1)
    700020ba:	fd043503          	ld	a0,-48(s0)
    700020be:	00000097          	auipc	ra,0x0
    700020c2:	eb0080e7          	jalr	-336(ra) # 70001f6e <malloc>
    700020c6:	87aa                	mv	a5,a0
/embryos/chapter12/apps/malloc.c:45
    700020c8:	a895                	j	7000213c <realloc+0x98>
/embryos/chapter12/apps/malloc.c:46
    struct m_hdr *mh = (struct m_hdr *) ptr - 1;
    700020ca:	fd843783          	ld	a5,-40(s0)
    700020ce:	17c1                	addi	a5,a5,-16
    700020d0:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/malloc.c:47
    size = ROUNDUP(sizeof(*mh) + size);
    700020d4:	fd043783          	ld	a5,-48(s0)
    700020d8:	07fd                	addi	a5,a5,31
    700020da:	9bc1                	andi	a5,a5,-16
    700020dc:	fcf43823          	sd	a5,-48(s0)
/embryos/chapter12/apps/malloc.c:48
    if (size <= mh->size) return ptr;
    700020e0:	fe843783          	ld	a5,-24(s0)
    700020e4:	679c                	ld	a5,8(a5)
    700020e6:	fd043703          	ld	a4,-48(s0)
    700020ea:	00e7e563          	bltu	a5,a4,700020f4 <realloc+0x50>
/embryos/chapter12/apps/malloc.c:48 (discriminator 1)
    700020ee:	fd843783          	ld	a5,-40(s0)
/embryos/chapter12/apps/malloc.c:48
    700020f2:	a0a9                	j	7000213c <realloc+0x98>
/embryos/chapter12/apps/malloc.c:49
    void *newp = malloc(size - sizeof(*mh));
    700020f4:	fd043783          	ld	a5,-48(s0)
    700020f8:	17c1                	addi	a5,a5,-16
    700020fa:	853e                	mv	a0,a5
    700020fc:	00000097          	auipc	ra,0x0
    70002100:	e72080e7          	jalr	-398(ra) # 70001f6e <malloc>
    70002104:	fea43023          	sd	a0,-32(s0)
/embryos/chapter12/apps/malloc.c:50
    if (newp == 0) return 0;
    70002108:	fe043783          	ld	a5,-32(s0)
    7000210c:	e399                	bnez	a5,70002112 <realloc+0x6e>
/embryos/chapter12/apps/malloc.c:50 (discriminator 1)
    7000210e:	4781                	li	a5,0
/embryos/chapter12/apps/malloc.c:50
    70002110:	a035                	j	7000213c <realloc+0x98>
/embryos/chapter12/apps/malloc.c:51
    memcpy(newp, ptr, mh->size - sizeof(*mh));
    70002112:	fe843783          	ld	a5,-24(s0)
    70002116:	679c                	ld	a5,8(a5)
    70002118:	17c1                	addi	a5,a5,-16
    7000211a:	863e                	mv	a2,a5
    7000211c:	fd843583          	ld	a1,-40(s0)
    70002120:	fe043503          	ld	a0,-32(s0)
    70002124:	ffffe097          	auipc	ra,0xffffe
    70002128:	470080e7          	jalr	1136(ra) # 70000594 <memcpy>
/embryos/chapter12/apps/malloc.c:52
    free(ptr);
    7000212c:	fd843503          	ld	a0,-40(s0)
    70002130:	00000097          	auipc	ra,0x0
    70002134:	016080e7          	jalr	22(ra) # 70002146 <free>
/embryos/chapter12/apps/malloc.c:53
    return newp;
    70002138:	fe043783          	ld	a5,-32(s0)
/embryos/chapter12/apps/malloc.c:54
}
    7000213c:	853e                	mv	a0,a5
    7000213e:	70a2                	ld	ra,40(sp)
    70002140:	7402                	ld	s0,32(sp)
    70002142:	6145                	addi	sp,sp,48
    70002144:	8082                	ret

0000000070002146 <free>:
free():
/embryos/chapter12/apps/malloc.c:56

void free(void *ptr) {
    70002146:	7179                	addi	sp,sp,-48
    70002148:	f406                	sd	ra,40(sp)
    7000214a:	f022                	sd	s0,32(sp)
    7000214c:	1800                	addi	s0,sp,48
    7000214e:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/malloc.c:57
    if (ptr == 0) return;
    70002152:	fd843783          	ld	a5,-40(s0)
    70002156:	c795                	beqz	a5,70002182 <free+0x3c>
/embryos/chapter12/apps/malloc.c:58
    struct m_hdr *mh = (struct m_hdr *) ptr - 1;
    70002158:	fd843783          	ld	a5,-40(s0)
    7000215c:	17c1                	addi	a5,a5,-16
    7000215e:	fef43423          	sd	a5,-24(s0)
/embryos/chapter12/apps/malloc.c:59
    mh->next = free_list;
    70002162:	00000797          	auipc	a5,0x0
    70002166:	4c678793          	addi	a5,a5,1222 # 70002628 <free_list>
    7000216a:	6398                	ld	a4,0(a5)
    7000216c:	fe843783          	ld	a5,-24(s0)
    70002170:	e398                	sd	a4,0(a5)
/embryos/chapter12/apps/malloc.c:60
    free_list = mh;
    70002172:	00000797          	auipc	a5,0x0
    70002176:	4b678793          	addi	a5,a5,1206 # 70002628 <free_list>
    7000217a:	fe843703          	ld	a4,-24(s0)
    7000217e:	e398                	sd	a4,0(a5)
    70002180:	a011                	j	70002184 <free+0x3e>
/embryos/chapter12/apps/malloc.c:57
    if (ptr == 0) return;
    70002182:	0001                	nop
/embryos/chapter12/apps/malloc.c:61
}
    70002184:	70a2                	ld	ra,40(sp)
    70002186:	7402                	ld	s0,32(sp)
    70002188:	6145                	addi	sp,sp,48
    7000218a:	8082                	ret

000000007000218c <read>:
read():
/embryos/chapter12/apps/cat.c:5
#include "syslib.h"
#include "stdio.h"
#include "dir.h"

void read(char *file) {
    7000218c:	7179                	addi	sp,sp,-48
    7000218e:	f406                	sd	ra,40(sp)
    70002190:	f022                	sd	s0,32(sp)
    70002192:	1800                	addi	s0,sp,48
    70002194:	fca43c23          	sd	a0,-40(s0)
/embryos/chapter12/apps/cat.c:6
    int f = dir_lookup(file);
    70002198:	fd843503          	ld	a0,-40(s0)
    7000219c:	fffff097          	auipc	ra,0xfffff
    700021a0:	cea080e7          	jalr	-790(ra) # 70000e86 <dir_lookup>
    700021a4:	87aa                	mv	a5,a0
    700021a6:	fef42423          	sw	a5,-24(s0)
/embryos/chapter12/apps/cat.c:7
    if (f < 0) {
    700021aa:	fe842783          	lw	a5,-24(s0)
    700021ae:	2781                	sext.w	a5,a5
    700021b0:	0007dd63          	bgez	a5,700021ca <read+0x3e>
/embryos/chapter12/apps/cat.c:8
        printf("%s: No such file\n", file);
    700021b4:	fd843583          	ld	a1,-40(s0)
    700021b8:	00000517          	auipc	a0,0x0
    700021bc:	0b850513          	addi	a0,a0,184 # 70002270 <main+0x5a>
    700021c0:	fffff097          	auipc	ra,0xfffff
    700021c4:	9ba080e7          	jalr	-1606(ra) # 70000b7a <printf>
/embryos/chapter12/apps/cat.c:9
        return;
    700021c8:	a099                	j	7000220e <read+0x82>
/embryos/chapter12/apps/cat.c:11
    }
    for (int off = 0;; off++) {
    700021ca:	fe042623          	sw	zero,-20(s0)
/embryos/chapter12/apps/cat.c:13
        char c;
        if (user_read(f, off, &c, 1) != 1) break;
    700021ce:	fe740613          	addi	a2,s0,-25
    700021d2:	fec42703          	lw	a4,-20(s0)
    700021d6:	fe842783          	lw	a5,-24(s0)
    700021da:	4685                	li	a3,1
    700021dc:	85ba                	mv	a1,a4
    700021de:	853e                	mv	a0,a5
    700021e0:	ffffe097          	auipc	ra,0xffffe
    700021e4:	e64080e7          	jalr	-412(ra) # 70000044 <user_read>
    700021e8:	87aa                	mv	a5,a0
    700021ea:	873e                	mv	a4,a5
/embryos/chapter12/apps/cat.c:13 (discriminator 1)
    700021ec:	4785                	li	a5,1
    700021ee:	00f71f63          	bne	a4,a5,7000220c <read+0x80>
/embryos/chapter12/apps/cat.c:14
        putchar(c);
    700021f2:	fe744783          	lbu	a5,-25(s0)
    700021f6:	853e                	mv	a0,a5
    700021f8:	00000097          	auipc	ra,0x0
    700021fc:	d00080e7          	jalr	-768(ra) # 70001ef8 <putchar>
/embryos/chapter12/apps/cat.c:11
    for (int off = 0;; off++) {
    70002200:	fec42783          	lw	a5,-20(s0)
    70002204:	2785                	addiw	a5,a5,1
    70002206:	fef42623          	sw	a5,-20(s0)
    7000220a:	b7d1                	j	700021ce <read+0x42>
/embryos/chapter12/apps/cat.c:13
        if (user_read(f, off, &c, 1) != 1) break;
    7000220c:	0001                	nop
/embryos/chapter12/apps/cat.c:16
    }
}
    7000220e:	70a2                	ld	ra,40(sp)
    70002210:	7402                	ld	s0,32(sp)
    70002212:	6145                	addi	sp,sp,48
    70002214:	8082                	ret

0000000070002216 <main>:
main():
/embryos/chapter12/apps/cat.c:18

void main(int argc, char **argv) {
    70002216:	7179                	addi	sp,sp,-48
    70002218:	f406                	sd	ra,40(sp)
    7000221a:	f022                	sd	s0,32(sp)
    7000221c:	1800                	addi	s0,sp,48
    7000221e:	87aa                	mv	a5,a0
    70002220:	fcb43823          	sd	a1,-48(s0)
    70002224:	fcf42e23          	sw	a5,-36(s0)
/embryos/chapter12/apps/cat.c:19
    for (int i = 1; i < argc; i++) read(argv[i]);
    70002228:	4785                	li	a5,1
    7000222a:	fef42623          	sw	a5,-20(s0)
    7000222e:	a015                	j	70002252 <main+0x3c>
/embryos/chapter12/apps/cat.c:19 (discriminator 4)
    70002230:	fec42783          	lw	a5,-20(s0)
    70002234:	078e                	slli	a5,a5,0x3
    70002236:	fd043703          	ld	a4,-48(s0)
    7000223a:	97ba                	add	a5,a5,a4
    7000223c:	639c                	ld	a5,0(a5)
    7000223e:	853e                	mv	a0,a5
    70002240:	00000097          	auipc	ra,0x0
    70002244:	f4c080e7          	jalr	-180(ra) # 7000218c <read>
    70002248:	fec42783          	lw	a5,-20(s0)
    7000224c:	2785                	addiw	a5,a5,1
    7000224e:	fef42623          	sw	a5,-20(s0)
/embryos/chapter12/apps/cat.c:19 (discriminator 3)
    70002252:	fec42783          	lw	a5,-20(s0)
    70002256:	873e                	mv	a4,a5
    70002258:	fdc42783          	lw	a5,-36(s0)
    7000225c:	2701                	sext.w	a4,a4
    7000225e:	2781                	sext.w	a5,a5
    70002260:	fcf748e3          	blt	a4,a5,70002230 <main+0x1a>
/embryos/chapter12/apps/cat.c:20
}
    70002264:	0001                	nop
    70002266:	0001                	nop
    70002268:	70a2                	ld	ra,40(sp)
    7000226a:	7402                	ld	s0,32(sp)
    7000226c:	6145                	addi	sp,sp,48
    7000226e:	8082                	ret
    70002270:	7325                	lui	t1,0xfffe9
    70002272:	203a                	.insn	2, 0x203a
    70002274:	6f4e                	ld	t5,208(sp)
    70002276:	7320                	ld	s0,96(a4)
    70002278:	6375                	lui	t1,0x1d
    7000227a:	2068                	.insn	2, 0x2068
    7000227c:	6966                	ld	s2,88(sp)
    7000227e:	656c                	ld	a1,200(a0)
    70002280:	000a                	c.slli	zero,0x2
